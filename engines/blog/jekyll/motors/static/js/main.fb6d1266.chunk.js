(this["webpackJsonpfrc-motor-modelling"]=this["webpackJsonpfrc-motor-modelling"]||[]).push([[0],{172:function(e,t,n){var a,i=n(165).wrap,s=n(423);e.exports=function e(){return this instanceof e?i(s()):a||(a=i(s()))}},173:function(e,t,n){var a,i=n(165).wrap,s=n(424);e.exports=function e(){return this instanceof e?i(s()):a||(a=i(s()))}},327:function(e,t,n){},423:function(e,t,n){e.exports=function(){return new Worker(n.p+"b68e955709293d7a5d7f.worker.js")}},424:function(e,t,n){e.exports=function(){return new Worker(n.p+"349ab8d55eec74f1bc76.worker.js")}},425:function(e,t,n){"use strict";n.r(t);var a={};n.r(a),n.d(a,"Measurement",(function(){return E})),n.d(a,"m",(function(){return z})),n.d(a,"mm",(function(){return I})),n.d(a,"cm",(function(){return T})),n.d(a,"inch",(function(){return B})),n.d(a,"ft",(function(){return q})),n.d(a,"field",(function(){return U})),n.d(a,"s",(function(){return K})),n.d(a,"ms",(function(){return J})),n.d(a,"kg",(function(){return H})),n.d(a,"lb",(function(){return W})),n.d(a,"V",(function(){return Q})),n.d(a,"A",(function(){return X})),n.d(a,"mA",(function(){return Y})),n.d(a,"rad",(function(){return Z})),n.d(a,"deg",(function(){return $})),n.d(a,"mps",(function(){return ee})),n.d(a,"mmps",(function(){return te})),n.d(a,"inchps",(function(){return ne})),n.d(a,"ftps",(function(){return ae})),n.d(a,"kph",(function(){return ie})),n.d(a,"field_per_s",(function(){return se})),n.d(a,"mpsps",(function(){return re})),n.d(a,"ftpsps",(function(){return oe})),n.d(a,"radps",(function(){return ce})),n.d(a,"degps",(function(){return ue})),n.d(a,"rpm",(function(){return le})),n.d(a,"Nm",(function(){return pe})),n.d(a,"ftlb",(function(){return he}));var i=n(1),s=n(0),r=n.n(s),o=n(23),c=n.n(o),u=n(24),l=n(10),p=n(8),h=n(9),d=n(13),b=n(11),j=n(12),f=n(433),m=n(436),g=n(432),O=n(170),v=n(439),x=n(19),y=n(441),C=n(443),k=function(e){Object(b.a)(n,e);var t=Object(j.a)(n);function n(){var e;Object(p.a)(this,n);for(var a=arguments.length,i=new Array(a),s=0;s<a;s++)i[s]=arguments[s];return(e=t.call.apply(t,[this].concat(i))).getClassName=function(){var t=[n.styles[e.props.icon_style],"fa-".concat(e.props.icon),e.props.className];return e.props.size&&t.push("fa-".concat(e.props.size)),e.props.spin&&t.push("fa-spin"),t.join(" ")},e}return Object(h.a)(n,[{key:"render",value:function(){return Object(i.jsxs)(r.a.Fragment,{children:[Object(i.jsx)("i",{className:this.getClassName()})," ",this.props.nospace?"":"\xa0"," "]})}}]),n}(r.a.PureComponent);k.defaultProps={icon_style:"solid"},k.styles={regular:"far",solid:"fas",brand:"fab"};var w=k,_=function(e){Object(b.a)(n,e);var t=Object(j.a)(n);function n(e){var a;return Object(p.a)(this,n),(a=t.call(this,e)).state={selected:"1"},a}return Object(h.a)(n,[{key:"render",value:function(){var e=this,t=this.props,n=t.title,a=t.children,s=Object(x.a)(t,["title","children"]);return Object(i.jsx)(y.a,Object(l.a)(Object(l.a)({defaultActiveKey:"1",onSelect:function(t){return e.setState({selected:t})}},s),{},{children:Object(i.jsxs)(C.a,{children:[Object(i.jsxs)(y.a.Toggle,{as:C.a.Header,eventKey:"1",children:[Object(i.jsx)(w,{size:"lg",icon:"1"===this.state.selected?"caret-up":"caret-down"}),"\xa0",n]}),Object(i.jsx)(y.a.Collapse,{eventKey:"1",children:Object(i.jsx)(C.a.Body,{children:a})})]})}))}}]),n}(r.a.Component),S=function(){function e(t,n,a,i,s,r){Object(p.a)(this,e),this.name=t,this.voltage_nom=n,this.free_speed=a,this.free_current=i,this.stall_torque=s,this.stall_current=r}return Object(h.a)(e,[{key:"mult",value:function(t){return new e(this.name+" (x"+t+")",this.voltage_nom,this.free_speed,t*this.free_current,t*this.stall_torque,t*this.stall_current)}},{key:"reduce",value:function(t){return new e(this.name+" (G="+t+")",this.voltage_nom,this.free_speed/t,this.free_current,this.stall_torque*t,this.stall_current)}},{key:"withEfficiency",value:function(t){return new e(this.name+" (Eff="+t+")",this.voltage_nom,this.free_speed,this.free_current,this.stall_torque*t,this.stall_current)}},{key:"R",value:function(){return this.voltage_nom/this.stall_current}},{key:"kw",value:function(){return(this.voltage_nom-this.free_current*this.R())/this.free_speed}},{key:"kt",value:function(){return this.stall_current/this.stall_torque}},{key:"calculate",value:function(e,t){var n=(e-this.kw()*t)/this.R();return{current:n,torque:n/this.kt()}}}]),e}(),A=2*Math.PI/60,R={Falcon500:new S("Falcon 500",12,6380*A,1.5,4.69,257),NEO:new S("NEO",12,5880*A,1.3,3.36,166),NEO550:new S("NEO 550",12,11710*A,1.1,1.08,111),CIM:new S("CIM",12,5330*A,2.7,2.41,131),MiniCIM:new S("Mini CIM",12,5840*A,3,1.41,89),BAG:new S("BAG",12,13180*A,1.8,.43,53),pro775:new S("775pro",12,14270*A,3.7,.36,71),redline:new S("AM Redline",12,19500*A,2.6,.64,122),neverest:new S("AM NeveRest",12,5480*A,.35,.17,9.8)};var N=n(434),F=n(53),M=n(437),P=n(431),L=function(e){Object(b.a)(n,e);var t=Object(j.a)(n);function n(){return Object(p.a)(this,n),t.apply(this,arguments)}return Object(h.a)(n,[{key:"render",value:function(){var e=this.props,t=e.tooltip,n=e.overlay,a=e.placement,s=Object(x.a)(e,["tooltip","overlay","placement"]);return Object(i.jsx)(M.a,Object(l.a)(Object(l.a)({placement:a,overlay:n||Object(i.jsxs)(P.a,{children:[" ",t," "]})},s),{},{children:Object(i.jsx)("span",{children:Object(i.jsx)(w,{icon:"question-circle",size:"sm"})})}))}}]),n}(r.a.PureComponent);L.defaultProps={placement:"top"};var D=L,V=n(26),G=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;if(Object(p.a)(this,e),this.name=t,this.factor_to_base=n,this.base=a,!a&&n-1>.001)throw"ERROR: Unit ".concat(t," has no base unit!");if(a){for(;this.base.base!==this.base;)this.factor_to_base*=this.base.factor_to_base,this.base=this.base.base;this.base.derivatives.push(this)}else this.derivatives=[],this.base=this;e.map[t]=this}return Object(h.a)(e,[{key:"toBase",value:function(e){return e*this.factor_to_base}},{key:"fromBase",value:function(e){return e/this.factor_to_base}},{key:"to",value:function(e,t){if(e.base!==this.base)throw"Cannot convert between units of different bases!";return e.fromBase(this.toBase(t))}},{key:"allVariants",value:function(){return[this.base].concat(Object(V.a)(this.base.derivatives))}}],[{key:"fromObject",value:function(t){return"object"===typeof t&&null!==t?e.map[t.name]:t}}]),e}();G.map={};var E=function(){function e(t,n){if(Object(p.a)(this,e),this.unit=t,this.value=n,void 0===this.unit||void 0===this.value)throw"Measurement params undefined"}return Object(h.a)(e,[{key:"to",value:function(t){return new e(t,this.unit.to(t,this.value))}},{key:"toBase",value:function(){return this.unit.toBase(this.value)}},{key:"with",value:function(t){return new e(this.unit,t(this.value))}}],[{key:"fromObject",value:function(t){return"object"===typeof t&&null!==t?new e(G.fromObject(t.unit),t.value):t}}]),e}();G.prototype.make=function(e){return new E(this,e)};var z=new G("m",1),I=new G("mm",.001,z),T=new G("cm",10,I),B=new G("in",25.4,I),q=new G("ft",12,B),U=new G("FRC Field (54ft)",54,q),K=new G("s",1),J=new G("ms",.001,K),H=new G("kg",1),W=new G("lb",.453592,H),Q=new G("V",1),X=new G("A",1),Y=new G("mA",.001,X),Z=new G("rad",1),$=new G("deg",Math.PI/180,Z),ee=new G("m/s",1),te=new G("mm/s",.001,ee),ne=new G("in/s",25.4,te),ae=new G("ft/s",12,ne),ie=new G("km/hr",1/3.6,ee),se=new G("FRC Fields / s",54,ae),re=new G("m/s/s",1),oe=new G("ft/s/s",12*25.4/1e3,re),ce=new G("rad/s",1),ue=new G("deg/s",Math.PI/180,ce),le=new G("rpm",2*Math.PI/60,ce),pe=new G("Nm",1),he=new G("ftlb",1.35582,pe),de=function(e){Object(b.a)(n,e);var t=Object(j.a)(n);function n(){return Object(p.a)(this,n),t.apply(this,arguments)}return Object(h.a)(n,[{key:"render",value:function(){var e=this.props,t=e.children,n=Object(x.a)(e,["children"]);return Object(i.jsxs)("option",Object(l.a)(Object(l.a)({},n),{},{children:[" ",t," "]}))}}]),n}(r.a.PureComponent),be=function(e){Object(b.a)(n,e);var t=Object(j.a)(n);function n(e){var a;return Object(p.a)(this,n),(a=t.call(this,e)).change=a.change.bind(Object(d.a)(a)),a.findOptionFor=a.findOptionFor.bind(Object(d.a)(a)),a}return Object(h.a)(n,[{key:"change",value:function(e){if(this.props.onChange){var t=e.target.value,n=this.props.children.find((function(e){return e.key===t}));this.props.onChange(n.props.data)}}},{key:"findOptionFor",value:function(e){return this.props.children.find((function(t){return t.props.data===e}))}},{key:"render",value:function(){var e=this.props,t=e.children,n=e.value,a=(e.onChange,Object(x.a)(e,["children","value","onChange"]));return Object(i.jsx)(v.a.Control,Object(l.a)(Object(l.a)({size:"sm",as:"select",value:this.findOptionFor(n).key,onChange:this.change},a),{},{children:t}))}}]),n}(r.a.Component);be.Option=de;var je=be,fe=function(e){Object(b.a)(n,e);var t=Object(j.a)(n);function n(){return Object(p.a)(this,n),t.apply(this,arguments)}return Object(h.a)(n,[{key:"render",value:function(){var e=this.props,t=e.value,n=e.onChange,a=e.unit,s=Object(x.a)(e,["value","onChange","unit"]);return Object(i.jsx)(je,Object(l.a)(Object(l.a)({value:t,onChange:n},s),{},{children:(a||t).base.allVariants().map((function(e){return Object(i.jsxs)(je.Option,{data:e,children:[" ",e.name," "]},e.name)}))}))}}]),n}(r.a.PureComponent);fe.defaultProps={unit:void 0,value:void 0,onChange:void 0};var me=fe,ge=function(e){Object(b.a)(n,e);var t=Object(j.a)(n);function n(e){var a;return Object(p.a)(this,n),(a=t.call(this,e)).changeValue=a.changeValue.bind(Object(d.a)(a)),a.getValue=a.getValue.bind(Object(d.a)(a)),a}return Object(h.a)(n,[{key:"changeValue",value:function(e){var t=e.target.value,n=this.props.parse(t);this.props.unit?this.props.onChange(new E(this.props.value.unit,n)):this.props.onChange(n)}},{key:"getValue",value:function(){var e=this.props.unit?this.props.value.value:this.props.value;return this.props.parse===parseFloat&&(e=parseFloat(e.toFixed(this.props.round))),e}},{key:"render",value:function(){var e=this.props,t=e.className,n=e.sm_lab,a=e.label,s=e.sm_input,o=e.sm_unit,c=(e.sm_tooltip,e.tooltip),u=e.unit,p=e.unitContent,h=(e.parse,e.value),d=e.onChange,b=Object(x.a)(e,["className","sm_lab","label","sm_input","sm_unit","sm_tooltip","tooltip","unit","unitContent","parse","value","onChange"]);return Object(i.jsxs)(v.a.Row,{className:t,children:[a?Object(i.jsxs)(v.a.Label,{column:"sm",sm:n,children:[a,":"]}):Object(i.jsx)(r.a.Fragment,{}),Object(i.jsx)(O.a,{sm:s,children:Object(i.jsx)(v.a.Control,Object(l.a)({size:"sm",value:this.getValue(),onChange:this.changeValue},b))}),Object(i.jsx)(O.a,{sm:o,children:p||Object(i.jsxs)(g.a,{children:[Object(i.jsx)(O.a,{children:u?Object(i.jsx)(me,{unit:u,value:h.unit,onChange:function(e){return d(h.to(e))}}):Object(i.jsx)(r.a.Fragment,{})}),Object(i.jsx)(O.a,{className:"pl-0",xs:"3",children:c?Object(i.jsx)(D,{tooltip:c}):Object(i.jsx)(r.a.Fragment,{})})]})})]})}}]),n}(r.a.PureComponent);ge.defaultProps={sm_lab:5,sm_input:3,sm_unit:4,unit:void 0,unitContent:void 0,parse:parseFloat,round:3};var Oe=ge,ve=n(438),xe=n(442),ye=function(e){Object(b.a)(n,e);var t=Object(j.a)(n);function n(e){var a;return Object(p.a)(this,n),(a=t.call(this,e)).updateParent=function(){a.props.onChange&&a.props.onChange(a.state)},a.round=function(e){return parseFloat(e.toFixed(a.props.round))},a.partialReduction=function(e){return e[e.length-1]/e[0]},a.updateReduction=function(){if(a.state.gearbox){var e=a.state.gearbox.map(a.partialReduction).reduce((function(e,t){return e*t}));a.setState({reduction:e},a.updateParent)}else a.updateParent()},a.setReduction=function(e){a.setState({reduction:e},a.updateParent)},a.toggleCalc=function(){a.setState({gearbox:null===a.state.gearbox?[[14,50],[16,48]]:null},a.updateReduction)},a.addStage=function(){a.setState({gearbox:[].concat(Object(V.a)(a.state.gearbox),[[16,50]])},a.updateReduction)},a.removeStage=function(e){a.setState({gearbox:Object(V.a)(a.state.gearbox.filter((function(t,n){return n!==e})))},a.updateReduction)},a.updateStage=function(e,t,n){var i=Object(V.a)(a.state.gearbox);i[e][t]=n,a.setState({gearbox:i},a.updateReduction)},a.state={reduction:e.reduction,gearbox:e.gearbox},a.uuid=Object(xe.a)(),a}return Object(h.a)(n,[{key:"render",value:function(){var e=this,t=null===this.state.gearbox;return Object(i.jsxs)(v.a,{className:"gearbox-config",children:[Object(i.jsxs)(v.a.Row,{children:[Object(i.jsx)(O.a,{children:Object(i.jsx)(v.a.Switch,{id:"".concat(this.uuid,"-gearbox-switch"),label:"Stage Calculator",checked:!t,onChange:this.toggleCalc})}),Object(i.jsx)(O.a,{children:Object(i.jsx)(v.a.Control,{size:"sm",type:"number",step:.01,disabled:!t,value:this.round(this.state.reduction),onChange:function(t){return e.setReduction(parseFloat(t.target.value))}})})]}),Object(i.jsx)("hr",{}),t?Object(i.jsx)(r.a.Fragment,{}):Object(i.jsxs)(r.a.Fragment,{children:[this.state.gearbox.map((function(t,n){return Object(i.jsxs)(v.a.Row,{className:"my-3",children:[Object(i.jsx)(O.a,{children:Object(i.jsxs)("h6",{className:"align-self-center",children:["Stage ",n+1,"\xa0 \xa0",0===n?Object(i.jsx)(r.a.Fragment,{}):Object(i.jsx)("a",{className:"text-danger",onClick:function(){return e.removeStage(n)},children:Object(i.jsx)(w,{icon:"trash-alt",nospace:!0})})]})}),t.map((function(t,a){return Object(i.jsx)(O.a,{children:Object(i.jsx)(v.a.Control,{size:"md",type:"number",min:1,step:1,value:t,onChange:function(t){return e.updateStage(n,a,parseInt(t.target.value))}},"".concat(n,"-").concat(a))})})),Object(i.jsx)(O.a,{children:Object(i.jsx)(v.a.Control,{size:"md",type:"number",disabled:!0,value:e.round(e.partialReduction(t))})})]},n)})),Object(i.jsx)(v.a.Row,{children:Object(i.jsxs)(f.a,{variant:"outline-success",size:"sm",onClick:this.addStage,children:[Object(i.jsx)(w,{icon:"plus"}),"Add Stage"]})})]})]})}}]),n}(r.a.Component);ye.defaultProps={round:3};var Ce=function(e){Object(b.a)(n,e);var t=Object(j.a)(n);function n(){return Object(p.a)(this,n),t.apply(this,arguments)}return Object(h.a)(n,[{key:"render",value:function(){var e=this,t=this.props,n=t.show,a=t.onClose,s=t.onSave,r=Object(x.a)(t,["show","onClose","onSave"]);return Object(i.jsxs)(ve.a,{show:n,onHide:a,children:[Object(i.jsx)(ve.a.Header,{closeButton:!0,children:Object(i.jsx)(ve.a.Title,{children:" Configure Gearbox "})}),Object(i.jsx)(ve.a.Body,{children:Object(i.jsx)(ye,Object(l.a)(Object(l.a)({},r),{},{onChange:function(t){return e.setState(Object(l.a)({},t))}}))}),Object(i.jsxs)(ve.a.Footer,{children:[Object(i.jsx)(f.a,{variant:"secondary",onClick:a,children:" Cancel "}),Object(i.jsx)(f.a,{variant:"success",onClick:function(){a(),s(e.state)},children:" Save "})]})]})}}]),n}(r.a.Component),ke=function(e){Object(b.a)(n,e);var t=Object(j.a)(n);function n(e){var a;return Object(p.a)(this,n),(a=t.call(this,e)).state={showGearboxConfig:!1},a.getMotor=a.getMotor.bind(Object(d.a)(a)),a.saveGearboxConfig=a.saveGearboxConfig.bind(Object(d.a)(a)),a}return Object(h.a)(n,[{key:"getMotor",value:function(){return e=this.props.motor,R[e.key].mult(e.num).reduce(e.reduction).withEfficiency(e.efficiency/100);var e}},{key:"saveGearboxConfig",value:function(e){null!==e&&this.props.update(e)}},{key:"render",value:function(){var e=this;return Object(i.jsxs)(v.a,{children:[Object(i.jsx)(v.a.Row,{className:"mb-3",children:Object(i.jsx)(O.a,{children:Object(i.jsx)(N.a,{toggle:!0,className:"flex-wrap",children:Object.keys(R).map((function(t){return Object(i.jsx)(f.a,{variant:e.props.motor.key===t?"primary":"outline-secondary",size:"sm",value:t,name:"motor_selection",onClick:function(t){return e.props.update({key:t.currentTarget.value})},children:R[t].name},t)}))})})}),Object(i.jsx)("hr",{}),Object(i.jsx)(Oe,{label:"Applied Voltage",className:"mb-2",type:"number",value:this.props.motor.voltage,onChange:function(t){e.props.update({voltage:t})},min:0,max:14,step:.1,unit:a.V,tooltip:"Desired applied voltage to the motor during the simulation."}),Object(i.jsx)(Oe,{label:"Number of Motors",className:"mb-2",type:"number",value:this.props.motor.num,onChange:function(t){e.props.update({num:t})},min:1,step:1,parse:parseInt}),Object(i.jsx)(Oe,{label:"Gearbox Reduction",className:"mb-2",type:"number",value:this.props.motor.reduction,onChange:function(t){e.props.update({reduction:t})},min:0,step:.1,disabled:null!==this.props.motor.gearbox,unitContent:Object(i.jsx)(f.a,{variant:"info",size:"sm",onClick:function(){return e.setState({showGearboxConfig:!0})},children:Object(i.jsx)(w,{icon:"cog",nospace:!0})})}),Object(i.jsx)(Oe,{label:"Efficiency",className:"mb-2",type:"number",value:this.props.motor.efficiency,onChange:function(t){e.props.update({efficiency:t})},min:0,max:100,step:.5}),Object(i.jsx)(Ce,{show:this.state.showGearboxConfig,onClose:function(){return e.setState({showGearboxConfig:!1})},onSave:function(t){return e.saveGearboxConfig(t)},reduction:this.props.motor.reduction,gearbox:this.props.motor.gearbox}),Object(i.jsx)("hr",{}),Object(i.jsxs)("div",{className:"text-dark small",children:[Object(i.jsxs)("center",{children:[Object(i.jsx)("i",{children:" Equivalent Motor Coefficients "})," ",Object(i.jsx)(D,{tooltip:"Mathematical coefficients for a single motor model, after merging multiple motors and applying the gearbox reduction."})," "]}),Object(i.jsxs)(v.a.Row,{children:[Object(i.jsx)(O.a,{children:Object(i.jsx)(F.a,{tex:"V = IR + k_\\omega \\omega"})}),Object(i.jsx)(O.a,{children:Object(i.jsx)(F.a,{tex:"I = k_\\tau \\tau"})})]}),Object(i.jsxs)(v.a.Row,{children:[Object(i.jsx)(O.a,{className:"align-self-center",children:Object(i.jsx)(F.a,{tex:"R_{equiv} = "+this.getMotor().R().toFixed(4)+" \\Omega"})}),Object(i.jsx)(O.a,{className:"align-self-center",children:Object(i.jsx)(F.a,{tex:"k_\\omega = "+this.getMotor().kw().toFixed(5)+"\\ \\frac{Vs}{rad}"})}),Object(i.jsx)(O.a,{className:"align-self-center",children:Object(i.jsx)(F.a,{tex:"k_\\tau = "+this.getMotor().kt().toFixed(3)+"\\ \\frac{A}{Nm}"})})]})]})]})}}]),n}(r.a.Component),we=function(e){Object(b.a)(n,e);var t=Object(j.a)(n);function n(){return Object(p.a)(this,n),t.apply(this,arguments)}return Object(h.a)(n,[{key:"render",value:function(){var e=this;return Object(i.jsxs)(v.a,{children:[Object(i.jsx)(Oe,{label:"Load Mass",type:"number",min:0,value:this.props.load.mass,onChange:function(t){e.props.update({mass:t})},unit:a.kg}),Object(i.jsx)(Oe,{className:"mt-2",label:"Diameter",type:"number",min:0,value:this.props.load.radius.with((function(e){return 2*e})),onChange:function(t){return e.props.update({radius:t.with((function(e){return e/2}))})},unit:a.mm,tooltip:"Diameter of the wheel, pulley, or moment arm that converts angular motion to linear motion (e.g. drivetrain wheels, elevator pulley)."}),Object(i.jsx)(Oe,{className:"mt-2",label:"Accel Offset",type:"number",min:0,value:this.props.load.accel,onChange:function(t){return e.props.update({accel:t})},unit:a.mpsps,tooltip:"Acceleration acting on the load. For a drivetrain, this is likely 0. For an elevator, this is likely -9.81 (gravity, acting down)."})]})}}]),n}(r.a.PureComponent),_e=function(e){Object(b.a)(n,e);var t=Object(j.a)(n);function n(e){var a;return Object(p.a)(this,n),(a=t.call(this,e)).updateAndMerge=a.updateAndMerge.bind(Object(d.a)(a)),a}return Object(h.a)(n,[{key:"updateAndMerge",value:function(e,t){this.props.update(Object(u.a)({},e,Object(l.a)(Object(l.a)({},this.props.cfg[e]),t)))}},{key:"render",value:function(){var e=this;return Object(i.jsxs)("div",{children:[Object(i.jsxs)(v.a.Row,{className:"my-3",children:[Object(i.jsx)(v.a.Label,{column:"sm",md:"auto",children:"Config Name:"}),Object(i.jsx)(O.a,{children:Object(i.jsx)(v.a.Control,{type:"text",size:"sm",value:this.props.cfg.name,onChange:function(t){e.props.update({name:t.target.value})}})})]}),Object(i.jsx)(v.a.Row,{className:"mb-3",children:Object(i.jsxs)(O.a,{children:[Object(i.jsxs)(f.a,{variant:"primary",size:"sm",onClick:this.props.duplicate,children:[Object(i.jsx)(w,{icon_style:"regular",icon:"copy"})," Duplicate Configuration"]}),"\xa0",Object(i.jsxs)(f.a,{variant:"danger",size:"sm",onClick:this.props.delete,children:[Object(i.jsx)(w,{icon_style:"regular",icon:"trash-alt"})," Delete Configuration "]})]})}),Object(i.jsx)(_,{title:"Load",children:Object(i.jsx)(we,{load:this.props.cfg.load,update:function(t){return e.updateAndMerge("load",t)}})}),Object(i.jsx)("br",{}),Object(i.jsx)(_,{title:"Motors",children:Object(i.jsx)(ke,{motor:this.props.cfg.motor,update:function(t){return e.updateAndMerge("motor",t)}})})]})}}]),n}(r.a.Component),Se=n(440),Ae=n(435),Re=function(e){Object(b.a)(n,e);var t=Object(j.a)(n);function n(){return Object(p.a)(this,n),t.apply(this,arguments)}return Object(h.a)(n,[{key:"render",value:function(){var e=this.props,t=e.className,n=e.sm_lab,a=e.sm_unit,s=e.sm_tooltip,o=e.cfg,c=e.tooltip,u=e.onChange;Object(x.a)(e,["className","sm_lab","sm_unit","sm_tooltip","cfg","tooltip","onChange"]);return Object(i.jsxs)(v.a.Row,{className:t,children:[Object(i.jsx)(O.a,{sm:n,children:Object(i.jsx)(v.a.Switch,{id:o.key+"_en",label:o.title,checked:o.enabled,onChange:function(e){return u({enabled:!o.enabled})}})}),Object(i.jsx)(O.a,{sm:a,children:Object(i.jsx)(me,{value:o.unit,onChange:function(e){return u({unit:e})}})}),Object(i.jsx)(O.a,{sm:s,children:c?Object(i.jsx)(D,{tooltip:c}):Object(i.jsx)(r.a.Fragment,{})})]})}}]),n}(r.a.PureComponent);Re.defaultProps={sm_lab:"5",sm_unit:"4",sm_tooltip:"1",cfg:void 0,onChange:void 0,tooltip:void 0};var Ne=Re,Fe=n(86),Me=n.n(Fe),Pe=function(e){Object(b.a)(n,e);var t=Object(j.a)(n);function n(e){var a;return Object(p.a)(this,n),(a=t.call(this,e)).updateGraph=a.updateGraph.bind(Object(d.a)(a)),a}return Object(h.a)(n,[{key:"updateGraph",value:function(e,t){var n=Me.a.findIndex(this.props.cfg.graphs,(function(t){return t.key==e})),a=Object(V.a)(this.props.cfg.graphs);a[n]=Object(l.a)(Object(l.a)({},this.props.cfg.graphs[n]),t),this.props.update({graphs:a})}},{key:"render",value:function(){var e=this;return Object(i.jsxs)(v.a,{children:[Object(i.jsxs)(_,{title:"Simulation Parameters",className:"my-3",children:[Object(i.jsx)(Oe,{className:"mb-3",label:"Simulation Duration",type:"number",min:0,value:this.props.cfg.time,onChange:function(t){e.props.update({time:t})},unit:a.s}),Object(i.jsx)(Oe,{label:"Simulation Timestep",type:"number",min:.001,step:.001,value:this.props.cfg.dt,onChange:function(t){e.props.update({dt:t})},tooltip:"Simulation time interval (dt). The smaller, the finer the detail of the simulation.",unit:a.s})]}),Object(i.jsxs)(_,{title:"Graphing Controls",className:"my-3",children:[Object(i.jsx)(v.a.Row,{className:"mb-3",children:Object(i.jsx)(O.a,{children:Object(i.jsx)(v.a.Switch,{id:"graph-animate-switch",label:"Animate?",checked:this.props.cfg.animate,onChange:function(t){e.props.update({animate:!e.props.cfg.animate})}})})}),this.props.cfg.graphs.map((function(t){return Object(i.jsx)(Ne,{className:"mt-2",cfg:t,onChange:function(n){return e.updateGraph(t.key,n)}},t.key)}))]})]})}}]),n}(r.a.Component),Le=function(e){Object(b.a)(n,e);var t=Object(j.a)(n);function n(e){var a;return Object(p.a)(this,n),(a=t.call(this,e)).state={selected:"sim"},a.setTab=a.setTab.bind(Object(d.a)(a)),a}return Object(h.a)(n,[{key:"setTab",value:function(e){"_ADD"===e?this.props.addConfig():this.setState({selected:e})}},{key:"render",value:function(){var e=this;return Object(i.jsx)("div",{children:Object(i.jsxs)(Se.a,{activeKey:this.state.selected,onSelect:function(t){return e.setTab(t)},children:[Object(i.jsx)(Ae.a,{eventKey:"sim",title:Object(i.jsx)(w,{icon:"cog",nospace:!0}),children:Object(i.jsx)(Pe,{cfg:this.props.sim_config,update:function(t){return e.props.update("sim_config",t)}})},"sim"),Object.values(this.props.configs).map((function(t){return Object(i.jsx)(Ae.a,{eventKey:t.id,title:t.name,children:Object(i.jsx)(_e,{cfg:t,delete:function(){return e.props.deleteConfig(t.id)},duplicate:function(){return e.props.duplicateConfig(t)},update:function(n){return e.props.updateConfig(t.id,n)}})},t.id)})),Object(i.jsx)(Ae.a,{eventKey:"_ADD",title:Object(i.jsx)(w,{icon:"plus",size:"sm"})},"_ADD")]})})}}]),n}(r.a.Component),De=(n(327),function(e){Object(b.a)(n,e);var t=Object(j.a)(n);function n(){return Object(p.a)(this,n),t.apply(this,arguments)}return Object(h.a)(n,[{key:"render",value:function(){return Object(i.jsxs)("div",{children:[Object(i.jsxs)(f.a,{className:"m-1",variant:this.props.auto?"outline-secondary":this.props.loading?"info":"success",onClick:this.props.onRun,disabled:this.props.loading||this.props.auto,children:[Object(i.jsx)(w,{icon:this.props.loading?"cog":"play",spin:this.props.loading}),"Run Simulation"]}),Object(i.jsxs)(f.a,{className:"m-1",onClick:this.props.onAutoToggle,variant:this.props.auto?"warning":"primary",children:[Object(i.jsx)(w,{icon:"sync-alt",spin:this.props.auto}),this.props.auto?"Stop Auto Sim":"Start Auto Sim"]}),Object(i.jsxs)(f.a,{className:"m-1",onClick:this.props.onExport,variant:"info",disabled:this.props.exporting,children:[Object(i.jsx)(w,{icon:this.props.exporting?"cog":"save",spin:this.props.exporting}),"Export CSVs"]})]})}}]),n}(r.a.PureComponent)),Ve=n(171),Ge=function(e){Object(b.a)(n,e);var t=Object(j.a)(n);function n(e){var a;return Object(p.a)(this,n),(a=t.call(this,e)).colours=["#34225c","#71286b","#aa2d6c","#db425f","#fc6749","#ff9729","#ffcb00","#e6ff1c"],a.data=a.data.bind(Object(d.a)(a)),a}return Object(h.a)(n,[{key:"filter",value:function(e,t){if(e.length<t)return e;var n,a=Math.floor(e.length/t),i=[];for(n=0;n<e.length;n+=a)i.push(e[n]);return i}},{key:"maybeScale",value:function(e,t){return t?e.map((function(e){return t.fromBase(e)})):e}},{key:"data",value:function(){var e=this;return{labels:this.maybeScale(this.filter(this.props.x,1e3),this.props.xUnit),datasets:Object.keys(this.props.y).map((function(t){return{label:e.props.configs[t].name,data:e.maybeScale(e.filter(e.props.y[t],1e3),e.props.yUnit),fill:!1,pointRadius:0,borderColor:e.colours[t%e.colours.length]}}))}}},{key:"render",value:function(){var e=this;return Object(i.jsx)(Ve.Line,{data:this.data(),options:{maintainAspectRatio:!1,title:{display:!0,text:this.props.title,fontSize:16},legend:{display:!!this.props.legend},animation:{duration:this.props.animate?500:0},scales:{xAxes:[{display:!0,ticks:{callback:function(e){return parseFloat(e.toFixed(5))},autoskip:!0,maxTicksLimit:10},scaleLabel:{display:void 0!==this.props.xLabel,labelString:void 0!==this.props.xUnit?this.props.xLabel+" ("+this.props.xUnit.name+")":this.props.xLabel}}],yAxes:[{display:!0,label:{callback:function(e){return parseFloat(e.toFixed(3))}},scaleLabel:{display:void 0!==this.props.yLabel,labelString:void 0!==this.props.yUnit?this.props.yLabel+" ("+this.props.yUnit.name+")":this.props.yLabel}}]},tooltips:{callbacks:{title:function(t,n){return e.props.xLabel+": "+parseFloat(parseFloat(t[0].xLabel).toFixed(5))}}}}},this.props.title)}}]),n}(r.a.Component);Ge.defaultProps={xLabel:"Time",animate:!0};var Ee=Ge,ze=function(){return{motor:{key:"CIM",voltage:Q.make(12),num:4,reduction:10.75,gearbox:null,efficiency:90},load:{accel:re.make(0),mass:H.make(70),radius:B.make(3)}}},Ie=n(172),Te=n.n(Ie),Be=n(173),qe=n.n(Be),Ue=function(e){Object(b.a)(n,e);var t=Object(j.a)(n);function n(e){var a;return Object(p.a)(this,n),(a=t.call(this,e)).state={config_counter:1,configs:{},sim_config:{time:K.make(3),dt:J.make(10),animate:!0,graphs:[{key:"displacement",title:"Displacement",unit:z,enabled:!0},{key:"velocity",title:"Velocity",unit:ee,enabled:!0},{key:"acceleration",title:"Acceleration",unit:re,enabled:!0},{key:"current",title:"Current Draw",unit:X,enabled:!0},{key:"speed",title:"Angular Velocity",unit:ce,enabled:!1},{key:"torque",title:"Torque",unit:pe,enabled:!1}]},simulationResults:void 0,simConfigs:void 0,simLoading:!1,simAuto:!1,exportRunning:!1},a.addConfig=a.addConfig.bind(Object(d.a)(a)),a.deleteConfig=a.deleteConfig.bind(Object(d.a)(a)),a.updateConfig=a.updateConfig.bind(Object(d.a)(a)),a.duplicateConfig=a.duplicateConfig.bind(Object(d.a)(a)),a.update=a.update.bind(Object(d.a)(a)),a.runSimulation=a.runSimulation.bind(Object(d.a)(a)),a.triggerAutoSim=a.triggerAutoSim.bind(Object(d.a)(a)),a.toggleAutoSim=a.toggleAutoSim.bind(Object(d.a)(a)),a.exportData=a.exportData.bind(Object(d.a)(a)),a}return Object(h.a)(n,[{key:"componentDidMount",value:function(){var e=this;this.addConfig("KoP Drivetrain",ze(),(function(){e.addConfig("Elevator",{motor:{key:"pro775",voltage:Q.make(12),num:2,reduction:20,gearbox:null,efficiency:90},load:{accel:re.make(-9.81),mass:H.make(10),radius:B.make(2)}},e.runSimulation)}))}},{key:"toggleAutoSim",value:function(){this.state.simAuto?this.setState({simAuto:!1}):this.setState({simAuto:!0},this.triggerAutoSim)}},{key:"triggerAutoSim",value:function(){this.state.simAuto&&this.runSimulation()}},{key:"addConfig",value:function(e,t,n){var a=this.state.config_counter;this.setState({configs:Object(l.a)(Object(l.a)({},this.state.configs),{},Object(u.a)({},a,Object(l.a)(Object(l.a)({},t),{},{id:a,name:e}))),config_counter:this.state.config_counter+1},n||this.triggerAutoSim)}},{key:"deleteConfig",value:function(e){this.setState({configs:Me.a.omit(this.state.configs,e)},this.triggerAutoSim)}},{key:"duplicateConfig",value:function(e,t){this.addConfig(e.name+" (Copy)",e,t)}},{key:"updateConfig",value:function(e,t){this.setState({configs:Object(l.a)(Object(l.a)({},this.state.configs),{},Object(u.a)({},e,Object(l.a)(Object(l.a)({},this.state.configs[e]),t)))},this.triggerAutoSim)}},{key:"update",value:function(e,t){this.setState(Object(u.a)({},e,Object(l.a)(Object(l.a)({},this.state[e]),t)),this.triggerAutoSim)}},{key:"runSimulation",value:function(e){var t=this,n="function"===typeof e?e:void 0;this.setState({simLoading:!0}),new((new Te.a).SimulationAdapter)(this.state.sim_config,this.state.configs).then((function(e){return e.run()})).then((function(e){return t.setState({simulationResults:e.results,simConfigs:e.configs,simLoading:!1},n)}))}},{key:"exportData",value:function(){var e=this;this.setState({exportRunning:!0}),this.runSimulation((function(){new((new qe.a).ExportAdapter)(e.state.simulationResults,e.state.sim_config,e.state.simConfigs).then((function(e){return e.run()})).then((function(t){Object.keys(t).forEach((function(e){var n=document.createElement("a");n.target="_blank",n.download="".concat(e,".csv"),n.href="data:text/csv;charset=utf-8,"+encodeURI(t[e]),n.click(),n.href=""})),e.setState({exportRunning:!1})}))}))}},{key:"render",value:function(){var e=this;return Object(i.jsxs)("div",{className:"mx-5",children:[Object(i.jsx)("center",{children:Object(i.jsxs)("h2",{children:["Jaci's FRC Motor Selection Tool \xa0",Object(i.jsxs)(f.a,{href:"https://github.com/JaciBrunning/frc-motor-modelling",target:"_blank",variant:"outline-dark",children:[Object(i.jsx)(w,{icon_style:"brand",icon:"github"}),"View on Github"]})]})}),Object(i.jsxs)(m.a,{fluid:!0,children:[Object(i.jsx)(g.a,{children:Object(i.jsx)(O.a,{children:Object(i.jsx)("center",{children:Object(i.jsx)(De,{loading:this.state.simLoading,onRun:this.runSimulation,auto:this.state.simAuto,onAutoToggle:this.toggleAutoSim,onExport:this.exportData,exporting:this.state.exportRunning})})})}),Object(i.jsxs)(g.a,{children:[Object(i.jsx)(O.a,{className:"config-col my-3",children:Object(i.jsx)(Le,{configs:this.state.configs,addConfig:function(){e.addConfig("KoP ".concat(e.state.config_counter),ze())},deleteConfig:this.deleteConfig,updateConfig:this.updateConfig,duplicateConfig:this.duplicateConfig,sim_config:this.state.sim_config,update:this.update})}),Object(i.jsx)(O.a,{className:"sim-col my-3",children:Object(i.jsx)(g.a,{children:this.state.simulationResults?this.state.sim_config.graphs.filter((function(e){return e.enabled})).map((function(t,n){return Object(i.jsx)("div",{className:"sim-graph",children:Object(i.jsx)(Ee,{title:t.title,legend:0===n,animate:e.state.sim_config.animate,configs:e.state.simConfigs,x:e.state.simulationResults.time,y:e.state.simulationResults[t.key],xUnit:e.state.sim_config.time.unit,yUnit:t.unit,xLabel:"Time",yLabel:t.title},t.key)})})):Object(i.jsx)("h2",{children:" Run a simulation to get started! "})})})]})]})]})}}]),n}(r.a.Component);c.a.render(Object(i.jsx)(Ue,{}),document.getElementById("root"))}},[[425,1,2]]]);
//# sourceMappingURL=main.fb6d1266.chunk.js.map