(this["webpackJsonpfrc-motor-modelling"]=this["webpackJsonpfrc-motor-modelling"]||[]).push([[0],{163:function(t,e,n){var a,i=n(155).wrap,s=n(414);t.exports=function t(){return this instanceof t?i(s()):a||(a=i(s()))}},164:function(t,e,n){var a,i=n(155).wrap,s=n(415);t.exports=function t(){return this instanceof t?i(s()):a||(a=i(s()))}},318:function(t,e,n){},414:function(t,e,n){t.exports=function(){return new Worker(n.p+"a5b437b2dda1acc78892.worker.js")}},415:function(t,e,n){t.exports=function(){return new Worker(n.p+"3807f31d329517681f79.worker.js")}},416:function(t,e,n){"use strict";n.r(e);var a={};n.r(a),n.d(a,"Measurement",(function(){return T})),n.d(a,"m",(function(){return E})),n.d(a,"mm",(function(){return z})),n.d(a,"cm",(function(){return B})),n.d(a,"inch",(function(){return q})),n.d(a,"ft",(function(){return G})),n.d(a,"field",(function(){return U})),n.d(a,"s",(function(){return K})),n.d(a,"ms",(function(){return J})),n.d(a,"kg",(function(){return W})),n.d(a,"lb",(function(){return H})),n.d(a,"V",(function(){return Q})),n.d(a,"A",(function(){return X})),n.d(a,"mA",(function(){return Y})),n.d(a,"rad",(function(){return Z})),n.d(a,"deg",(function(){return $})),n.d(a,"mps",(function(){return tt})),n.d(a,"mmps",(function(){return et})),n.d(a,"inchps",(function(){return nt})),n.d(a,"ftps",(function(){return at})),n.d(a,"kph",(function(){return it})),n.d(a,"field_per_s",(function(){return st})),n.d(a,"mpsps",(function(){return rt})),n.d(a,"ftpsps",(function(){return ot})),n.d(a,"radps",(function(){return ct})),n.d(a,"degps",(function(){return ut})),n.d(a,"rpm",(function(){return lt})),n.d(a,"Nm",(function(){return pt})),n.d(a,"ftlb",(function(){return ht}));var i=n(1),s=n(0),r=n.n(s),o=n(23),c=n.n(o),u=n(19),l=n(9),p=n(7),h=n(8),d=n(12),b=n(10),j=n(11),f=n(424),m=n(426),g=n(422),O=n(161),v=n(428),x=n(17),y=n(430),k=n(431),C=function(t){Object(b.a)(n,t);var e=Object(j.a)(n);function n(){var t;Object(p.a)(this,n);for(var a=arguments.length,i=new Array(a),s=0;s<a;s++)i[s]=arguments[s];return(t=e.call.apply(e,[this].concat(i))).getClassName=function(){var e=[n.styles[t.props.icon_style],"fa-".concat(t.props.icon),t.props.className];return t.props.size&&e.push("fa-".concat(t.props.size)),t.props.spin&&e.push("fa-spin"),e.join(" ")},t}return Object(h.a)(n,[{key:"render",value:function(){return Object(i.jsxs)(r.a.Fragment,{children:[Object(i.jsx)("i",{className:this.getClassName()})," ",this.props.nospace?"":"\xa0"," "]})}}]),n}(r.a.PureComponent);C.defaultProps={icon_style:"solid"},C.styles={regular:"far",solid:"fas",brand:"fab"};var w=C,_=function(t){Object(b.a)(n,t);var e=Object(j.a)(n);function n(t){var a;return Object(p.a)(this,n),(a=e.call(this,t)).state={selected:"1"},a}return Object(h.a)(n,[{key:"render",value:function(){var t=this,e=this.props,n=e.title,a=e.children,s=Object(x.a)(e,["title","children"]);return Object(i.jsx)(y.a,Object(l.a)(Object(l.a)({defaultActiveKey:"1",onSelect:function(e){return t.setState({selected:e})}},s),{},{children:Object(i.jsxs)(k.a,{children:[Object(i.jsxs)(y.a.Toggle,{as:k.a.Header,eventKey:"1",children:[Object(i.jsx)(w,{size:"lg",icon:"1"===this.state.selected?"caret-up":"caret-down"}),"\xa0",n]}),Object(i.jsx)(y.a.Collapse,{eventKey:"1",children:Object(i.jsx)(k.a.Body,{children:a})})]})}))}}]),n}(r.a.Component),S=function(){function t(e,n,a,i,s,r){Object(p.a)(this,t),this.name=e,this.voltage_nom=n,this.free_speed=a,this.free_current=i,this.stall_torque=s,this.stall_current=r}return Object(h.a)(t,[{key:"mult",value:function(e){return new t(this.name+" (x"+e+")",this.voltage_nom,this.free_speed,e*this.free_current,e*this.stall_torque,e*this.stall_current)}},{key:"reduce",value:function(e){return new t(this.name+" (G="+e+")",this.voltage_nom,this.free_speed/e,this.free_current,this.stall_torque*e,this.stall_current)}},{key:"R",value:function(){return this.voltage_nom/this.stall_current}},{key:"kw",value:function(){return(this.voltage_nom-this.free_current*this.R())/this.free_speed}},{key:"kt",value:function(){return this.stall_current/this.stall_torque}},{key:"calculate",value:function(t,e){var n=(t-this.kw()*e)/this.R();return{current:n,torque:n/this.kt()}}}]),t}(),A=2*Math.PI/60,N={Falcon500:new S("Falcon 500",12,6380*A,1.5,4.69,257),NEO:new S("NEO",12,5880*A,1.3,3.36,166),NEO550:new S("NEO 550",12,11710*A,1.1,1.08,111),CIM:new S("CIM",12,5330*A,2.7,2.41,131),MiniCIM:new S("Mini CIM",12,5840*A,3,1.41,89),BAG:new S("BAG",12,13180*A,1.8,.43,53),pro775:new S("775pro",12,14270*A,3.7,.36,71),redline:new S("AM Redline",12,19500*A,2.6,.64,122)};var R=n(423),M=n(43),F=n(427),L=n(421),P=function(t){Object(b.a)(n,t);var e=Object(j.a)(n);function n(){return Object(p.a)(this,n),e.apply(this,arguments)}return Object(h.a)(n,[{key:"render",value:function(){var t=this.props,e=t.tooltip,n=t.overlay,a=t.placement,s=Object(x.a)(t,["tooltip","overlay","placement"]);return Object(i.jsx)(F.a,Object(l.a)(Object(l.a)({placement:a,overlay:n||Object(i.jsxs)(L.a,{children:[" ",e," "]})},s),{},{children:Object(i.jsx)("span",{children:Object(i.jsx)(w,{icon:"question-circle",size:"sm"})})}))}}]),n}(r.a.PureComponent);P.defaultProps={placement:"top"};var D=P,V=n(30),I=function(){function t(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;if(Object(p.a)(this,t),this.name=e,this.factor_to_base=n,this.base=a,!a&&n-1>.001)throw"ERROR: Unit ".concat(e," has no base unit!");if(a){for(;this.base.base!==this.base;)this.factor_to_base*=this.base.factor_to_base,this.base=this.base.base;this.base.derivatives.push(this)}else this.derivatives=[],this.base=this;t.map[e]=this}return Object(h.a)(t,[{key:"toBase",value:function(t){return t*this.factor_to_base}},{key:"fromBase",value:function(t){return t/this.factor_to_base}},{key:"to",value:function(t,e){if(t.base!==this.base)throw"Cannot convert between units of different bases!";return t.fromBase(this.toBase(e))}},{key:"allVariants",value:function(){return[this.base].concat(Object(V.a)(this.base.derivatives))}}],[{key:"fromObject",value:function(e){return"object"===typeof e&&null!==e?t.map[e.name]:e}}]),t}();I.map={};var T=function(){function t(e,n){if(Object(p.a)(this,t),this.unit=e,this.value=n,void 0===this.unit||void 0===this.value)throw"Measurement params undefined"}return Object(h.a)(t,[{key:"to",value:function(e){return new t(e,this.unit.to(e,this.value))}},{key:"toBase",value:function(){return this.unit.toBase(this.value)}},{key:"with",value:function(e){return new t(this.unit,e(this.value))}}],[{key:"fromObject",value:function(e){return"object"===typeof e&&null!==e?new t(I.fromObject(e.unit),e.value):e}}]),t}();I.prototype.make=function(t){return new T(this,t)};var E=new I("m",1),z=new I("mm",.001,E),B=new I("cm",10,z),q=new I("in",25.4,z),G=new I("ft",12,q),U=new I("FRC Field (54ft)",54,G),K=new I("s",1),J=new I("ms",.001,K),W=new I("kg",1),H=new I("lb",.453592,W),Q=new I("V",1),X=new I("A",1),Y=new I("mA",.001,X),Z=new I("rad",1),$=new I("deg",Math.PI/180,Z),tt=new I("m/s",1),et=new I("mm/s",.001,tt),nt=new I("in/s",25.4,et),at=new I("ft/s",12,nt),it=new I("km/hr",1/3.6,tt),st=new I("FRC Fields / s",54,at),rt=new I("m/s/s",1),ot=new I("ft/s/s",12*25.4/1e3,rt),ct=new I("rad/s",1),ut=new I("deg/s",Math.PI/180,ct),lt=new I("rpm",2*Math.PI/60,ct),pt=new I("Nm",1),ht=new I("ftlb",1.35582,pt),dt=function(t){Object(b.a)(n,t);var e=Object(j.a)(n);function n(){return Object(p.a)(this,n),e.apply(this,arguments)}return Object(h.a)(n,[{key:"render",value:function(){var t=this.props,e=t.children,n=Object(x.a)(t,["children"]);return Object(i.jsxs)("option",Object(l.a)(Object(l.a)({},n),{},{children:[" ",e," "]}))}}]),n}(r.a.PureComponent),bt=function(t){Object(b.a)(n,t);var e=Object(j.a)(n);function n(t){var a;return Object(p.a)(this,n),(a=e.call(this,t)).change=a.change.bind(Object(d.a)(a)),a.findOptionFor=a.findOptionFor.bind(Object(d.a)(a)),a}return Object(h.a)(n,[{key:"change",value:function(t){if(this.props.onChange){var e=t.target.value,n=this.props.children.find((function(t){return t.key===e}));this.props.onChange(n.props.data)}}},{key:"findOptionFor",value:function(t){return this.props.children.find((function(e){return e.props.data===t}))}},{key:"render",value:function(){var t=this.props,e=t.children,n=t.value,a=(t.onChange,Object(x.a)(t,["children","value","onChange"]));return Object(i.jsx)(v.a.Control,Object(l.a)(Object(l.a)({size:"sm",as:"select",value:this.findOptionFor(n).key,onChange:this.change},a),{},{children:e}))}}]),n}(r.a.Component);bt.Option=dt;var jt=bt,ft=function(t){Object(b.a)(n,t);var e=Object(j.a)(n);function n(){return Object(p.a)(this,n),e.apply(this,arguments)}return Object(h.a)(n,[{key:"render",value:function(){var t=this.props,e=t.value,n=t.onChange,a=t.unit,s=Object(x.a)(t,["value","onChange","unit"]);return Object(i.jsx)(jt,Object(l.a)(Object(l.a)({value:e,onChange:n},s),{},{children:(a||e).base.allVariants().map((function(t){return Object(i.jsxs)(jt.Option,{data:t,children:[" ",t.name," "]},t.name)}))}))}}]),n}(r.a.PureComponent);ft.defaultProps={unit:void 0,value:void 0,onChange:void 0};var mt=ft,gt=function(t){Object(b.a)(n,t);var e=Object(j.a)(n);function n(t){var a;return Object(p.a)(this,n),(a=e.call(this,t)).changeValue=a.changeValue.bind(Object(d.a)(a)),a.getValue=a.getValue.bind(Object(d.a)(a)),a}return Object(h.a)(n,[{key:"changeValue",value:function(t){var e=t.target.value,n=this.props.parse(e);this.props.unit?this.props.onChange(new T(this.props.value.unit,n)):this.props.onChange(n)}},{key:"getValue",value:function(){var t=this.props.unit?this.props.value.value:this.props.value;return this.props.parse===parseFloat&&(t=parseFloat(t.toFixed(this.props.round))),t}},{key:"render",value:function(){var t=this.props,e=t.className,n=t.sm_lab,a=t.label,s=t.sm_input,o=t.sm_unit,c=(t.sm_tooltip,t.tooltip),u=t.unit,p=(t.parse,t.value),h=t.onChange,d=Object(x.a)(t,["className","sm_lab","label","sm_input","sm_unit","sm_tooltip","tooltip","unit","parse","value","onChange"]);return Object(i.jsxs)(v.a.Row,{className:e,children:[a?Object(i.jsxs)(v.a.Label,{column:"sm",sm:n,children:[a,":"]}):Object(i.jsx)(r.a.Fragment,{}),Object(i.jsx)(O.a,{sm:s,children:Object(i.jsx)(v.a.Control,Object(l.a)({size:"sm",value:this.getValue(),onChange:this.changeValue},d))}),Object(i.jsx)(O.a,{sm:o,children:Object(i.jsxs)(g.a,{children:[Object(i.jsx)(O.a,{children:u?Object(i.jsx)(mt,{unit:u,value:p.unit,onChange:function(t){return h(p.to(t))}}):Object(i.jsx)(r.a.Fragment,{})}),Object(i.jsx)(O.a,{className:"pl-0",xs:"3",children:c?Object(i.jsx)(D,{tooltip:c}):Object(i.jsx)(r.a.Fragment,{})})]})})]})}}]),n}(r.a.PureComponent);gt.defaultProps={sm_lab:5,sm_input:3,sm_unit:4,unit:void 0,parse:parseFloat,round:3};var Ot=gt,vt=function(t){Object(b.a)(n,t);var e=Object(j.a)(n);function n(t){var a;return Object(p.a)(this,n),(a=e.call(this,t)).getMotor=a.getMotor.bind(Object(d.a)(a)),a}return Object(h.a)(n,[{key:"getMotor",value:function(){return t=this.props.motor,N[t.key].mult(t.num).reduce(t.reduction);var t}},{key:"render",value:function(){var t=this;return Object(i.jsxs)(v.a,{children:[Object(i.jsx)(v.a.Row,{className:"mb-3",children:Object(i.jsx)(O.a,{children:Object(i.jsx)(R.a,{toggle:!0,className:"flex-wrap",children:Object.keys(N).map((function(e){return Object(i.jsx)(f.a,{variant:t.props.motor.key===e?"primary":"outline-secondary",size:"sm",value:e,name:"motor_selection",onClick:function(e){return t.props.update({key:e.currentTarget.value})},children:N[e].name},e)}))})})}),Object(i.jsx)("hr",{}),Object(i.jsx)(Ot,{label:"Applied Voltage",className:"mb-2",type:"number",value:this.props.motor.voltage,onChange:function(e){t.props.update({voltage:e})},min:0,max:14,step:.1,unit:a.V,tooltip:"Desired applied voltage to the motor during the simulation."}),Object(i.jsx)(Ot,{label:"Number of Motors",className:"mb-2",type:"number",value:this.props.motor.num,onChange:function(e){t.props.update({num:e})},min:1,step:1,parse:parseInt}),Object(i.jsx)(Ot,{label:"Gearbox Reduction",className:"mb-2",type:"number",value:this.props.motor.reduction,onChange:function(e){t.props.update({reduction:e})},min:0,step:.1}),Object(i.jsx)("hr",{}),Object(i.jsxs)("div",{className:"text-dark small",children:[Object(i.jsxs)("center",{children:[Object(i.jsx)("i",{children:" Equivalent Motor Coefficients "})," ",Object(i.jsx)(D,{tooltip:"Mathematical coefficients for a single motor model, after merging multiple motors and applying the gearbox reduction."})," "]}),Object(i.jsxs)(v.a.Row,{children:[Object(i.jsx)(O.a,{children:Object(i.jsx)(M.a,{tex:"V = IR + k_\\omega \\omega"})}),Object(i.jsx)(O.a,{children:Object(i.jsx)(M.a,{tex:"I = k_\\tau \\tau"})})]}),Object(i.jsxs)(v.a.Row,{children:[Object(i.jsx)(O.a,{className:"align-self-center",children:Object(i.jsx)(M.a,{tex:"R_{equiv} = "+this.getMotor().R().toFixed(4)+" \\Omega"})}),Object(i.jsx)(O.a,{className:"align-self-center",children:Object(i.jsx)(M.a,{tex:"k_\\omega = "+this.getMotor().kw().toFixed(5)+"\\ \\frac{Vs}{rad}"})}),Object(i.jsx)(O.a,{className:"align-self-center",children:Object(i.jsx)(M.a,{tex:"k_\\tau = "+this.getMotor().kt().toFixed(3)+"\\ \\frac{A}{Nm}"})})]})]})]})}}]),n}(r.a.Component),xt=function(t){Object(b.a)(n,t);var e=Object(j.a)(n);function n(){return Object(p.a)(this,n),e.apply(this,arguments)}return Object(h.a)(n,[{key:"render",value:function(){var t=this;return Object(i.jsxs)(v.a,{children:[Object(i.jsx)(Ot,{label:"Load Mass",type:"number",min:0,value:this.props.load.mass,onChange:function(e){t.props.update({mass:e})},unit:a.kg}),Object(i.jsx)(Ot,{className:"mt-2",label:"Diameter",type:"number",min:0,value:this.props.load.radius.with((function(t){return 2*t})),onChange:function(e){return t.props.update({radius:e.with((function(t){return t/2}))})},unit:a.mm,tooltip:"Diameter of the wheel, pulley, or moment arm that converts angular motion to linear motion (e.g. drivetrain wheels, elevator pulley)."}),Object(i.jsx)(Ot,{className:"mt-2",label:"Accel Offset",type:"number",min:0,value:this.props.load.accel,onChange:function(e){return t.props.update({accel:e})},unit:a.mpsps,tooltip:"Acceleration acting on the load. For a drivetrain, this is likely 0. For an elevator, this is likely -9.81 (gravity, acting down)."})]})}}]),n}(r.a.PureComponent),yt=function(t){Object(b.a)(n,t);var e=Object(j.a)(n);function n(t){var a;return Object(p.a)(this,n),(a=e.call(this,t)).updateAndMerge=a.updateAndMerge.bind(Object(d.a)(a)),a}return Object(h.a)(n,[{key:"updateAndMerge",value:function(t,e){this.props.update(Object(u.a)({},t,Object(l.a)(Object(l.a)({},this.props.cfg[t]),e)))}},{key:"render",value:function(){var t=this;return Object(i.jsxs)("div",{children:[Object(i.jsxs)(v.a.Row,{className:"my-3",children:[Object(i.jsx)(v.a.Label,{column:"sm",md:"auto",children:"Config Name:"}),Object(i.jsx)(O.a,{children:Object(i.jsx)(v.a.Control,{type:"text",size:"sm",value:this.props.cfg.name,onChange:function(e){t.props.update({name:e.target.value})}})})]}),Object(i.jsx)(v.a.Row,{className:"mb-3",children:Object(i.jsxs)(O.a,{children:[Object(i.jsxs)(f.a,{variant:"primary",size:"sm",onClick:this.props.duplicate,children:[Object(i.jsx)(w,{icon_style:"regular",icon:"copy"})," Duplicate Configuration"]}),"\xa0",Object(i.jsxs)(f.a,{variant:"danger",size:"sm",onClick:this.props.delete,children:[Object(i.jsx)(w,{icon_style:"regular",icon:"trash-alt"})," Delete Configuration "]})]})}),Object(i.jsx)(_,{title:"Load",children:Object(i.jsx)(xt,{load:this.props.cfg.load,update:function(e){return t.updateAndMerge("load",e)}})}),Object(i.jsx)("br",{}),Object(i.jsx)(_,{title:"Motor ("+this.props.cfg.motor.num+"x "+N[this.props.cfg.motor.key].name+" < "+this.props.cfg.motor.reduction+")",children:Object(i.jsx)(vt,{motor:this.props.cfg.motor,update:function(e){return t.updateAndMerge("motor",e)}})})]})}}]),n}(r.a.Component),kt=n(429),Ct=n(425),wt=function(t){Object(b.a)(n,t);var e=Object(j.a)(n);function n(){return Object(p.a)(this,n),e.apply(this,arguments)}return Object(h.a)(n,[{key:"render",value:function(){var t=this.props,e=t.className,n=t.sm_lab,a=t.sm_unit,s=t.sm_tooltip,o=t.cfg,c=t.tooltip,u=t.onChange;Object(x.a)(t,["className","sm_lab","sm_unit","sm_tooltip","cfg","tooltip","onChange"]);return Object(i.jsxs)(v.a.Row,{className:e,children:[Object(i.jsx)(O.a,{sm:n,children:Object(i.jsx)(v.a.Switch,{id:o.key+"_en",label:o.title,checked:o.enabled,onChange:function(t){return u({enabled:!o.enabled})}})}),Object(i.jsx)(O.a,{sm:a,children:Object(i.jsx)(mt,{value:o.unit,onChange:function(t){return u({unit:t})}})}),Object(i.jsx)(O.a,{sm:s,children:c?Object(i.jsx)(D,{tooltip:c}):Object(i.jsx)(r.a.Fragment,{})})]})}}]),n}(r.a.PureComponent);wt.defaultProps={sm_lab:"5",sm_unit:"4",sm_tooltip:"1",cfg:void 0,onChange:void 0,tooltip:void 0};var _t=wt,St=n(75),At=n.n(St),Nt=function(t){Object(b.a)(n,t);var e=Object(j.a)(n);function n(t){var a;return Object(p.a)(this,n),(a=e.call(this,t)).updateGraph=a.updateGraph.bind(Object(d.a)(a)),a}return Object(h.a)(n,[{key:"updateGraph",value:function(t,e){var n=At.a.findIndex(this.props.cfg.graphs,(function(e){return e.key==t})),a=Object(V.a)(this.props.cfg.graphs);a[n]=Object(l.a)(Object(l.a)({},this.props.cfg.graphs[n]),e),console.log(t,e,n,a),this.props.update({graphs:a})}},{key:"render",value:function(){var t=this;return Object(i.jsxs)(v.a,{children:[Object(i.jsxs)(_,{title:"Simulation Parameters",className:"my-3",children:[Object(i.jsx)(Ot,{className:"mb-3",label:"Simulation Duration",type:"number",min:0,value:this.props.cfg.time,onChange:function(e){t.props.update({time:e})},unit:a.s}),Object(i.jsx)(Ot,{label:"Simulation Timestep",type:"number",min:.001,step:.001,value:this.props.cfg.dt,onChange:function(e){t.props.update({dt:e})},tooltip:"Simulation time interval (dt). The smaller, the finer the detail of the simulation.",unit:a.s})]}),Object(i.jsxs)(_,{title:"Graphing Controls",className:"my-3",children:[Object(i.jsx)(v.a.Row,{className:"mb-3",children:Object(i.jsx)(O.a,{children:Object(i.jsx)(v.a.Switch,{id:"graph-animate-switch",label:"Animate?",checked:this.props.cfg.animate,onChange:function(e){t.props.update({animate:!t.props.cfg.animate})}})})}),this.props.cfg.graphs.map((function(e){return Object(i.jsx)(_t,{className:"mt-2",cfg:e,onChange:function(n){return t.updateGraph(e.key,n)}},e.key)}))]})]})}}]),n}(r.a.Component),Rt=function(t){Object(b.a)(n,t);var e=Object(j.a)(n);function n(t){var a;return Object(p.a)(this,n),(a=e.call(this,t)).state={selected:"sim"},a.setTab=a.setTab.bind(Object(d.a)(a)),a}return Object(h.a)(n,[{key:"setTab",value:function(t){"_ADD"===t?this.props.addConfig():this.setState({selected:t})}},{key:"render",value:function(){var t=this;return Object(i.jsx)("div",{children:Object(i.jsxs)(kt.a,{activeKey:this.state.selected,onSelect:function(e){return t.setTab(e)},children:[Object(i.jsx)(Ct.a,{eventKey:"sim",title:Object(i.jsx)(w,{icon:"cog",nospace:!0}),children:Object(i.jsx)(Nt,{cfg:this.props.sim_config,update:function(e){return t.props.update("sim_config",e)}})},"sim"),Object.values(this.props.configs).map((function(e){return Object(i.jsx)(Ct.a,{eventKey:e.id,title:e.name,children:Object(i.jsx)(yt,{cfg:e,delete:function(){return t.props.deleteConfig(e.id)},duplicate:function(){return t.props.duplicateConfig(e)},update:function(n){return t.props.updateConfig(e.id,n)}})},e.id)})),Object(i.jsx)(Ct.a,{eventKey:"_ADD",title:Object(i.jsx)(w,{icon:"plus",size:"sm"})},"_ADD")]})})}}]),n}(r.a.Component),Mt=(n(318),function(t){Object(b.a)(n,t);var e=Object(j.a)(n);function n(){return Object(p.a)(this,n),e.apply(this,arguments)}return Object(h.a)(n,[{key:"render",value:function(){return Object(i.jsxs)("div",{children:[Object(i.jsxs)(f.a,{className:"m-1",variant:this.props.auto?"outline-secondary":this.props.loading?"info":"success",onClick:this.props.onRun,disabled:this.props.loading||this.props.auto,children:[Object(i.jsx)(w,{icon:this.props.loading?"cog":"play",spin:this.props.loading}),"Run Simulation"]}),Object(i.jsxs)(f.a,{className:"m-1",onClick:this.props.onAutoToggle,variant:this.props.auto?"warning":"primary",children:[Object(i.jsx)(w,{icon:"sync-alt",spin:this.props.auto}),this.props.auto?"Stop Auto Sim":"Start Auto Sim"]}),Object(i.jsxs)(f.a,{className:"m-1",onClick:this.props.onExport,variant:"info",disabled:this.props.exporting,children:[Object(i.jsx)(w,{icon:this.props.exporting?"cog":"save",spin:this.props.exporting}),"Export CSVs"]})]})}}]),n}(r.a.PureComponent)),Ft=n(162),Lt=function(t){Object(b.a)(n,t);var e=Object(j.a)(n);function n(t){var a;return Object(p.a)(this,n),(a=e.call(this,t)).colours=["#34225c","#71286b","#aa2d6c","#db425f","#fc6749","#ff9729","#ffcb00","#e6ff1c"],a.data=a.data.bind(Object(d.a)(a)),a}return Object(h.a)(n,[{key:"filter",value:function(t,e){if(t.length<e)return t;var n,a=Math.floor(t.length/e),i=[];for(n=0;n<t.length;n+=a)i.push(t[n]);return i}},{key:"maybeScale",value:function(t,e){return e?t.map((function(t){return e.fromBase(t)})):t}},{key:"data",value:function(){var t=this;return{labels:this.maybeScale(this.filter(this.props.x,1e3),this.props.xUnit),datasets:Object.keys(this.props.y).map((function(e){return{label:t.props.configs[e].name,data:t.maybeScale(t.filter(t.props.y[e],1e3),t.props.yUnit),fill:!1,pointRadius:0,borderColor:t.colours[e%t.colours.length]}}))}}},{key:"render",value:function(){var t=this;return Object(i.jsx)(Ft.Line,{data:this.data(),options:{maintainAspectRatio:!1,title:{display:!0,text:this.props.title,fontSize:16},legend:{display:!!this.props.legend},animation:{duration:this.props.animate?500:0},scales:{xAxes:[{display:!0,ticks:{callback:function(t){return parseFloat(t.toFixed(5))},autoskip:!0,maxTicksLimit:10},scaleLabel:{display:void 0!==this.props.xLabel,labelString:void 0!==this.props.xUnit?this.props.xLabel+" ("+this.props.xUnit.name+")":this.props.xLabel}}],yAxes:[{display:!0,label:{callback:function(t){return parseFloat(t.toFixed(3))}},scaleLabel:{display:void 0!==this.props.yLabel,labelString:void 0!==this.props.yUnit?this.props.yLabel+" ("+this.props.yUnit.name+")":this.props.yLabel}}]},tooltips:{callbacks:{title:function(e,n){return t.props.xLabel+": "+parseFloat(parseFloat(e[0].xLabel).toFixed(5))}}}}},this.props.title)}}]),n}(r.a.Component);Lt.defaultProps={xLabel:"Time",animate:!0};var Pt=Lt,Dt=function(){return{motor:{key:"CIM",voltage:Q.make(12),num:4,reduction:10.75},load:{accel:rt.make(0),mass:W.make(70),radius:q.make(3)}}},Vt=n(163),It=n.n(Vt),Tt=n(164),Et=n.n(Tt),zt=function(t){Object(b.a)(n,t);var e=Object(j.a)(n);function n(t){var a;return Object(p.a)(this,n),(a=e.call(this,t)).state={config_counter:1,configs:{},sim_config:{time:K.make(3),dt:J.make(10),animate:!0,graphs:[{key:"displacement",title:"Displacement",unit:E,enabled:!0},{key:"velocity",title:"Velocity",unit:tt,enabled:!0},{key:"acceleration",title:"Acceleration",unit:rt,enabled:!0},{key:"current",title:"Current Draw",unit:X,enabled:!0},{key:"speed",title:"Angular Velocity",unit:ct,enabled:!1},{key:"torque",title:"Torque",unit:pt,enabled:!1}]},simulationResults:void 0,simConfigs:void 0,simLoading:!1,simAuto:!1,exportRunning:!1},a.addConfig=a.addConfig.bind(Object(d.a)(a)),a.deleteConfig=a.deleteConfig.bind(Object(d.a)(a)),a.updateConfig=a.updateConfig.bind(Object(d.a)(a)),a.duplicateConfig=a.duplicateConfig.bind(Object(d.a)(a)),a.update=a.update.bind(Object(d.a)(a)),a.runSimulation=a.runSimulation.bind(Object(d.a)(a)),a.triggerAutoSim=a.triggerAutoSim.bind(Object(d.a)(a)),a.toggleAutoSim=a.toggleAutoSim.bind(Object(d.a)(a)),a.exportData=a.exportData.bind(Object(d.a)(a)),a}return Object(h.a)(n,[{key:"componentDidMount",value:function(){var t=this;this.addConfig("KoP Drivetrain",Dt(),(function(){t.addConfig("Elevator",{motor:{key:"pro775",voltage:Q.make(12),num:2,reduction:20},load:{accel:rt.make(-9.81),mass:W.make(10),radius:q.make(2)}},t.runSimulation)}))}},{key:"toggleAutoSim",value:function(){this.state.simAuto?this.setState({simAuto:!1}):this.setState({simAuto:!0},this.triggerAutoSim)}},{key:"triggerAutoSim",value:function(){this.state.simAuto&&this.runSimulation()}},{key:"addConfig",value:function(t,e,n){var a=this.state.config_counter;this.setState({configs:Object(l.a)(Object(l.a)({},this.state.configs),{},Object(u.a)({},a,Object(l.a)(Object(l.a)({},e),{},{id:a,name:t}))),config_counter:this.state.config_counter+1},n||this.triggerAutoSim)}},{key:"deleteConfig",value:function(t){this.setState({configs:At.a.omit(this.state.configs,t)},this.triggerAutoSim)}},{key:"duplicateConfig",value:function(t,e){this.addConfig(t.name+" (Copy)",t,e)}},{key:"updateConfig",value:function(t,e){this.setState({configs:Object(l.a)(Object(l.a)({},this.state.configs),{},Object(u.a)({},t,Object(l.a)(Object(l.a)({},this.state.configs[t]),e)))},this.triggerAutoSim)}},{key:"update",value:function(t,e){this.setState(Object(u.a)({},t,Object(l.a)(Object(l.a)({},this.state[t]),e)),this.triggerAutoSim)}},{key:"runSimulation",value:function(t){var e=this,n="function"===typeof t?t:void 0;this.setState({simLoading:!0}),new((new It.a).SimulationAdapter)(this.state.sim_config,this.state.configs).then((function(t){return t.run()})).then((function(t){return e.setState({simulationResults:t.results,simConfigs:t.configs,simLoading:!1},n)}))}},{key:"exportData",value:function(){var t=this;this.setState({exportRunning:!0}),this.runSimulation((function(){new((new Et.a).ExportAdapter)(t.state.simulationResults,t.state.sim_config,t.state.simConfigs).then((function(t){return t.run()})).then((function(e){Object.keys(e).forEach((function(t){var n=document.createElement("a");n.target="_blank",n.download="".concat(t,".csv"),n.href="data:text/csv;charset=utf-8,"+encodeURI(e[t]),n.click(),n.href=""})),t.setState({exportRunning:!1})}))}))}},{key:"render",value:function(){var t=this;return Object(i.jsxs)("div",{className:"mx-5",children:[Object(i.jsx)("center",{children:Object(i.jsxs)("h2",{children:["Jaci's FRC Motor Selection Tool \xa0",Object(i.jsxs)(f.a,{href:"https://github.com/JaciBrunning/frc-motor-modelling",target:"_blank",variant:"outline-dark",children:[Object(i.jsx)(w,{icon_style:"brand",icon:"github"}),"View on Github"]})]})}),Object(i.jsxs)(m.a,{fluid:!0,children:[Object(i.jsx)(g.a,{children:Object(i.jsx)(O.a,{children:Object(i.jsx)("center",{children:Object(i.jsx)(Mt,{loading:this.state.simLoading,onRun:this.runSimulation,auto:this.state.simAuto,onAutoToggle:this.toggleAutoSim,onExport:this.exportData,exporting:this.state.exportRunning})})})}),Object(i.jsxs)(g.a,{children:[Object(i.jsx)(O.a,{className:"config-col my-3",children:Object(i.jsx)(Rt,{configs:this.state.configs,addConfig:function(){t.addConfig("KoP ".concat(t.state.config_counter),Dt())},deleteConfig:this.deleteConfig,updateConfig:this.updateConfig,duplicateConfig:this.duplicateConfig,sim_config:this.state.sim_config,update:this.update})}),Object(i.jsx)(O.a,{className:"sim-col my-3",children:Object(i.jsx)(g.a,{children:this.state.simulationResults?this.state.sim_config.graphs.filter((function(t){return t.enabled})).map((function(e,n){return Object(i.jsx)("div",{className:"sim-graph",children:Object(i.jsx)(Pt,{title:e.title,legend:0===n,animate:t.state.sim_config.animate,configs:t.state.simConfigs,x:t.state.simulationResults.time,y:t.state.simulationResults[e.key],xUnit:t.state.sim_config.time.unit,yUnit:e.unit,xLabel:"Time",yLabel:e.title},e.key)})})):Object(i.jsx)("h2",{children:" Run a simulation to get started! "})})})]})]})]})}}]),n}(r.a.Component);c.a.render(Object(i.jsx)(zt,{}),document.getElementById("root"))}},[[416,1,2]]]);
//# sourceMappingURL=main.a33877bd.chunk.js.map