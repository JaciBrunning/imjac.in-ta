{"version":3,"sources":["framework/SimulationAdapter.js","framework/ExportAdapter.js","webpack:///./src/framework/SimulationAdapter.js?bdd1","webpack:///./src/framework/ExportAdapter.js?744a","components/jellybean/FontAwesome.js","components/jellybean/SimpleAccordion.js","framework/Motor.js","components/jellybean/HelpIcon.js","framework/Units.js","components/jellybean/Combo.js","components/jellybean/UnitSelector.js","components/jellybean/UnitInput.js","components/MotorConfig.js","components/LoadConfig.js","components/Configuration.js","components/jellybean/GraphConfig.js","components/SimConfig.js","components/ConfigPanel.js","components/SimControl.js","components/SimulationGraph.js","framework/DefaultConfigs.js","App.js","index.js"],"names":["inst","wrap","Worker","module","exports","f","this","FAIcon","getClassName","cls","styles","props","icon_style","icon","className","size","push","spin","join","Fragment","nospace","React","PureComponent","defaultProps","regular","solid","brand","SimpleAccordion","state","selected","title","children","Accordion","defaultActiveKey","onSelect","e","setState","Card","Toggle","as","Header","eventKey","Collapse","Body","Component","Motor","name","v_nom","free_speed","free_current","stall_torque","stall_current","voltage_nom","n","G","R","voltage","speed","current","kw","torque","kt","rpm_to_rad","Math","PI","Motors","Falcon500","NEO","NEO550","CIM","MiniCIM","BAG","pro775","redline","HelpIcon","tooltip","overlay","placement","OverlayTrigger","Tooltip","Unit","factor_to_base","base","derivatives","map","unit","fromBase","toBase","unit_obj","Measurement","value","undefined","to","measurement_obj","fromObject","prototype","make","m","mm","cm","inch","ft","field","s","ms","kg","lb","V","A","mA","rad","deg","mps","mmps","inchps","ftps","kph","field_per_s","mpsps","ftpsps","radps","degps","rpm","Nm","ftlb","Option","Combo","change","bind","findOptionFor","onChange","val","target","child","find","c","key","data","v","Form","Control","UnitSelector","allVariants","u","UnitInput","changeValue","getValue","parse","Units","parseFloat","toFixed","round","sm_lab","label","sm_input","sm_unit","sm_tooltip","controlProps","Row","Label","column","sm","Col","xs","MotorConfig","getMotor","cfg","motor","mult","num","reduce","reduction","ButtonGroup","toggle","Object","keys","Button","variant","onClick","update","currentTarget","type","min","max","step","parseInt","tex","LoadConfig","load","mass","radius","with","r","d","accel","Configuration","updateAndMerge","md","duplicate","delete","GraphConfig","Switch","id","checked","enabled","SimConfig","updateGraph","changes","idx","_","findIndex","graphs","g","new_graphs","console","log","time","dt","animate","ConfigPanel","setTab","k","addConfig","Tabs","activeKey","Tab","sim_config","newProps","values","configs","deleteConfig","duplicateConfig","updateConfig","SimControl","auto","loading","onRun","disabled","onAutoToggle","onExport","exporting","SimulationGraph","colours","arr","n_max","length","i","stride","floor","out","labels","maybeScale","filter","x","xUnit","datasets","y","yUnit","fill","pointRadius","borderColor","options","maintainAspectRatio","display","text","fontSize","legend","animation","duration","scales","xAxes","ticks","callback","autoskip","maxTicksLimit","scaleLabel","xLabel","labelString","yAxes","yLabel","tooltips","callbacks","KitOfParts","App","config_counter","simulationResults","simConfigs","simLoading","simAuto","exportRunning","runSimulation","triggerAutoSim","toggleAutoSim","exportData","template","omit","actualCallback","SimulationWorker","SimulationAdapter","then","a","run","o","results","ExportWorker","ExportAdapter","forEach","hidden","document","createElement","download","href","encodeURI","click","Container","fluid","ReactDOM","render","getElementById"],"mappings":"qHAAA,IAA6ZA,EAAzZC,EAAO,EAAQ,KAAWA,KAAKC,EAAS,EAAQ,KAA8WC,EAAOC,QAAU,SAASC,IAAK,OAAIC,gBAAgBD,EAAUJ,EAAKC,KAAiBF,IAASA,EAAOC,EAAKC,Q,oBCA1gB,IAAyZF,EAArZC,EAAO,EAAQ,KAAWA,KAAKC,EAAS,EAAQ,KAA0WC,EAAOC,QAAU,SAASC,IAAK,OAAIC,gBAAgBD,EAAUJ,EAAKC,KAAiBF,IAASA,EAAOC,EAAKC,Q,0CCAtgBC,EAAOC,QAAU,WACf,OAAO,IAAIF,OAAO,IAA0B,oC,oBCD9CC,EAAOC,QAAU,WACf,OAAO,IAAIF,OAAO,IAA0B,oC,mxCCCxCK,E,4MAWJC,aAAe,WACb,IAAIC,EAAM,CACRF,EAAOG,OAAO,EAAKC,MAAMC,YADjB,aAEF,EAAKD,MAAME,MACjB,EAAKF,MAAMG,WAIb,OAFI,EAAKH,MAAMI,MAAMN,EAAIO,KAAJ,aAAe,EAAKL,MAAMI,OAC3C,EAAKJ,MAAMM,MAAMR,EAAIO,KAAJ,WACdP,EAAIS,KAAK,M,uDAIhB,OAAO,eAAC,IAAMC,SAAP,WAAgB,mBAAGL,UAAWR,KAAKE,iBAAnC,IAA2DF,KAAKK,MAAMS,QAAU,GAAK,OAArF,W,GAvBUC,IAAMC,eAArBf,EACGgB,aAAe,CACpBX,WAAY,SAFVL,EAKGG,OAAS,CACdc,QAAS,MACTC,MAAO,MACPC,MAAO,OAmBInB,QCAAoB,E,kDAxBb,WAAYhB,GAAQ,IAAD,8BACjB,cAAMA,IACDiB,MAAQ,CAAEC,SAAU,KAFR,E,qDAKT,IAAD,SAC6BvB,KAAKK,MAAnCmB,EADC,EACDA,MAAOC,EADN,EACMA,SAAapB,EADnB,oCAEP,OAAO,cAACqB,EAAA,EAAD,yBAAWC,iBAAiB,IAAIC,SAAW,SAAAC,GAAC,OAAI,EAAKC,SAAS,CAAEP,SAAUM,MAAWxB,GAArF,aACL,eAAC0B,EAAA,EAAD,WACE,eAACL,EAAA,EAAUM,OAAX,CAAkBC,GAAIF,IAAKG,OAAQC,SAAS,IAA5C,UACE,cAAC,EAAD,CAAQ1B,KAAK,KAAKF,KAA+B,MAAxBP,KAAKsB,MAAMC,SAAmB,WAAa,eADtE,OAGIC,KAEJ,cAACE,EAAA,EAAUU,SAAX,CAAoBD,SAAS,IAA7B,SACE,cAACJ,EAAA,EAAKM,KAAN,UACIZ,gB,GAjBgBV,IAAMuB,WCJ9BC,E,WACJ,WAAYC,EAAMC,EAAOC,EAAYC,EAAcC,EAAcC,GAAgB,oBAC/E7C,KAAKwC,KAAOA,EACZxC,KAAK8C,YAAcL,EACnBzC,KAAK0C,WAAaA,EAClB1C,KAAK2C,aAAeA,EACpB3C,KAAK4C,aAAeA,EACpB5C,KAAK6C,cAAgBA,E,iDAGlBE,GACH,OAAO,IAAIR,EAAMvC,KAAKwC,KAAO,MAAQO,EAAI,IAC7B/C,KAAK8C,YAAa9C,KAAK0C,WAAYK,EAAI/C,KAAK2C,aAC5CI,EAAI/C,KAAK4C,aAAcG,EAAI/C,KAAK6C,iB,6BAGvCG,GACL,OAAO,IAAIT,EAAMvC,KAAKwC,KAAO,OAASQ,EAAI,IAC9BhD,KAAK8C,YAAa9C,KAAK0C,WAAaM,EAAGhD,KAAK2C,aAC5C3C,KAAK4C,aAAeI,EAAGhD,KAAK6C,iB,0BAIxC,OAAO7C,KAAK8C,YAAc9C,KAAK6C,gB,2BAI/B,OAAQ7C,KAAK8C,YAAc9C,KAAK2C,aAAe3C,KAAKiD,KAAOjD,KAAK0C,a,2BAIhE,OAAQ1C,KAAK6C,cAAgB7C,KAAK4C,e,gCAG1BM,EAASC,GACjB,IAAIC,GAAWF,EAAUlD,KAAKqD,KAAOF,GAASnD,KAAKiD,IACnD,MAAO,CACLG,QAASA,EACTE,OAAQF,EAAUpD,KAAKuD,U,KAKzBC,EAAc,EAAIC,KAAKC,GAAM,GAEpBC,EAAS,CACpBC,UAAY,IAAIrB,EAAM,aAAc,GAAK,KAAOiB,EAAY,IAAK,KAAM,KACvEK,IAAY,IAAItB,EAAM,MAAc,GAAK,KAAOiB,EAAY,IAAK,KAAM,KACvEM,OAAY,IAAIvB,EAAM,UAAc,GAAI,MAAQiB,EAAY,IAAK,KAAM,KACvEO,IAAY,IAAIxB,EAAM,MAAc,GAAK,KAAOiB,EAAY,IAAK,KAAM,KACvEQ,QAAY,IAAIzB,EAAM,WAAc,GAAK,KAAOiB,EAAY,EAAK,KAAO,IACxES,IAAY,IAAI1B,EAAM,MAAc,GAAI,MAAQiB,EAAY,IAAK,IAAO,IACxEU,OAAY,IAAI3B,EAAM,SAAc,GAAI,MAAQiB,EAAY,IAAK,IAAM,IACvEW,QAAY,IAAI5B,EAAM,aAAc,GAAI,MAAQiB,EAAY,IAAK,IAAM,MAO1DjB,I,mCCxDT6B,E,uKAKM,IAAD,EACyCpE,KAAKK,MAA/CgE,EADC,EACDA,QAASC,EADR,EACQA,QAASC,EADjB,EACiBA,UAAclE,EAD/B,iDAEP,OAAO,cAACmE,EAAA,EAAD,yBAAgBD,UAAWA,EAAWD,QAAUA,GAAW,eAACG,EAAA,EAAD,eAAYJ,EAAZ,QAAuChE,GAAlG,aACL,+BAAM,cAAC,EAAD,CAAQE,KAAK,kBAAkBE,KAAK,gB,GARzBM,IAAMC,eAAvBoD,EACGnD,aAAe,CACpBsD,UAAW,OAWAH,Q,QCjBTM,E,WAGJ,WAAYlC,GAAoC,IAA9BmC,EAA6B,uDAAd,EAAGC,EAAW,uDAAN,KAKvC,GAL6C,oBAC7C5E,KAAKwC,KAAOA,EACZxC,KAAK2E,eAAiBA,EACtB3E,KAAK4E,KAAOA,GAEPA,GAASD,EAAiB,EAAK,KAClC,KAAK,eAAL,OAAqBnC,EAArB,sBAEF,GAAKoC,EAGE,CACL,KAAO5E,KAAK4E,KAAKA,OAAS5E,KAAK4E,MAC7B5E,KAAK2E,gBAAkB3E,KAAK4E,KAAKD,eACjC3E,KAAK4E,KAAO5E,KAAK4E,KAAKA,KAExB5E,KAAK4E,KAAKC,YAAYnE,KAAKV,WAP3BA,KAAK6E,YAAc,GACnB7E,KAAK4E,KAAO5E,KAQd0E,EAAKI,IAAItC,GAAQxC,K,mDAGZ+C,GACL,OAAOA,EAAI/C,KAAK2E,iB,+BAGT5B,GACP,OAAOA,EAAI/C,KAAK2E,iB,yBAGfI,EAAMhC,GACP,GAAIgC,EAAKH,OAAS5E,KAAK4E,KACrB,KAAM,mDACR,OAAOG,EAAKC,SAAShF,KAAKiF,OAAOlC,M,oCAIjC,MAAM,CAAG/C,KAAK4E,MAAd,mBAAuB5E,KAAK4E,KAAKC,iB,kCAGjBK,GAChB,MAAwB,kBAAbA,GAAsC,OAAbA,EAC3BR,EAAKI,IAAII,EAAS1C,MACpB0C,M,KA7CLR,EACGI,IAAM,GAgDR,IAAMK,EAAb,WACE,WAAYJ,EAAMK,GAGhB,GAHwB,oBACxBpF,KAAK+E,KAAOA,EACZ/E,KAAKoF,MAAQA,OACKC,IAAdrF,KAAK+E,WAAqCM,IAAfrF,KAAKoF,MAClC,KAAM,+BALZ,+CAQKL,GACD,OAAO,IAAII,EAAYJ,EAAM/E,KAAK+E,KAAKO,GAAGP,EAAM/E,KAAKoF,UATzD,+BAaI,OAAOpF,KAAK+E,KAAKE,OAAOjF,KAAKoF,SAbjC,2BAgBOrF,GACH,OAAO,IAAIoF,EAAYnF,KAAK+E,KAAMhF,EAAEC,KAAKoF,WAjB7C,kCAoBoBG,GAChB,MAA+B,kBAApBA,GAAoD,OAApBA,EAClC,IAAIJ,EAAYT,EAAKc,WAAWD,EAAgBR,MAAOQ,EAAgBH,OACzEG,MAvBX,KA2BAb,EAAKe,UAAUC,KAAO,SAAS3C,GAC7B,OAAO,IAAIoC,EAAYnF,KAAM+C,IAIxB,IAAM4C,EAAO,IAAIjB,EAAK,IAAK,GACrBkB,EAAO,IAAIlB,EAAK,KAAM,KAAUiB,GAChCE,EAAO,IAAInB,EAAK,KAAM,GAAIkB,GAC1BE,EAAO,IAAIpB,EAAK,KAAM,KAAMkB,GAC5BG,EAAO,IAAIrB,EAAK,KAAM,GAAIoB,GAC1BE,EAAQ,IAAItB,EAAK,mBAAoB,GAAIqB,GAGzCE,EAAK,IAAIvB,EAAK,IAAK,GACnBwB,EAAK,IAAIxB,EAAK,KAAM,KAAUuB,GAG9BE,EAAK,IAAIzB,EAAK,KAAM,GACpB0B,EAAK,IAAI1B,EAAK,KAAM,QAAUyB,GAG9BE,EAAI,IAAI3B,EAAK,IAAK,GAGlB4B,EAAI,IAAI5B,EAAK,IAAK,GAClB6B,EAAK,IAAI7B,EAAK,KAAM,KAAU4B,GAG9BE,EAAM,IAAI9B,EAAK,MAAO,GACtB+B,EAAM,IAAI/B,EAAK,MAAOjB,KAAKC,GAAK,IAAK8C,GAGrCE,GAAM,IAAIhC,EAAK,MAAO,GACtBiC,GAAO,IAAIjC,EAAK,OAAQ,KAAUgC,IAClCE,GAAS,IAAIlC,EAAK,OAAQ,KAAMiC,IAChCE,GAAO,IAAInC,EAAK,OAAQ,GAAIkC,IAC5BE,GAAM,IAAIpC,EAAK,QAAS,EAAI,IAAKgC,IACjCK,GAAc,IAAIrC,EAAK,iBAAkB,GAAImC,IAG7CG,GAAQ,IAAItC,EAAK,QAAS,GAC1BuC,GAAS,IAAIvC,EAAK,SAAU,GAAK,KAAO,IAAMsC,IAG9CE,GAAQ,IAAIxC,EAAK,QAAS,GAC1ByC,GAAQ,IAAIzC,EAAK,QAASjB,KAAKC,GAAK,IAAKwD,IACzCE,GAAQ,IAAI1C,EAAK,MAAO,EAAIjB,KAAKC,GAAK,GAAIwD,IAG1CG,GAAK,IAAI3C,EAAK,KAAM,GACpB4C,GAAO,IAAI5C,EAAK,OAAQ,QAAS2C,IC3HxCE,G,uKACM,IAAD,EACoBvH,KAAKK,MAA3BoB,EADE,EACFA,SAAapB,EADX,4BAEP,OAAO,mDAAYA,GAAZ,kBAAsBoB,EAAtB,Y,GAHUV,IAAMC,eAOrBwG,G,kDAGJ,WAAYnH,GAAQ,IAAD,8BACjB,cAAMA,IACDoH,OAAS,EAAKA,OAAOC,KAAZ,gBACd,EAAKC,cAAgB,EAAKA,cAAcD,KAAnB,gBAHJ,E,mDAMZ7F,GACL,GAAI7B,KAAKK,MAAMuH,SAAU,CACvB,IAAIC,EAAMhG,EAAEiG,OAAO1C,MACf2C,EAAQ/H,KAAKK,MAAMoB,SAASuG,MAAK,SAAAC,GAAC,OAAIA,EAAEC,MAAQL,KACpD7H,KAAKK,MAAMuH,SAASG,EAAM1H,MAAM8H,S,oCAItBC,GACZ,OAAOpI,KAAKK,MAAMoB,SAASuG,MAAK,SAAAC,GAAC,OAAIA,EAAE5H,MAAM8H,OAASC,O,+BAG9C,IAAD,EACuCpI,KAAKK,MAA7CoB,EADC,EACDA,SAAU2D,EADT,EACSA,MAAoB/E,GAD7B,EACgBuH,SADhB,gDAEP,OAAO,cAACS,EAAA,EAAKC,QAAN,yBAAc7H,KAAK,KAAKwB,GAAG,SAASmD,MAAQpF,KAAK2H,cAAcvC,GAAO8C,IAAMN,SAAW5H,KAAKyH,QAAapH,GAAzG,aAEHoB,S,GAzBYV,IAAMuB,WAApBkF,GACGD,OAASA,GA8BHC,UCtCTe,G,uKAOM,IAAD,EACmCvI,KAAKK,MAAzC+E,EADC,EACDA,MAAOwC,EADN,EACMA,SAAU7C,EADhB,EACgBA,KAAS1E,EADzB,2CAEP,OAAO,cAAC,GAAD,yBAAO+E,MAAQA,EAAQwC,SAAWA,GAAevH,GAAjD,cAEF0E,GAAQK,GAAOR,KAAK4D,cAAc1D,KAAI,SAAA2D,GAAC,OAAI,eAAC,GAAMlB,OAAP,CAA2BY,KAAMM,EAAjC,cAAuCA,EAAEjG,KAAzC,MAAmBiG,EAAEjG,gB,GAX9CzB,IAAMC,eAA3BuH,GACGtH,aAAe,CACpB8D,UAAMM,EACND,WAAOC,EACPuC,cAAUvC,GAaCkD,UCdTG,G,kDAUJ,WAAYrI,GAAQ,IAAD,8BACjB,cAAMA,IACDsI,YAAc,EAAKA,YAAYjB,KAAjB,gBACnB,EAAKkB,SAAW,EAAKA,SAASlB,KAAd,gBAHC,E,wDAMP7F,GACV,IAAIgG,EAAMhG,EAAEiG,OAAO1C,MACfrC,EAAI/C,KAAKK,MAAMwI,MAAMhB,GAErB7H,KAAKK,MAAM0E,KACb/E,KAAKK,MAAMuH,SAAS,IAAIkB,EAAkB9I,KAAKK,MAAM+E,MAAML,KAAMhC,IAEjE/C,KAAKK,MAAMuH,SAAS7E,K,iCAKtB,IAAI8E,EAAM7H,KAAKK,MAAM0E,KAAO/E,KAAKK,MAAM+E,MAAMA,MAAQpF,KAAKK,MAAM+E,MAGhE,OAFIpF,KAAKK,MAAMwI,QAAUE,aACvBlB,EAAMkB,WAAWlB,EAAImB,QAAQhJ,KAAKK,MAAM4I,SACnCpB,I,+BAGC,IAAD,EACmH7H,KAAKK,MAAzHG,EADC,EACDA,UAAW0I,EADV,EACUA,OAAQC,EADlB,EACkBA,MAAOC,EADzB,EACyBA,SAAUC,EADnC,EACmCA,QAAqBhF,GADxD,EAC4CiF,WAD5C,EACwDjF,SAASU,EADjE,EACiEA,KAAaK,GAD9E,EACuEyD,MADvE,EAC8EzD,OAAOwC,EADrF,EACqFA,SAAa2B,EADlG,4HAEP,OAAO,eAAClB,EAAA,EAAKmB,IAAN,CAAUhJ,UAAWA,EAArB,UAEH2I,EACE,eAACd,EAAA,EAAKoB,MAAN,CAAYC,OAAO,KAAKC,GAAKT,EAA7B,UACIC,EADJ,OAEgB,cAAC,IAAMtI,SAAP,IAEpB,cAAC+I,EAAA,EAAD,CAAKD,GAAKP,EAAV,SACE,cAACf,EAAA,EAAKC,QAAN,aAAc7H,KAAK,KAAK2E,MAAQpF,KAAK4I,WAAahB,SAAW5H,KAAK2I,aAAkBY,MAEtF,cAACK,EAAA,EAAD,CAAKD,GAAIN,EAAT,SACE,eAACG,EAAA,EAAD,WACE,cAACI,EAAA,EAAD,UAEI7E,EACE,cAAC,GAAD,CAAcA,KAAOA,EAAOK,MAAQA,EAAML,KAAO6C,SAAW,SAAAa,GAAC,OAAIb,EAASxC,EAAME,GAAGmD,OACjF,cAAC,IAAM5H,SAAP,MAGR,cAAC+I,EAAA,EAAD,CAAKpJ,UAAU,OAAOqJ,GAAG,IAAzB,SAEIxF,EACE,cAAC,EAAD,CAAUA,QAAUA,IAAe,cAAC,IAAMxD,SAAP,kB,GA1D3BE,IAAMC,eAAxB0H,GACGzH,aAAe,CACpBiI,OAAQ,EACRE,SAAU,EACVC,QAAS,EACTtE,UAAMM,EACNwD,MAAOE,WACPE,MAAO,GA6DIP,UCwBAoB,G,kDA1Fb,WAAYzJ,GAAQ,IAAD,8BACjB,cAAMA,IACD0J,SAAW,EAAKA,SAASrC,KAAd,gBAFC,E,uDAMjB,ON0C4BsC,EM1CLhK,KAAKK,MAAM4J,MN2C7BtG,EAAOqG,EAAI9B,KAAKgC,KAAKF,EAAIG,KAAKC,OAAOJ,EAAIK,WAD3C,IAAyBL,I,+BMvCpB,IAAD,OACP,OAAO,eAAC3B,EAAA,EAAD,WACL,cAACA,EAAA,EAAKmB,IAAN,CAAUhJ,UAAU,OAApB,SACE,cAACoJ,EAAA,EAAD,UACE,cAACU,EAAA,EAAD,CAAaC,QAAM,EAAC/J,UAAU,YAA9B,SAEIgK,OAAOC,KAAK9G,GAAQmB,KAAI,SAAAoD,GAAG,OACzB,cAACwC,EAAA,EAAD,CAEEC,QAAU,EAAKtK,MAAM4J,MAAM/B,MAAQA,EAAM,UAAY,oBACrDzH,KAAK,KACL2E,MAAO8C,EACP1F,KAAK,kBACLoI,QAAU,SAAC/I,GAAD,OAAO,EAAKxB,MAAMwK,OAAO,CAAE3C,IAAKrG,EAAEiJ,cAAc1F,SAN5D,SAOIzB,EAAOuE,GAAK1F,MANT0F,YAajB,uBAEA,cAAC,GAAD,CACEiB,MAAM,kBACN3I,UAAU,OACVuK,KAAK,SACL3F,MAAQpF,KAAKK,MAAM4J,MAAM/G,QACzB0E,SAAW,SAAAQ,GAAO,EAAK/H,MAAMwK,OAAO,CAAE3H,QAASkF,KAC/C4C,IAAK,EACLC,IAAK,GACLC,KAAM,GACNnG,KAAM+D,EAAMzC,EACZhC,QAAQ,gEAEV,cAAC,GAAD,CACE8E,MAAM,mBACN3I,UAAU,OACVuK,KAAK,SACL3F,MAAQpF,KAAKK,MAAM4J,MAAME,IACzBvC,SAAW,SAAAQ,GAAO,EAAK/H,MAAMwK,OAAO,CAAEV,IAAK/B,KAC3C4C,IAAK,EACLE,KAAM,EACNrC,MAAOsC,WAET,cAAC,GAAD,CACEhC,MAAM,oBACN3I,UAAU,OACVuK,KAAK,SACL3F,MAAQpF,KAAKK,MAAM4J,MAAMI,UACzBzC,SAAW,SAAAQ,GAAO,EAAK/H,MAAMwK,OAAO,CAAER,UAAWjC,KACjD4C,IAAK,EACLE,KAAM,KAER,uBACA,sBAAK1K,UAAU,kBAAf,UACE,mCAAQ,gEAAR,IAA+C,cAAC,EAAD,CAAU6D,QAAQ,0HAAjE,OACA,eAACgE,EAAA,EAAKmB,IAAN,WACE,cAACI,EAAA,EAAD,UACE,cAAC,IAAD,CAAewB,IAAM,iCAEvB,cAACxB,EAAA,EAAD,UACE,cAAC,IAAD,CAAewB,IAAM,2BAGzB,eAAC/C,EAAA,EAAKmB,IAAN,WACE,cAACI,EAAA,EAAD,CAAKpJ,UAAU,oBAAf,SACE,cAAC,IAAD,CAAe4K,IAAM,eAAiBpL,KAAK+J,WAAW9G,IAAI+F,QAAQ,GAAK,eAEzE,cAACY,EAAA,EAAD,CAAKpJ,UAAU,oBAAf,SACE,cAAC,IAAD,CAAe4K,IAAM,eAAiBpL,KAAK+J,WAAW1G,KAAK2F,QAAQ,GAAK,yBAE1E,cAACY,EAAA,EAAD,CAAKpJ,UAAU,oBAAf,SACE,cAAC,IAAD,CAAe4K,IAAM,aAAepL,KAAK+J,WAAWxG,KAAKyF,QAAQ,GAAK,oC,GAnFxDjI,IAAMuB,WC+BjB+I,G,uKAjCH,IAAD,OACP,OAAO,eAAChD,EAAA,EAAD,WACL,cAAC,GAAD,CACEc,MAAM,YACN4B,KAAK,SACLC,IAAK,EACL5F,MAAOpF,KAAKK,MAAMiL,KAAKC,KACvB3D,SAAW,SAAAQ,GAAO,EAAK/H,MAAMwK,OAAO,CAAEU,KAAMnD,KAC5CrD,KAAM+D,EAAM3C,KAEd,cAAC,GAAD,CACE3F,UAAU,OACV2I,MAAM,WACN4B,KAAK,SACLC,IAAK,EACL5F,MAAOpF,KAAKK,MAAMiL,KAAKE,OAAOC,MAAK,SAAAC,GAAC,OAAQ,EAAJA,KACxC9D,SAAW,SAAAQ,GAAC,OAAI,EAAK/H,MAAMwK,OAAO,CAAEW,OAAQpD,EAAEqD,MAAK,SAAAE,GAAC,OAAIA,EAAI,QAC5D5G,KAAM+D,EAAMlD,GACZvB,QAAQ,0IAEV,cAAC,GAAD,CACE7D,UAAU,OACV2I,MAAM,eACN4B,KAAK,SACL3F,MAAOpF,KAAKK,MAAMiL,KAAKM,MACvBhE,SAAW,SAAAQ,GAAC,OAAI,EAAK/H,MAAMwK,OAAO,CAAEe,MAAOxD,KAC3CrD,KAAM+D,EAAM9B,MACZ3C,QAAQ,8I,GA5BStD,IAAMC,eCiEhB6K,G,kDA5Db,WAAYxL,GAAQ,IAAD,8BACjB,cAAMA,IACDyL,eAAiB,EAAKA,eAAepE,KAApB,gBAFL,E,2DAKJQ,EAAK9C,GAClBpF,KAAKK,MAAMwK,OAAX,eAAqB3C,EAArB,2BACKlI,KAAKK,MAAM2J,IAAI9B,IACf9C,O,+BAIG,IAAD,OACP,OAAO,gCACL,eAACiD,EAAA,EAAKmB,IAAN,CAAUhJ,UAAU,OAApB,UACE,cAAC6H,EAAA,EAAKoB,MAAN,CAAYC,OAAO,KAAKqC,GAAG,OAA3B,0BAGA,cAACnC,EAAA,EAAD,UACE,cAACvB,EAAA,EAAKC,QAAN,CACEyC,KAAK,OAAOtK,KAAK,KACjB2E,MAAQpF,KAAKK,MAAM2J,IAAIxH,KACvBoF,SAAW,SAAA/F,GAAO,EAAKxB,MAAMwK,OAAO,CAAErI,KAAMX,EAAEiG,OAAO1C,gBAG3D,cAACiD,EAAA,EAAKmB,IAAN,CAAUhJ,UAAU,OAApB,SACE,eAACoJ,EAAA,EAAD,WACE,eAACc,EAAA,EAAD,CACEC,QAAQ,UAAUlK,KAAK,KACvBmK,QAAU5K,KAAKK,MAAM2L,UAFvB,UAGE,cAAC,EAAD,CAAQ1L,WAAW,UAAUC,KAAK,SAHpC,8BADF,OAOE,eAACmK,EAAA,EAAD,CACEC,QAAQ,SAASlK,KAAK,KACtBmK,QAAU5K,KAAKK,MAAM4L,OAFvB,UAGE,cAAC,EAAD,CAAQ3L,WAAW,UAAUC,KAAK,cAHpC,iCAOJ,cAAC,EAAD,CAAiBiB,MAAM,OAAvB,SACE,cAAC,GAAD,CACE8J,KAAOtL,KAAKK,MAAM2J,IAAIsB,KACtBT,OAAS,SAAAa,GAAC,OAAI,EAAKI,eAAe,OAAQJ,QAE9C,uBACA,cAAC,EAAD,CAAiBlK,MACf,UACExB,KAAKK,MAAM2J,IAAIC,MAAME,IAAM,KAC3BxG,EAAO3D,KAAKK,MAAM2J,IAAIC,MAAM/B,KAAK1F,KACjC,MAAQxC,KAAKK,MAAM2J,IAAIC,MAAMI,UAAY,IAJ7C,SAKE,cAAC,GAAD,CACEJ,MAAQjK,KAAKK,MAAM2J,IAAIC,MACvBY,OAAS,SAAAlF,GAAC,OAAI,EAAKmG,eAAe,QAASnG,e,GAtDzB5E,IAAMuB,W,oBCJ5B4J,G,uKAUM,IAAD,EAC4ElM,KAAKK,MAAlFG,EADC,EACDA,UAAW0I,EADV,EACUA,OAAQG,EADlB,EACkBA,QAASC,EAD3B,EAC2BA,WAAYU,EADvC,EACuCA,IAAK3F,EAD5C,EAC4CA,QAASuD,EADrD,EACqDA,SADrD,wFAEP,OAAO,eAACS,EAAA,EAAKmB,IAAN,CAAUhJ,UAAWA,EAArB,UACL,cAACoJ,EAAA,EAAD,CAAKD,GAAKT,EAAV,SACE,cAACb,EAAA,EAAK8D,OAAN,CACEC,GAAKpC,EAAI9B,IAAM,MACfiB,MAAQa,EAAIxI,MACZ6K,QAAUrC,EAAIsC,QACd1E,SAAW,SAAA/F,GAAC,OAAI+F,EAAS,CAAE0E,SAAUtC,EAAIsC,eAE7C,cAAC1C,EAAA,EAAD,CAAKD,GAAKN,EAAV,SACE,cAAC,GAAD,CAAcjE,MAAQ4E,EAAIjF,KAAO6C,SAAW,SAAAa,GAAC,OAAIb,EAAS,CAAE7C,KAAM0D,SAEpE,cAACmB,EAAA,EAAD,CAAKD,GAAKL,EAAV,SAEIjF,EACE,cAAC,EAAD,CAAUA,QAAUA,IAAe,cAAC,IAAMxD,SAAP,a,GA1BrBE,IAAMC,eAA1BkL,GACGjL,aAAe,CACpBiI,OAAQ,IACRG,QAAS,IACTC,WAAY,IACZU,SAAK3E,EACLuC,cAAUvC,EACVhB,aAASgB,GA0BE6G,U,oBC0BAK,G,kDAxDb,WAAYlM,GAAQ,IAAD,8BACjB,cAAMA,IACDmM,YAAc,EAAKA,YAAY9E,KAAjB,gBAFF,E,wDAKPQ,EAAKuE,GACf,IAAIC,EAAMC,KAAEC,UAAU5M,KAAKK,MAAM2J,IAAI6C,QAAQ,SAAAC,GAAC,OAAIA,EAAE5E,KAAOA,KACvD6E,EAAU,YAAO/M,KAAKK,MAAM2J,IAAI6C,QACpCE,EAAWL,GAAX,2BAAuB1M,KAAKK,MAAM2J,IAAI6C,OAAOH,IAASD,GACtDO,QAAQC,IAAI/E,EAAKuE,EAASC,EAAKK,GAC/B/M,KAAKK,MAAMwK,OAAO,CAAEgC,OAAQE,M,+BAGpB,IAAD,OACP,OAAO,eAAC1E,EAAA,EAAD,WACL,eAAC,EAAD,CAAiB7G,MAAM,wBAAwBhB,UAAU,OAAzD,UACE,cAAC,GAAD,CACEA,UAAU,OACV2I,MAAM,sBACN4B,KAAK,SACLC,IAAK,EACL5F,MAAQpF,KAAKK,MAAM2J,IAAIkD,KACvBtF,SAAW,SAAAQ,GAAO,EAAK/H,MAAMwK,OAAO,CAAEqC,KAAM9E,KAC5CrD,KAAM+D,EAAM7C,IAEd,cAAC,GAAD,CACEkD,MAAM,sBACN4B,KAAK,SACLC,IAAK,KACLE,KAAM,KACN9F,MAAQpF,KAAKK,MAAM2J,IAAImD,GACvBvF,SAAW,SAAAQ,GAAO,EAAK/H,MAAMwK,OAAO,CAAEsC,GAAI/E,KAC1C/D,QAAQ,sFACRU,KAAM+D,EAAM7C,OAGhB,eAAC,EAAD,CAAiBzE,MAAM,oBAAoBhB,UAAU,OAArD,UACE,cAAC6H,EAAA,EAAKmB,IAAN,CAAUhJ,UAAU,OAApB,SACE,cAACoJ,EAAA,EAAD,UACE,cAACvB,EAAA,EAAK8D,OAAN,CACEC,GAAG,uBACHjD,MAAM,WACNkD,QAAUrM,KAAKK,MAAM2J,IAAIoD,QACzBxF,SAAW,SAAA/F,GAAO,EAAKxB,MAAMwK,OAAO,CAAEuC,SAAU,EAAK/M,MAAM2J,IAAIoD,iBAInEpN,KAAKK,MAAM2J,IAAI6C,OAAO/H,KAAI,SAAAgI,GAAC,OACzB,cAAC,GAAD,CAAyBtM,UAAY,OAASwJ,IAAK8C,EAAGlF,SAAW,SAAAQ,GAAC,OAAI,EAAKoE,YAAYM,EAAE5E,IAAKE,KAA5E0E,EAAE5E,kB,GAjDRnH,IAAMuB,WCqCf+K,G,kDArCb,WAAYhN,GAAQ,IAAD,8BACjB,cAAMA,IACDiB,MAAQ,CAAEC,SAAU,OACzB,EAAK+L,OAAS,EAAKA,OAAO5F,KAAZ,gBAHG,E,mDAMZ6F,GACK,SAANA,EACFvN,KAAKK,MAAMmN,YAEXxN,KAAK8B,SAAS,CAAEP,SAAUgM,M,+BAGpB,IAAD,OACP,OAAO,8BACL,eAACE,GAAA,EAAD,CAAMC,UAAY1N,KAAKsB,MAAMC,SAAUK,SAAU,SAAA2L,GAAC,OAAI,EAAKD,OAAOC,IAAlE,UACE,cAACI,GAAA,EAAD,CAAexL,SAAS,MAAMX,MAAQ,cAAC,EAAD,CAAQjB,KAAK,MAAMO,SAAO,IAAhE,SACE,cAAC,GAAD,CACEkJ,IAAKhK,KAAKK,MAAMuN,WAChB/C,OAAS,SAACgD,GAAD,OAAc,EAAKxN,MAAMwK,OAAO,aAAcgD,OAHlD,OAKPrD,OAAOsD,OAAO9N,KAAKK,MAAM0N,SAASjJ,KAAI,SAAAmD,GAAC,OACvC,cAAC0F,GAAA,EAAD,CAAgBxL,SAAU8F,EAAEmE,GAAI5K,MAAOyG,EAAEzF,KAAzC,SACE,cAAC,GAAD,CACEwH,IAAK/B,EACLgE,OAAS,kBAAM,EAAK5L,MAAM2N,aAAa/F,EAAEmE,KACzCJ,UAAY,kBAAM,EAAK3L,MAAM4N,gBAAgBhG,IAC7C4C,OAAS,SAACgD,GAAD,OAAc,EAAKxN,MAAM6N,aAAajG,EAAEmE,GAAIyB,OAL/C5F,EAAEmE,OAOd,cAACuB,GAAA,EAAD,CAAgBxL,SAAS,OAAOX,MAC9B,cAAC,EAAD,CAAQjB,KAAK,OAAOE,KAAK,QADlB,iB,GA9BSM,IAAMuB,WCuCjB6L,I,8KAtCX,OAAO,gCACL,eAACzD,EAAA,EAAD,CACElK,UAAU,MACVmK,QAAU3K,KAAKK,MAAM+N,KAAO,oBAAuBpO,KAAKK,MAAMgO,QAAU,OAAS,UACjFzD,QAAU5K,KAAKK,MAAMiO,MACrBC,SAAWvO,KAAKK,MAAMgO,SAAWrO,KAAKK,MAAM+N,KAJ9C,UAKE,cAAC,EAAD,CACE7N,KAAOP,KAAKK,MAAMgO,QAAU,MAAQ,OACpC1N,KAAOX,KAAKK,MAAMgO,UAPtB,oBAWA,eAAC3D,EAAA,EAAD,CACElK,UAAU,MACVoK,QAAU5K,KAAKK,MAAMmO,aACrB7D,QAAU3K,KAAKK,MAAM+N,KAAO,UAAY,UAH1C,UAIE,cAAC,EAAD,CACE7N,KAAK,WACLI,KAAOX,KAAKK,MAAM+N,OAElBpO,KAAKK,MAAM+N,KAAO,gBAAkB,oBAIxC,eAAC1D,EAAA,EAAD,CACElK,UAAU,MACVoK,QAAU5K,KAAKK,MAAMoO,SACrB9D,QAAQ,OACR4D,SAAWvO,KAAKK,MAAMqO,UAJxB,UAKE,cAAC,EAAD,CACEnO,KAAOP,KAAKK,MAAMqO,UAAY,MAAQ,OACtC/N,KAAOX,KAAKK,MAAMqO,YAPtB,wB,GA1BmB3N,IAAMC,gB,UCDzB2N,G,kDAMJ,WAAYtO,GAAQ,IAAD,8BACjB,cAAMA,IAIRuO,QAAU,CAAE,UAAW,UAAW,UAAW,UAAW,UAAW,UAAW,UAAW,WAHvF,EAAKzG,KAAO,EAAKA,KAAKT,KAAV,gBAFK,E,mDAQZmH,EAAKC,GACV,GAAID,EAAIE,OAASD,EACf,OAAOD,EAET,IAEIG,EAFAC,EAASxL,KAAKyL,MAAML,EAAIE,OAASD,GACjCK,EAAM,GAEV,IAAKH,EAAI,EAAGA,EAAIH,EAAIE,OAAQC,GAAKC,EAC/BE,EAAIzO,KAAKmO,EAAIG,IAGf,OAAOG,I,iCAGEN,EAAK9J,GACd,OAAIA,EACK8J,EAAI/J,KAAI,SAAAsD,GAAC,OAAIrD,EAAKC,SAASoD,MAC7ByG,I,6BAGD,IAAD,OAEL,MAAO,CACLO,OAAQpP,KAAKqP,WAAWrP,KAAKsP,OAAOtP,KAAKK,MAAMkP,EAFvC,KAE8CvP,KAAKK,MAAMmP,OACjEC,SAAUjF,OAAOC,KAAKzK,KAAKK,MAAMqP,GAAG5K,KAAI,SAAAsH,GACtC,MAAO,CACLjD,MAAO,EAAK9I,MAAM0N,QAAQ3B,GAAI5J,KAC9B2F,KAAM,EAAKkH,WAAW,EAAKC,OAAO,EAAKjP,MAAMqP,EAAEtD,GAN3C,KAMoD,EAAK/L,MAAMsP,OACnEC,MAAM,EACNC,YAAa,EACbC,YAAa,EAAKlB,QAAQxC,EAAK,EAAKwC,QAAQG,e,+BAM1C,IAAD,OACP,OAAO,cAAC,QAAD,CAA+B5G,KAAMnI,KAAKmI,OAAQ4H,QAAS,CAChEC,qBAAqB,EACrBxO,MAAO,CACLyO,SAAS,EACTC,KAAMlQ,KAAKK,MAAMmB,MACjB2O,SAAU,IAEZC,OAAQ,CACNH,UAASjQ,KAAKK,MAAM+P,QAEtBC,UAAW,CACTC,SAAUtQ,KAAKK,MAAM+M,QAAU,IAAM,GAEvCmD,OAAQ,CACNC,MAAO,CAAC,CACNP,SAAS,EACTQ,MAAO,CACLC,SAAU,SAACtI,GAAD,OAAOW,WAAWX,EAAEY,QAAQ,KACtC2H,UAAU,EACVC,cAAe,IAEjBC,WAAY,CACVZ,aAA+B5K,IAAtBrF,KAAKK,MAAMyQ,OACpBC,iBAAkC1L,IAArBrF,KAAKK,MAAMmP,MAAwBxP,KAAKK,MAAMyQ,OAAS,KAAO9Q,KAAKK,MAAMmP,MAAMhN,KAAO,IAAQxC,KAAKK,MAAMyQ,UAG1HE,MAAO,CAAC,CACNf,SAAS,EACT9G,MAAO,CAAEuH,SAAU,SAACtI,GAAD,OAAOW,WAAWX,EAAEY,QAAQ,MAC/C6H,WAAY,CACVZ,aAA+B5K,IAAtBrF,KAAKK,MAAM4Q,OACpBF,iBAAkC1L,IAArBrF,KAAKK,MAAMsP,MAAwB3P,KAAKK,MAAM4Q,OAAS,KAAOjR,KAAKK,MAAMsP,MAAMnN,KAAO,IAAQxC,KAAKK,MAAM4Q,WAI5HC,SAAU,CACRC,UAAW,CACT3P,MAAO,SAACwN,EAAG5G,GAAJ,OAAU,EAAK/H,MAAMyQ,OAAS,KAAO/H,WAAWA,WAAWiG,EAAE,GAAG8B,QAAQ9H,QAAQ,SArC1EhJ,KAAKK,MAAMmB,W,GAnDJT,IAAMuB,WAA9BqM,GACG1N,aAAe,CACpB6P,OAAQ,OACR1D,SAAS,GA4FEuB,UChGFyC,GAAa,WACxB,MAAO,CACLnH,MAAO,CACL/B,IAAK,MACLhF,QAAS4F,EAAQpD,KAAK,IACtByE,IAAK,EACLE,UAAW,OAEbiB,KAAM,CACJM,MAAO9C,GAAYpD,KAAK,GACxB6F,KAAMzC,EAASpD,KAAK,IACpB8F,OAAQ1C,EAAWpD,KAAK,M,0CCqOf2L,G,kDAnOb,WAAYhR,GAAQ,IAAD,8BACjB,cAAMA,IACDiB,MAAQ,CACXgQ,eAAgB,EAChBvD,QAAS,GACTH,WAAY,CACVV,KAAMpE,EAAQpD,KAAK,GACnByH,GAAIrE,EAASpD,KAAK,IAClB0H,SAAS,EACTP,OAAQ,CACN,CACE3E,IAAK,eACL1G,MAAO,eACPuD,KAAM+D,EACNwD,SAAS,GAEX,CACEpE,IAAK,WACL1G,MAAO,WACPuD,KAAM+D,GACNwD,SAAS,GAEX,CACEpE,IAAK,eACL1G,MAAO,eACPuD,KAAM+D,GACNwD,SAAS,GAEX,CACEpE,IAAK,UACL1G,MAAO,eACPuD,KAAM+D,EACNwD,SAAS,GAEX,CACEpE,IAAK,QACL1G,MAAO,mBACPuD,KAAM+D,GACNwD,SAAS,GAEX,CACEpE,IAAK,SACL1G,MAAO,SACPuD,KAAM+D,GACNwD,SAAS,KAIfiF,uBAAmBlM,EACnBmM,gBAAYnM,EACZoM,YAAY,EACZC,SAAS,EACTC,eAAe,GAGjB,EAAKnE,UAAY,EAAKA,UAAU9F,KAAf,gBACjB,EAAKsG,aAAe,EAAKA,aAAatG,KAAlB,gBACpB,EAAKwG,aAAe,EAAKA,aAAaxG,KAAlB,gBACpB,EAAKuG,gBAAkB,EAAKA,gBAAgBvG,KAArB,gBACvB,EAAKmD,OAAS,EAAKA,OAAOnD,KAAZ,gBACd,EAAKkK,cAAgB,EAAKA,cAAclK,KAAnB,gBACrB,EAAKmK,eAAiB,EAAKA,eAAenK,KAApB,gBACtB,EAAKoK,cAAgB,EAAKA,cAAcpK,KAAnB,gBACrB,EAAKqK,WAAa,EAAKA,WAAWrK,KAAhB,gBA/DD,E,gEAkEE,IAAD,OAElB1H,KAAKwN,UAAU,iBAAkB4D,MAAc,WAC7C,EAAK5D,UAAU,WDjEZ,CACLvD,MAAO,CACL/B,IAAK,SACLhF,QAAS4F,EAAQpD,KAAK,IACtByE,IAAK,EACLE,UAAW,IAEbiB,KAAM,CACJM,MAAO9C,GAAYpD,MAAM,MACzB6F,KAAMzC,EAASpD,KAAK,IACpB8F,OAAQ1C,EAAWpD,KAAK,KCuDe,EAAKkM,oB,sCAK1C5R,KAAKsB,MAAMoQ,QACb1R,KAAK8B,SAAS,CAAE4P,SAAS,IAEzB1R,KAAK8B,SAAS,CAAE4P,SAAS,GAAQ1R,KAAK6R,kB,uCAIpC7R,KAAKsB,MAAMoQ,SACb1R,KAAK4R,kB,gCAGCpP,EAAMwP,EAAUtB,GACxB,IAAItE,EAAKpM,KAAKsB,MAAMgQ,eACpBtR,KAAK8B,SAAS,CACZiM,QAAQ,2BACH/N,KAAKsB,MAAMyM,SADT,kBAEJ3B,EAFI,2BAGA4F,GAHA,IAIH5F,GAAIA,EACJ5J,KAAMA,MAGV8O,eAAgBtR,KAAKsB,MAAMgQ,eAAiB,GAC3CZ,GAAY1Q,KAAK6R,kB,mCAGTzF,GACXpM,KAAK8B,SAAS,CACZiM,QAASpB,KAAEsF,KAAKjS,KAAKsB,MAAMyM,QAAS3B,IACnCpM,KAAK6R,kB,sCAGM7H,EAAK0G,GACnB1Q,KAAKwN,UAAUxD,EAAIxH,KAAO,UAAWwH,EAAK0G,K,mCAG/BtE,EAAIyB,GACf7N,KAAK8B,SAAS,CACZiM,QAAQ,2BACH/N,KAAKsB,MAAMyM,SADT,kBAEJ3B,EAFI,2BAGApM,KAAKsB,MAAMyM,QAAQ3B,IACnByB,MAGN7N,KAAK6R,kB,6BAGH3J,EAAK2F,GACV7N,KAAK8B,SAAL,eACGoG,EADH,2BAEOlI,KAAKsB,MAAM4G,IACX2F,IAEJ7N,KAAK6R,kB,oCAGInB,GAAW,IAAD,OAElBwB,EAAqC,oBAAbxB,EAA0BA,OAAWrL,EACjErF,KAAK8B,SAAS,CAAE2P,YAAY,IAE3B,KADc,IAAIU,MACPC,mBAAkBpS,KAAKsB,MAAMsM,WAAY5N,KAAKsB,MAAMyM,SAC7DsE,MAAK,SAAAC,GAAC,OAAIA,EAAEC,SACZF,MAAK,SAAAG,GAAC,OAAI,EAAK1Q,SAAS,CAAEyP,kBAAmBiB,EAAEC,QAASjB,WAAYgB,EAAEzE,QAAS0D,YAAY,GAASS,Q,mCAG3F,IAAD,OAEXlS,KAAK8B,SAAS,CAAE6P,eAAe,IAC/B3R,KAAK4R,eAAc,WAEhB,KADc,IAAIc,MACPC,eAAc,EAAKrR,MAAMiQ,kBAAmB,EAAKjQ,MAAMsM,WAAY,EAAKtM,MAAMkQ,YACvFa,MAAK,SAAAC,GAAC,OAAIA,EAAEC,SACZF,MAAK,SAAAI,GACJjI,OAAOC,KAAKgI,GAASG,SAAQ,SAAApQ,GAC3B,IAAIqQ,EAASC,SAASC,cAAc,KACpCF,EAAO/K,OAAS,SAChB+K,EAAOG,SAAP,UAAqBxQ,EAArB,QACAqQ,EAAOI,KAAO,+BAAiCC,UAAUT,EAAQjQ,IACjEqQ,EAAOM,QACPN,EAAOI,KAAO,MAEhB,EAAKnR,SAAS,CAAE6P,eAAe,Y,+BAK7B,IAAD,OACP,OAAO,sBAAKnR,UAAU,OAAf,UACL,iCACE,sEAGE,eAACkK,EAAA,EAAD,CAAQuI,KAAK,sDAAsDnL,OAAO,SAAS6C,QAAQ,eAA3F,UACE,cAAC,EAAD,CAAQrK,WAAW,QAAQC,KAAK,WADlC,yBAMJ,eAAC6S,EAAA,EAAD,CAAWC,OAAO,EAAlB,UACE,cAAC7J,EAAA,EAAD,UACE,cAACI,EAAA,EAAD,UACE,iCACE,cAAC,GAAD,CACEyE,QAAUrO,KAAKsB,MAAMmQ,WACrBnD,MAAQtO,KAAK4R,cACbxD,KAAOpO,KAAKsB,MAAMoQ,QAClBlD,aAAexO,KAAK8R,cACpBrD,SAAWzO,KAAK+R,WAChBrD,UAAY1O,KAAKsB,MAAMqQ,sBAI/B,eAACnI,EAAA,EAAD,WACE,cAACI,EAAA,EAAD,CAAKpJ,UAAU,kBAAf,SACE,cAAC,GAAD,CACEuN,QAAS/N,KAAKsB,MAAMyM,QACpBP,UAAY,WAAQ,EAAKA,UAAL,cAAuB,EAAKlM,MAAMgQ,gBAAkBF,OACxEpD,aAAehO,KAAKgO,aACpBE,aAAelO,KAAKkO,aACpBD,gBAAkBjO,KAAKiO,gBACvBL,WAAa5N,KAAKsB,MAAMsM,WACxB/C,OAAS7K,KAAK6K,WAElB,cAACjB,EAAA,EAAD,CAAKpJ,UAAU,eAAf,SACE,cAACgJ,EAAA,EAAD,UAEIxJ,KAAKsB,MAAMiQ,kBAAoBvR,KAAKsB,MAAMsM,WAAWf,OAAOyC,QAAO,SAAAxC,GAAC,OAAIA,EAAER,WAASxH,KAAI,SAACgI,EAAGkC,GAAJ,OACrF,qBAAKxO,UAAY,YAAjB,SACE,cAAC,GAAD,CAEEgB,MAAQsL,EAAEtL,MACV4O,OAAe,IAANpB,EACT5B,QAAU,EAAK9L,MAAMsM,WAAWR,QAChCW,QAAU,EAAKzM,MAAMkQ,WACrBjC,EAAI,EAAKjO,MAAMiQ,kBAAkBrE,KACjCwC,EAAI,EAAKpO,MAAMiQ,kBAAkBzE,EAAE5E,KACnCsH,MAAQ,EAAKlO,MAAMsM,WAAWV,KAAKnI,KACnC4K,MAAQ7C,EAAE/H,KACV+L,OAAS,OACTG,OAASnE,EAAEtL,OAVLsL,EAAE5E,UAYT,qF,GA1NHnH,IAAMuB,WCVxBgR,IAASC,OACP,cAAC,GAAD,IACAT,SAASU,eAAe,W","file":"static/js/main.844a43b6.chunk.js","sourcesContent":["var wrap = require('comlink').wrap,Worker = require(\"!worker-loader?{}!/home/jaci/Documents/Prog/Personal/frc-motor-modelling/node_modules/comlink-loader/dist/comlink-worker-loader.js!/home/jaci/Documents/Prog/Personal/frc-motor-modelling/node_modules/react-scripts/node_modules/babel-loader/lib/index.js??ref--5-oneOf-2!/home/jaci/Documents/Prog/Personal/frc-motor-modelling/src/framework/SimulationAdapter.js\"),inst;module.exports = function f() {if (this instanceof f) return wrap(Worker());return inst || (inst = wrap(Worker()));};","var wrap = require('comlink').wrap,Worker = require(\"!worker-loader?{}!/home/jaci/Documents/Prog/Personal/frc-motor-modelling/node_modules/comlink-loader/dist/comlink-worker-loader.js!/home/jaci/Documents/Prog/Personal/frc-motor-modelling/node_modules/react-scripts/node_modules/babel-loader/lib/index.js??ref--5-oneOf-2!/home/jaci/Documents/Prog/Personal/frc-motor-modelling/src/framework/ExportAdapter.js\"),inst;module.exports = function f() {if (this instanceof f) return wrap(Worker());return inst || (inst = wrap(Worker()));};","module.exports = function() {\n  return new Worker(__webpack_public_path__ + \"a5b437b2dda1acc78892.worker.js\");\n};","module.exports = function() {\n  return new Worker(__webpack_public_path__ + \"3807f31d329517681f79.worker.js\");\n};","import React from 'react';\n\nclass FAIcon extends React.PureComponent {\n  static defaultProps = {\n    icon_style: 'solid'\n  };\n\n  static styles = {\n    regular: \"far\",\n    solid: \"fas\",\n    brand: \"fab\"\n  };\n\n  getClassName = () => {\n    let cls = [\n      FAIcon.styles[this.props.icon_style],\n      `fa-${this.props.icon}`,\n      this.props.className\n    ];\n    if (this.props.size) cls.push(`fa-${this.props.size}`);\n    if (this.props.spin) cls.push(`fa-spin`);\n    return cls.join(\" \")\n  }\n\n  render() {\n    return <React.Fragment><i className={this.getClassName()} ></i> { this.props.nospace ? '' : '\\u00A0' /* nbsp */ } </React.Fragment>\n  }\n}\n\nexport default FAIcon;","import React from 'react';\nimport { Accordion, Card } from 'react-bootstrap';\nimport FAIcon from './FontAwesome';\n\nclass SimpleAccordion extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = { selected: \"1\" };\n  }\n\n  render() {\n    var { title, children, ...props } = this.props;\n    return <Accordion defaultActiveKey=\"1\" onSelect={ e => this.setState({ selected: e }) } {...props}>\n      <Card>\n        <Accordion.Toggle as={Card.Header} eventKey=\"1\">\n          <FAIcon size='lg' icon={ this.state.selected === \"1\" ? \"caret-up\" : \"caret-down\" } />\n          &nbsp;\n          { title }\n        </Accordion.Toggle>\n        <Accordion.Collapse eventKey=\"1\">\n          <Card.Body>\n            { children }\n          </Card.Body>\n        </Accordion.Collapse>\n      </Card>\n    </Accordion>\n  } \n}\n\nexport default SimpleAccordion;","class Motor {\n  constructor(name, v_nom, free_speed, free_current, stall_torque, stall_current) {\n    this.name = name;\n    this.voltage_nom = v_nom;\n    this.free_speed = free_speed;\n    this.free_current = free_current;\n    this.stall_torque = stall_torque;\n    this.stall_current = stall_current;\n  }\n\n  mult(n) {\n    return new Motor(this.name + \" (x\" + n + \")\", \n                this.voltage_nom, this.free_speed, n * this.free_current, \n                n * this.stall_torque, n * this.stall_current);\n  }\n\n  reduce(G) {\n    return new Motor(this.name + \" (G=\" + G + \")\",\n                this.voltage_nom, this.free_speed / G, this.free_current,\n                this.stall_torque * G, this.stall_current);\n  }\n\n  R() {\n    return this.voltage_nom / this.stall_current;\n  }\n  \n  kw() {\n    return (this.voltage_nom - this.free_current * this.R()) / this.free_speed;\n  }\n\n  kt() {\n    return (this.stall_current / this.stall_torque);\n  }\n\n  calculate(voltage, speed) {\n    let current = (voltage - this.kw() * speed) / this.R();\n    return {\n      current: current,\n      torque: current / this.kt()\n    };\n  }\n};\n\nlet rpm_to_rad = (2 * Math.PI) / 60.0;\n\nexport const Motors = {\n  Falcon500:  new Motor(\"Falcon 500\", 12,  6380 * rpm_to_rad, 1.5, 4.69, 257),\n  NEO:        new Motor(\"NEO\",        12,  5880 * rpm_to_rad, 1.3, 3.36, 166),\n  NEO550:     new Motor(\"NEO 550\",    12, 11710 * rpm_to_rad, 1.1, 1.08, 111),\n  CIM:        new Motor(\"CIM\",        12,  5330 * rpm_to_rad, 2.7, 2.41, 131),\n  MiniCIM:    new Motor(\"Mini CIM\",   12,  5840 * rpm_to_rad, 3.0, 1.41,  89),\n  BAG:        new Motor(\"BAG\",        12, 13180 * rpm_to_rad, 1.8, 0.43,  53),\n  pro775:     new Motor(\"775pro\",     12, 14270 * rpm_to_rad, 3.7, 0.36, 71),\n  redline:    new Motor(\"AM Redline\", 12, 19500 * rpm_to_rad, 2.6, 0.64, 122)\n};\n\nexport function motorFromConfig(cfg) {\n  return Motors[cfg.key].mult(cfg.num).reduce(cfg.reduction);\n};\n\nexport default Motor;","import React from 'react';\nimport { OverlayTrigger, Tooltip } from 'react-bootstrap';\nimport FAIcon from './FontAwesome';\n\nclass HelpIcon extends React.PureComponent {\n  static defaultProps = {\n    placement: 'top'\n  };\n\n  render() {\n    var { tooltip, overlay, placement, ...props } = this.props;\n    return <OverlayTrigger placement={placement} overlay={ overlay || <Tooltip> { tooltip } </Tooltip> } {...props} >\n      <span><FAIcon icon=\"question-circle\" size=\"sm\" /></span>\n    </OverlayTrigger>\n  }\n}\n\nexport default HelpIcon;","class Unit {\n  static map = {};\n\n  constructor(name, factor_to_base=1, base=null) {\n    this.name = name;\n    this.factor_to_base = factor_to_base;\n    this.base = base;\n\n    if (!base && (factor_to_base - 1) > 0.001)\n      throw(`ERROR: Unit ${name} has no base unit!`)\n\n    if (!base) {\n      this.derivatives = []\n      this.base = this;\n    } else {\n      while (this.base.base !== this.base) {\n        this.factor_to_base *= this.base.factor_to_base;\n        this.base = this.base.base;\n      }\n      this.base.derivatives.push(this);\n    }\n    Unit.map[name] = this;\n  }\n\n  toBase(n) {\n    return n * this.factor_to_base;\n  }\n\n  fromBase(n) {\n    return n / this.factor_to_base;\n  }\n\n  to(unit, n) {\n    if (unit.base !== this.base)\n      throw \"Cannot convert between units of different bases!\"\n    return unit.fromBase(this.toBase(n));\n  }\n\n  allVariants() {\n    return [ this.base, ...this.base.derivatives ]\n  }\n\n  static fromObject(unit_obj) {\n    if (typeof unit_obj === 'object' && unit_obj !== null)\n      return Unit.map[unit_obj.name];\n    return unit_obj;\n  }\n};\n\nexport class Measurement {\n  constructor(unit, value) {\n    this.unit = unit;\n    this.value = value;\n    if (this.unit === undefined || this.value === undefined)\n      throw \"Measurement params undefined\";\n  }\n\n  to(unit) {\n    return new Measurement(unit, this.unit.to(unit, this.value));\n  }\n\n  toBase() {\n    return this.unit.toBase(this.value);\n  }\n\n  with(f) {\n    return new Measurement(this.unit, f(this.value));\n  }\n\n  static fromObject(measurement_obj) {\n    if (typeof measurement_obj === 'object' && measurement_obj !== null)\n      return new Measurement(Unit.fromObject(measurement_obj.unit), measurement_obj.value);\n    return measurement_obj;\n  }\n};\n\nUnit.prototype.make = function(n) {\n  return new Measurement(this, n);\n};\n\n// Length\nexport const m    = new Unit('m', 1)\nexport const mm   = new Unit('mm', 1 / 1000, m);\nexport const cm   = new Unit('cm', 10, mm);\nexport const inch = new Unit('in', 25.4, mm);\nexport const ft   = new Unit('ft', 12, inch);\nexport const field = new Unit('FRC Field (54ft)', 54, ft);\n\n// Time\nexport const s  = new Unit('s', 1);\nexport const ms = new Unit('ms', 1 / 1000, s);\n\n// Mass\nexport const kg = new Unit('kg', 1);\nexport const lb = new Unit('lb', 0.453592, kg);\n\n// Voltage\nexport const V = new Unit('V', 1);\n\n// Current\nexport const A = new Unit('A', 1);\nexport const mA = new Unit('mA', 1 / 1000, A);\n\n// Angle\nexport const rad = new Unit('rad', 1);\nexport const deg = new Unit('deg', Math.PI / 180, rad);\n\n// Velocity\nexport const mps = new Unit('m/s', 1);\nexport const mmps = new Unit('mm/s', 1 / 1000, mps);\nexport const inchps = new Unit('in/s', 25.4, mmps)\nexport const ftps = new Unit('ft/s', 12, inchps);\nexport const kph = new Unit('km/hr', 1 / 3.6, mps);\nexport const field_per_s = new Unit('FRC Fields / s', 54, ftps);\n\n// Acceleration\nexport const mpsps = new Unit('m/s/s', 1);\nexport const ftpsps = new Unit('ft/s/s', 12 * 25.4 / 1000, mpsps);\n\n// Angular Velocity\nexport const radps = new Unit('rad/s', 1);\nexport const degps = new Unit('deg/s', Math.PI / 180, radps);\nexport const rpm   = new Unit('rpm', 2 * Math.PI / 60, radps);\n\n// Torque\nexport const Nm = new Unit('Nm', 1);\nexport const ftlb = new Unit('ftlb', 1.35582, Nm);","import React from 'react';\nimport { Form } from 'react-bootstrap';\n\nclass Option extends React.PureComponent {\n  render() {\n    var {children, ...props} = this.props;\n    return <option {...props}> { children } </option>;\n  }\n}\n\nclass Combo extends React.Component {\n  static Option = Option;\n\n  constructor(props) {\n    super(props)\n    this.change = this.change.bind(this);\n    this.findOptionFor = this.findOptionFor.bind(this);\n  }\n\n  change(e) {\n    if (this.props.onChange) {\n      let val = e.target.value;\n      let child = this.props.children.find(c => c.key === val);\n      this.props.onChange(child.props.data);\n    }\n  }\n\n  findOptionFor(v) {\n    return this.props.children.find(c => c.props.data === v)\n  }\n\n  render() {\n    var { children, value, onChange, ...props } = this.props;\n    return <Form.Control size=\"sm\" as=\"select\" value={ this.findOptionFor(value).key } onChange={ this.change } {...props}>\n      {\n        children\n      }\n    </Form.Control>\n  }\n}\n\nexport default Combo;","import React from 'react';\nimport Combo from './Combo';\n\nclass UnitSelector extends React.PureComponent {\n  static defaultProps = {\n    unit: undefined,\n    value: undefined,\n    onChange: undefined\n  };\n\n  render() {\n    let { value, onChange, unit, ...props } = this.props;\n    return <Combo value={ value } onChange={ onChange } {...props}>\n      {\n        (unit || value).base.allVariants().map(u => <Combo.Option key={u.name} data={u}> { u.name } </Combo.Option>)\n      }\n    </Combo>\n  }\n}\n\nexport default UnitSelector;","import React from 'react';\nimport { Form, Col, Row } from 'react-bootstrap';\nimport HelpIcon from './HelpIcon';\nimport * as Units from '../../framework/Units';\nimport UnitSelector from './UnitSelector';\n\nclass UnitInput extends React.PureComponent {\n  static defaultProps = {\n    sm_lab: 5,\n    sm_input: 3,\n    sm_unit: 4,\n    unit: undefined,\n    parse: parseFloat,\n    round: 3\n  };\n\n  constructor(props) {\n    super(props)\n    this.changeValue = this.changeValue.bind(this);\n    this.getValue = this.getValue.bind(this);\n  }\n\n  changeValue(e) {\n    let val = e.target.value;\n    let n = this.props.parse(val);\n\n    if (this.props.unit) {\n      this.props.onChange(new Units.Measurement(this.props.value.unit, n));\n    } else {\n      this.props.onChange(n);\n    }\n  }\n\n  getValue() {\n    let val = this.props.unit ? this.props.value.value : this.props.value;\n    if (this.props.parse === parseFloat)\n      val = parseFloat(val.toFixed(this.props.round))   // Parsing again is a little trick to remove trailing zeros\n    return val\n  }\n\n  render() {\n    var { className, sm_lab, label, sm_input, sm_unit, sm_tooltip, tooltip, unit, parse, value, onChange, ...controlProps } = this.props;\n    return <Form.Row className={className}>\n      {\n        label ? \n          <Form.Label column=\"sm\" sm={ sm_lab }>\n            { label }:\n          </Form.Label> : <React.Fragment />\n      }\n      <Col sm={ sm_input }>\n        <Form.Control size=\"sm\" value={ this.getValue() } onChange={ this.changeValue } {...controlProps} />\n      </Col>\n      <Col sm={sm_unit}>\n        <Row>\n          <Col>\n            {\n              unit ? \n                <UnitSelector unit={ unit } value={ value.unit } onChange={ u => onChange(value.to(u)) } />\n                : <React.Fragment />\n            }\n          </Col>\n          <Col className='pl-0' xs='3'>\n            {\n              tooltip ? \n                <HelpIcon tooltip={ tooltip } /> : <React.Fragment />\n            }\n          </Col>\n        </Row>\n      </Col>\n    </Form.Row>\n  }\n}\n\nexport { Units };\nexport default UnitInput;","import React from 'react';\nimport { Motors, motorFromConfig } from '../framework/Motor';\nimport { ButtonGroup, Button, Form, Col } from 'react-bootstrap';\nimport { MathComponent } from 'mathjax-react';\nimport UnitInput, { Units } from './jellybean/UnitInput';\nimport HelpIcon from './jellybean/HelpIcon';\n\nclass MotorConfig extends React.Component {\n  constructor(props) {\n    super(props)\n    this.getMotor = this.getMotor.bind(this);\n  }\n\n  getMotor() {\n    return motorFromConfig(this.props.motor);\n  }\n\n  render() {\n    return <Form>\n      <Form.Row className=\"mb-3\">\n        <Col>\n          <ButtonGroup toggle className=\"flex-wrap\">\n            {\n              Object.keys(Motors).map(key =>\n                <Button \n                  key={key} \n                  variant={ this.props.motor.key === key ? \"primary\" : \"outline-secondary\" }\n                  size=\"sm\"\n                  value={key} \n                  name=\"motor_selection\"\n                  onClick={ (e) => this.props.update({ key: e.currentTarget.value }) }> \n                  { Motors[key].name } \n                </Button>\n              )\n            }\n          </ButtonGroup>\n        </Col>\n      </Form.Row>\n      <hr />\n\n      <UnitInput\n        label=\"Applied Voltage\"\n        className=\"mb-2\"\n        type=\"number\"\n        value={ this.props.motor.voltage }\n        onChange={ v => { this.props.update({ voltage: v }) } }\n        min={0}\n        max={14}\n        step={0.1}\n        unit={Units.V}\n        tooltip='Desired applied voltage to the motor during the simulation.' />\n\n      <UnitInput\n        label=\"Number of Motors\"\n        className=\"mb-2\"\n        type=\"number\"\n        value={ this.props.motor.num }\n        onChange={ v => { this.props.update({ num: v }) } }\n        min={1}\n        step={1}\n        parse={parseInt} />\n\n      <UnitInput\n        label=\"Gearbox Reduction\"\n        className=\"mb-2\"\n        type=\"number\"\n        value={ this.props.motor.reduction }\n        onChange={ v => { this.props.update({ reduction: v }) } }\n        min={0}\n        step={0.1} />\n      \n      <hr />\n      <div className=\"text-dark small\">\n        <center><i> Equivalent Motor Coefficients </i> <HelpIcon tooltip=\"Mathematical coefficients for a single motor model, after merging multiple motors and applying the gearbox reduction.\" /> </center>\n        <Form.Row>\n          <Col>\n            <MathComponent tex={ \"V = IR + k_\\\\omega \\\\omega\" } />\n          </Col>\n          <Col>\n            <MathComponent tex={ \"I = k_\\\\tau \\\\tau\" } />\n          </Col>\n        </Form.Row>\n        <Form.Row>\n          <Col className='align-self-center'>\n            <MathComponent tex={ \"R_{equiv} = \" + this.getMotor().R().toFixed(4) + \" \\\\Omega\"  }/>\n          </Col>\n          <Col className='align-self-center'>\n            <MathComponent tex={ \"k_\\\\omega = \" + this.getMotor().kw().toFixed(5) + \"\\\\ \\\\frac{Vs}{rad}\"  }/>\n          </Col>\n          <Col className='align-self-center'>\n            <MathComponent tex={ \"k_\\\\tau = \" + this.getMotor().kt().toFixed(3) + \"\\\\ \\\\frac{A}{Nm}\"  }/>\n          </Col>\n        </Form.Row>\n      </div>\n    </Form>\n  }\n}\n\nexport default MotorConfig;","import React from 'react';\nimport { Form } from 'react-bootstrap';\nimport UnitInput, { Units } from './jellybean/UnitInput';\n\nclass LoadConfig extends React.PureComponent {\n  render() {\n    return <Form>\n      <UnitInput\n        label='Load Mass'\n        type='number'\n        min={0}\n        value={this.props.load.mass}\n        onChange={ v => { this.props.update({ mass: v }) } }\n        unit={Units.kg}\n      />\n      <UnitInput\n        className='mt-2'\n        label='Diameter'\n        type='number'\n        min={0}\n        value={this.props.load.radius.with(r => r * 2)}\n        onChange={ v => this.props.update({ radius: v.with(d => d / 2) }) }\n        unit={Units.mm}\n        tooltip='Diameter of the wheel, pulley, or moment arm that converts angular motion to linear motion (e.g. drivetrain wheels, elevator pulley).'\n      />\n      <UnitInput\n        className='mt-2'\n        label='Accel Offset'\n        type='number'\n        value={this.props.load.accel}\n        onChange={ v => this.props.update({ accel: v }) }\n        unit={Units.mpsps}\n        tooltip='Acceleration acting on the load. For a drivetrain, this is likely 0. For an elevator, this is likely -9.81 (gravity, acting down).'\n      />\n    </Form>\n  }\n}\n\nexport default LoadConfig;","import React from 'react';\nimport { Form, Col, Button } from 'react-bootstrap';\nimport SimpleAccordion from './jellybean/SimpleAccordion';\nimport MotorConfig from './MotorConfig';\nimport { Motors } from '../framework/Motor';\nimport FAIcon from './jellybean/FontAwesome';\nimport LoadConfig from './LoadConfig';\n\nclass Configuration extends React.Component {\n  constructor(props) {\n    super(props);\n    this.updateAndMerge = this.updateAndMerge.bind(this);\n  }\n\n  updateAndMerge(key, value) {\n    this.props.update({ [key]: {\n      ...this.props.cfg[key],\n      ...value\n    }});\n  }\n\n  render() {\n    return <div>\n      <Form.Row className=\"my-3\">\n        <Form.Label column=\"sm\" md=\"auto\">\n          Config Name: \n        </Form.Label>\n        <Col>\n          <Form.Control \n            type=\"text\" size=\"sm\" \n            value={ this.props.cfg.name }\n            onChange={ e => { this.props.update({ name: e.target.value }) } } />\n        </Col>\n      </Form.Row>\n      <Form.Row className=\"mb-3\">\n        <Col>\n          <Button \n            variant=\"primary\" size=\"sm\"\n            onClick={ this.props.duplicate } > \n            <FAIcon icon_style='regular' icon='copy' /> Duplicate Configuration\n          </Button>\n          &nbsp;\n          <Button \n            variant=\"danger\" size=\"sm\"\n            onClick={ this.props.delete }> \n            <FAIcon icon_style='regular' icon='trash-alt' /> Delete Configuration </Button>\n        </Col>\n      </Form.Row>\n\n      <SimpleAccordion title=\"Load\">\n        <LoadConfig\n          load={ this.props.cfg.load }\n          update={ r => this.updateAndMerge('load', r) } />\n      </SimpleAccordion>\n      <br />\n      <SimpleAccordion title={\n        \"Motor (\" +\n          this.props.cfg.motor.num + \"x \" +\n          Motors[this.props.cfg.motor.key].name + \n          \" < \" + this.props.cfg.motor.reduction + \")\"}>\n        <MotorConfig\n          motor={ this.props.cfg.motor }\n          update={ m => this.updateAndMerge('motor', m) } />\n      </SimpleAccordion>\n      \n    </div>\n  }\n}\n\nexport default Configuration;","import React from 'react';\nimport { Form, Col } from 'react-bootstrap';\nimport UnitSelector from './UnitSelector';\nimport HelpIcon from './HelpIcon';\nclass GraphConfig extends React.PureComponent {\n  static defaultProps = {\n    sm_lab: \"5\",\n    sm_unit: \"4\",\n    sm_tooltip: \"1\",\n    cfg: undefined,\n    onChange: undefined,\n    tooltip: undefined\n  }\n\n  render() {\n    var { className, sm_lab, sm_unit, sm_tooltip, cfg, tooltip, onChange, ...props } = this.props;\n    return <Form.Row className={className}>\n      <Col sm={ sm_lab }>\n        <Form.Switch \n          id={ cfg.key + \"_en\" }\n          label={ cfg.title }\n          checked={ cfg.enabled }\n          onChange={ e => onChange({ enabled: !cfg.enabled }) } />\n      </Col>\n      <Col sm={ sm_unit }>\n        <UnitSelector value={ cfg.unit } onChange={ u => onChange({ unit: u }) } />\n      </Col>\n      <Col sm={ sm_tooltip }>\n        {\n          tooltip ? \n            <HelpIcon tooltip={ tooltip } /> : <React.Fragment />\n        }\n      </Col>\n    </Form.Row>\n  }\n}\n\nexport default GraphConfig; ","import React from 'react';\nimport { Form, Col } from 'react-bootstrap';\nimport UnitInput, { Units } from './jellybean/UnitInput';\nimport GraphConfig from './jellybean/GraphConfig';\nimport SimpleAccordion from './jellybean/SimpleAccordion';\nimport _ from 'lodash';\nclass SimConfig extends React.Component {\n  constructor(props) {\n    super(props);\n    this.updateGraph = this.updateGraph.bind(this);\n  }\n\n  updateGraph(key, changes) {\n    let idx = _.findIndex(this.props.cfg.graphs, g => g.key == key);\n    let new_graphs = [...this.props.cfg.graphs];\n    new_graphs[idx] = { ...this.props.cfg.graphs[idx], ...changes };\n    console.log(key, changes, idx, new_graphs)\n    this.props.update({ graphs: new_graphs });\n  }\n\n  render() {\n    return <Form>\n      <SimpleAccordion title=\"Simulation Parameters\" className='my-3'>\n        <UnitInput\n          className='mb-3'\n          label='Simulation Duration'\n          type='number'\n          min={0}\n          value={ this.props.cfg.time }\n          onChange={ v => { this.props.update({ time: v }) } }\n          unit={Units.s}\n        />\n        <UnitInput\n          label='Simulation Timestep'\n          type='number'\n          min={0.001}\n          step={0.001}\n          value={ this.props.cfg.dt }\n          onChange={ v => { this.props.update({ dt: v }) } }\n          tooltip='Simulation time interval (dt). The smaller, the finer the detail of the simulation.'\n          unit={Units.s}\n        />\n      </SimpleAccordion>\n      <SimpleAccordion title=\"Graphing Controls\" className='my-3'>\n        <Form.Row className='mb-3'>\n          <Col>\n            <Form.Switch\n              id='graph-animate-switch'\n              label='Animate?'\n              checked={ this.props.cfg.animate }\n              onChange={ e => { this.props.update({ animate: !this.props.cfg.animate }) } } />\n          </Col>\n        </Form.Row>\n        {\n          this.props.cfg.graphs.map(g => (\n            <GraphConfig key={g.key} className={ 'mt-2' } cfg={g} onChange={ v => this.updateGraph(g.key, v) } />\n          ))\n        }\n      </SimpleAccordion>\n    </Form>\n  }\n}\n\nexport default SimConfig;","import React from 'react';\nimport Configuration from './Configuration';\nimport { Tabs, Tab } from 'react-bootstrap';\nimport FAIcon from './jellybean/FontAwesome';\nimport SimConfig from './SimConfig';\nclass ConfigPanel extends React.Component {\n  constructor(props) {\n    super(props)\n    this.state = { selected: 'sim' }\n    this.setTab = this.setTab.bind(this);\n  }\n\n  setTab(k) {\n    if (k === '_ADD') {\n      this.props.addConfig();\n    } else \n      this.setState({ selected: k });\n  }\n\n  render() {\n    return <div>\n      <Tabs activeKey={ this.state.selected} onSelect={k => this.setTab(k)} >\n        <Tab key='sim' eventKey='sim' title={ <FAIcon icon='cog' nospace /> }>\n          <SimConfig\n            cfg={this.props.sim_config}\n            update={ (newProps) => this.props.update('sim_config', newProps) } />\n        </Tab>\n        { Object.values(this.props.configs).map(c => \n          <Tab key={c.id} eventKey={c.id} title={c.name}>\n            <Configuration\n              cfg={c}\n              delete={ () => this.props.deleteConfig(c.id) }\n              duplicate={ () => this.props.duplicateConfig(c) }\n              update={ (newProps) => this.props.updateConfig(c.id, newProps) } />\n          </Tab>) }\n        <Tab key='_ADD' eventKey='_ADD' title={\n          <FAIcon icon=\"plus\" size=\"sm\" />\n        } />\n      </Tabs>\n    </div>\n  }\n}\n\nexport default ConfigPanel;","import React from 'react';\nimport { Button } from 'react-bootstrap';\nimport FAIcon from './jellybean/FontAwesome';\n\nclass SimControl extends React.PureComponent {\n  render() {\n    return <div>\n      <Button\n        className='m-1'\n        variant={ this.props.auto ? 'outline-secondary' : (this.props.loading ? 'info' : 'success') }\n        onClick={ this.props.onRun }\n        disabled={ this.props.loading || this.props.auto }>\n        <FAIcon\n          icon={ this.props.loading ? 'cog' : 'play' }\n          spin={ this.props.loading } />\n        Run Simulation\n      </Button>\n\n      <Button\n        className='m-1'\n        onClick={ this.props.onAutoToggle }\n        variant={ this.props.auto ? 'warning' : 'primary' }>\n        <FAIcon\n          icon='sync-alt'\n          spin={ this.props.auto } />\n        {\n          this.props.auto ? 'Stop Auto Sim' : 'Start Auto Sim'\n        }\n      </Button>\n\n      <Button\n        className='m-1'\n        onClick={ this.props.onExport }\n        variant='info'\n        disabled={ this.props.exporting }>\n        <FAIcon\n          icon={ this.props.exporting ? 'cog' : 'save' }\n          spin={ this.props.exporting } />\n        Export CSVs\n      </Button>\n    </div>\n  }\n}\n\nexport default SimControl;","import React from 'react';\nimport { Line } from 'react-chartjs-2';\n\nclass SimulationGraph extends React.Component {\n  static defaultProps = {\n    xLabel: \"Time\",\n    animate: true\n  }\n\n  constructor(props) {\n    super(props)\n    this.data = this.data.bind(this);\n  }\n\n  colours = [ '#34225c', '#71286b', '#aa2d6c', '#db425f', '#fc6749', '#ff9729', '#ffcb00', '#e6ff1c' ]\n\n  // Keep arrays short so the graphs don't eat a ton of memory\n  filter(arr, n_max) {\n    if (arr.length < n_max)\n      return arr;\n    \n    let stride = Math.floor(arr.length / n_max);\n    let out = [];\n    let i;\n    for (i = 0; i < arr.length; i += stride) {\n      out.push(arr[i]);\n    }\n\n    return out;\n  }\n\n  maybeScale(arr, unit) {\n    if (unit)\n      return arr.map(v => unit.fromBase(v));\n    return arr;\n  }\n\n  data() {\n    const n = 1000;\n    return {\n      labels: this.maybeScale(this.filter(this.props.x, n), this.props.xUnit),\n      datasets: Object.keys(this.props.y).map(id => {\n        return {\n          label: this.props.configs[id].name,\n          data: this.maybeScale(this.filter(this.props.y[id], n), this.props.yUnit),\n          fill: false,\n          pointRadius: 0,\n          borderColor: this.colours[id % this.colours.length]\n        }\n      })\n    };\n  }\n\n  render() {\n    return <Line key={ this.props.title } data={this.data()} options={{\n      maintainAspectRatio: false,\n      title: {\n        display: true,\n        text: this.props.title,\n        fontSize: 16\n      },\n      legend: {\n        display: this.props.legend ? true : false\n      },\n      animation: {\n        duration: this.props.animate ? 500 : 0\n      },\n      scales: {\n        xAxes: [{\n          display: true,\n          ticks: { \n            callback: (v) => parseFloat(v.toFixed(5)),\n            autoskip: true,\n            maxTicksLimit: 10\n          },\n          scaleLabel: {\n            display: this.props.xLabel !== undefined,\n            labelString: this.props.xUnit !== undefined ? ( this.props.xLabel + \" (\" + this.props.xUnit.name + \")\" ) : this.props.xLabel\n          }\n        }],\n        yAxes: [{\n          display: true,\n          label: { callback: (v) => parseFloat(v.toFixed(3)) },\n          scaleLabel: {\n            display: this.props.yLabel !== undefined,\n            labelString: this.props.yUnit !== undefined ? ( this.props.yLabel + \" (\" + this.props.yUnit.name + \")\" ) : this.props.yLabel\n          }\n        }]\n      },\n      tooltips: {\n        callbacks: { \n          title: (i, v) => this.props.xLabel + \": \" + parseFloat(parseFloat(i[0].xLabel).toFixed(5))\n        }\n      }\n    }} />\n  }\n}\n\nexport default SimulationGraph;","import * as Units from './Units';\n\nexport const KitOfParts = () => {\n  return {\n    motor: {\n      key: 'CIM',\n      voltage: Units.V.make(12),\n      num: 4,\n      reduction: 10.75\n    },\n    load: {\n      accel: Units.mpsps.make(0),\n      mass: Units.kg.make(70),\n      radius: Units.inch.make(6 / 2)\n    }\n  };\n};\n\nexport const Elevator = () => {\n  return {\n    motor: {\n      key: 'pro775',\n      voltage: Units.V.make(12),\n      num: 2,\n      reduction: 20\n    },\n    load: {\n      accel: Units.mpsps.make(-9.81),\n      mass: Units.kg.make(10),\n      radius: Units.inch.make(4 / 2)\n    }\n  };\n};","import React from 'react';\nimport { Container, Row, Col, Button } from 'react-bootstrap';\nimport ConfigPanel from './components/ConfigPanel';\nimport './app.scss';\nimport _ from 'lodash';\nimport * as Units from './framework/Units';\nimport SimControl from './components/SimControl';\nimport SimulationGraph from './components/SimulationGraph';\nimport { KitOfParts, Elevator } from './framework/DefaultConfigs';\nimport FAIcon from './components/jellybean/FontAwesome';\n/* eslint-disable import/no-webpack-loader-syntax */\nimport SimulationWorker from 'comlink-loader!./framework/SimulationAdapter';\nimport ExportWorker from 'comlink-loader!./framework/ExportAdapter';\n\nclass App extends React.Component {\n  constructor(props) {\n    super(props)\n    this.state = {\n      config_counter: 1,\n      configs: {},\n      sim_config: {\n        time: Units.s.make(3),\n        dt: Units.ms.make(10),\n        animate: true,\n        graphs: [\n          {\n            key: \"displacement\",\n            title: \"Displacement\",\n            unit: Units.m,\n            enabled: true\n          },\n          {\n            key: \"velocity\",\n            title: \"Velocity\",\n            unit: Units.mps,\n            enabled: true\n          },\n          {\n            key: \"acceleration\",\n            title: \"Acceleration\",\n            unit: Units.mpsps,\n            enabled: true\n          },\n          {\n            key: \"current\",\n            title: \"Current Draw\",\n            unit: Units.A,\n            enabled: true\n          },\n          {\n            key: \"speed\",\n            title: \"Angular Velocity\",\n            unit: Units.radps,\n            enabled: false\n          },\n          {\n            key: \"torque\",\n            title: \"Torque\",\n            unit: Units.Nm,\n            enabled: false\n          }\n        ]\n      },\n      simulationResults: undefined,\n      simConfigs: undefined,\n      simLoading: false,\n      simAuto: false,\n      exportRunning: false\n    };\n\n    this.addConfig = this.addConfig.bind(this);\n    this.deleteConfig = this.deleteConfig.bind(this);\n    this.updateConfig = this.updateConfig.bind(this);\n    this.duplicateConfig = this.duplicateConfig.bind(this);\n    this.update = this.update.bind(this);\n    this.runSimulation = this.runSimulation.bind(this);\n    this.triggerAutoSim = this.triggerAutoSim.bind(this);\n    this.toggleAutoSim = this.toggleAutoSim.bind(this);\n    this.exportData = this.exportData.bind(this);\n  }\n\n  componentDidMount() {\n    // Add default config\n    this.addConfig(\"KoP Drivetrain\", KitOfParts(), () => {\n      this.addConfig(\"Elevator\", Elevator(), this.runSimulation);\n    });\n  }\n\n  toggleAutoSim() {\n    if (this.state.simAuto)\n      this.setState({ simAuto: false });\n    else\n      this.setState({ simAuto: true }, this.triggerAutoSim);\n  }\n\n  triggerAutoSim() {\n    if (this.state.simAuto)\n      this.runSimulation();\n  }\n\n  addConfig(name, template, callback) {\n    let id = this.state.config_counter;\n    this.setState({\n      configs: {\n        ...this.state.configs,\n        [id]: {\n          ...template,\n          id: id, \n          name: name\n        }\n      },\n      config_counter: this.state.config_counter + 1\n    }, callback || this.triggerAutoSim);\n  }\n\n  deleteConfig(id) {\n    this.setState({\n      configs: _.omit(this.state.configs, id)\n    }, this.triggerAutoSim);\n  }\n\n  duplicateConfig(cfg, callback) {\n    this.addConfig(cfg.name + \" (Copy)\", cfg, callback);\n  }\n\n  updateConfig(id, newProps) {\n    this.setState({\n      configs: {\n        ...this.state.configs,\n        [id]: {\n          ...this.state.configs[id],\n          ...newProps\n        }\n      }\n    }, this.triggerAutoSim);\n  }\n\n  update(key, newProps) {\n    this.setState({\n      [key]: {\n        ...this.state[key],\n        ...newProps\n      }\n    }, this.triggerAutoSim);\n  }\n\n  runSimulation(callback) {\n    // When triggered directly from a button or other sources, arguments can be objects...\n    let actualCallback = typeof callback === 'function' ? callback : undefined;\n    this.setState({ simLoading: true });\n    const worker = new SimulationWorker();\n    (new worker.SimulationAdapter(this.state.sim_config, this.state.configs))\n      .then(a => a.run())\n      .then(o => this.setState({ simulationResults: o.results, simConfigs: o.configs, simLoading: false }, actualCallback));\n  }\n\n  exportData() {\n    // Run a simulation, then export\n    this.setState({ exportRunning: true })\n    this.runSimulation(() => {\n      const worker = new ExportWorker();\n      (new worker.ExportAdapter(this.state.simulationResults, this.state.sim_config, this.state.simConfigs))\n        .then(a => a.run())\n        .then(results => {\n          Object.keys(results).forEach(name => {\n            let hidden = document.createElement('a');\n            hidden.target = '_blank';\n            hidden.download = `${name}.csv`\n            hidden.href = `data:text/csv;charset=utf-8,` + encodeURI(results[name])\n            hidden.click();\n            hidden.href = ''  // Clean that memory now, before it gets GC'd\n          });\n          this.setState({ exportRunning: false });\n        });\n    });\n  }\n\n  render() {\n    return <div className='mx-5'>\n      <center>\n        <h2>\n          Jaci's FRC Motor Selection Tool\n          &nbsp;\n          <Button href='https://github.com/JaciBrunning/frc-motor-modelling' target='_blank' variant='outline-dark'> \n            <FAIcon icon_style='brand' icon='github'/>\n            View on Github\n          </Button>\n        </h2>\n      </center>\n      <Container fluid={true}>\n        <Row>\n          <Col>\n            <center>\n              <SimControl\n                loading={ this.state.simLoading }\n                onRun={ this.runSimulation }\n                auto={ this.state.simAuto }\n                onAutoToggle={ this.toggleAutoSim }\n                onExport={ this.exportData }\n                exporting={ this.state.exportRunning } />\n            </center>\n          </Col>\n        </Row>\n        <Row>\n          <Col className=\"config-col my-3\">\n            <ConfigPanel \n              configs={this.state.configs}\n              addConfig={ () => { this.addConfig( `KoP ${this.state.config_counter}`, KitOfParts() ) } }\n              deleteConfig={ this.deleteConfig }\n              updateConfig={ this.updateConfig }\n              duplicateConfig={ this.duplicateConfig }\n              sim_config={ this.state.sim_config }\n              update={ this.update } />\n          </Col>\n          <Col className=\"sim-col my-3\">\n            <Row>\n              {\n                this.state.simulationResults ? this.state.sim_config.graphs.filter(g => g.enabled).map((g, i) => (\n                  <div className={ 'sim-graph' }>\n                    <SimulationGraph\n                      key={ g.key }\n                      title={ g.title }\n                      legend={ i === 0 }\n                      animate={ this.state.sim_config.animate }\n                      configs={ this.state.simConfigs }\n                      x={ this.state.simulationResults.time }\n                      y={ this.state.simulationResults[g.key] }\n                      xUnit={ this.state.sim_config.time.unit }\n                      yUnit={ g.unit }\n                      xLabel={ \"Time\" }\n                      yLabel={ g.title } />\n                  </div>\n                )) : <h2> Run a simulation to get started! </h2>\n              }\n            </Row>\n          </Col>\n        </Row>\n      </Container>\n    </div>\n  }\n}\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport App from './App';\n\nReactDOM.render(\n  <App />,\n  document.getElementById('root')\n);"],"sourceRoot":""}