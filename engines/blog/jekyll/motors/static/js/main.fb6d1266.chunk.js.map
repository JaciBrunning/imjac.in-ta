{"version":3,"sources":["framework/SimulationAdapter.js","framework/ExportAdapter.js","webpack:///./src/framework/SimulationAdapter.js?bdd1","webpack:///./src/framework/ExportAdapter.js?744a","components/jellybean/FontAwesome.js","components/jellybean/SimpleAccordion.js","framework/Motor.js","components/jellybean/HelpIcon.js","framework/Units.js","components/jellybean/Combo.js","components/jellybean/UnitSelector.js","components/jellybean/UnitInput.js","components/GearboxConfig.js","components/MotorConfig.js","components/LoadConfig.js","components/Configuration.js","components/jellybean/GraphConfig.js","components/SimConfig.js","components/ConfigPanel.js","components/SimControl.js","components/SimulationGraph.js","framework/DefaultConfigs.js","App.js","index.js"],"names":["inst","wrap","Worker","module","exports","f","this","FAIcon","getClassName","cls","styles","props","icon_style","icon","className","size","push","spin","join","Fragment","nospace","React","PureComponent","defaultProps","regular","solid","brand","SimpleAccordion","state","selected","title","children","Accordion","defaultActiveKey","onSelect","e","setState","Card","Toggle","as","Header","eventKey","Collapse","Body","Component","Motor","name","v_nom","free_speed","free_current","stall_torque","stall_current","voltage_nom","n","G","eff","R","voltage","speed","current","kw","torque","kt","rpm_to_rad","Math","PI","Motors","Falcon500","NEO","NEO550","CIM","MiniCIM","BAG","pro775","redline","neverest","HelpIcon","tooltip","overlay","placement","OverlayTrigger","Tooltip","Unit","factor_to_base","base","derivatives","map","unit","fromBase","toBase","unit_obj","Measurement","value","undefined","to","measurement_obj","fromObject","prototype","make","m","mm","cm","inch","ft","field","s","ms","kg","lb","V","A","mA","rad","deg","mps","mmps","inchps","ftps","kph","field_per_s","mpsps","ftpsps","radps","degps","rpm","Nm","ftlb","Option","Combo","change","bind","findOptionFor","onChange","val","target","child","find","c","key","data","v","Form","Control","UnitSelector","allVariants","u","UnitInput","changeValue","getValue","parse","Units","parseFloat","toFixed","round","sm_lab","label","sm_input","sm_unit","sm_tooltip","unitContent","controlProps","Row","Label","column","sm","Col","xs","GearboxConfig","updateParent","partialReduction","stage","length","updateReduction","gearbox","reduction","reduce","a","b","setReduction","toggleCalc","addStage","removeStage","i","filter","x","j","updateStage","idx","new_stages","uuid","simple","Switch","id","checked","type","step","disabled","onClick","min","parseInt","Button","variant","GearboxConfigModal","show","onClose","onSave","Modal","onHide","closeButton","Title","Footer","MotorConfig","showGearboxConfig","getMotor","saveGearboxConfig","cfg","motor","mult","num","withEfficiency","efficiency","update","ButtonGroup","toggle","Object","keys","currentTarget","max","tex","LoadConfig","load","mass","radius","with","r","d","accel","Configuration","updateAndMerge","md","duplicate","delete","GraphConfig","enabled","SimConfig","updateGraph","changes","_","findIndex","graphs","g","new_graphs","time","dt","animate","ConfigPanel","setTab","k","addConfig","Tabs","activeKey","Tab","sim_config","newProps","values","configs","deleteConfig","duplicateConfig","updateConfig","SimControl","auto","loading","onRun","onAutoToggle","onExport","exporting","SimulationGraph","colours","arr","n_max","stride","floor","out","labels","maybeScale","xUnit","datasets","y","yUnit","fill","pointRadius","borderColor","options","maintainAspectRatio","display","text","fontSize","legend","animation","duration","scales","xAxes","ticks","callback","autoskip","maxTicksLimit","scaleLabel","xLabel","labelString","yAxes","yLabel","tooltips","callbacks","KitOfParts","App","config_counter","simulationResults","simConfigs","simLoading","simAuto","exportRunning","runSimulation","triggerAutoSim","toggleAutoSim","exportData","template","omit","actualCallback","SimulationWorker","SimulationAdapter","then","run","o","results","ExportWorker","ExportAdapter","forEach","hidden","document","createElement","download","href","encodeURI","click","Container","fluid","ReactDOM","render","getElementById"],"mappings":"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","file":"static/js/main.fb6d1266.chunk.js","sourcesContent":["var wrap = require('comlink').wrap,Worker = require(\"!worker-loader?{}!C:/Users/jaci/Documents/Prog/frc-motor-model/frc-motor-modelling/node_modules/comlink-loader/dist/comlink-worker-loader.js!C:\\\\Users\\\\jaci\\\\Documents\\\\Prog\\\\frc-motor-model\\\\frc-motor-modelling\\\\node_modules\\\\react-scripts\\\\node_modules\\\\babel-loader\\\\lib\\\\index.js??ref--5-oneOf-2!C:\\\\Users\\\\jaci\\\\Documents\\\\Prog\\\\frc-motor-model\\\\frc-motor-modelling\\\\src\\\\framework\\\\SimulationAdapter.js\"),inst;module.exports = function f() {if (this instanceof f) return wrap(Worker());return inst || (inst = wrap(Worker()));};","var wrap = require('comlink').wrap,Worker = require(\"!worker-loader?{}!C:/Users/jaci/Documents/Prog/frc-motor-model/frc-motor-modelling/node_modules/comlink-loader/dist/comlink-worker-loader.js!C:\\\\Users\\\\jaci\\\\Documents\\\\Prog\\\\frc-motor-model\\\\frc-motor-modelling\\\\node_modules\\\\react-scripts\\\\node_modules\\\\babel-loader\\\\lib\\\\index.js??ref--5-oneOf-2!C:\\\\Users\\\\jaci\\\\Documents\\\\Prog\\\\frc-motor-model\\\\frc-motor-modelling\\\\src\\\\framework\\\\ExportAdapter.js\"),inst;module.exports = function f() {if (this instanceof f) return wrap(Worker());return inst || (inst = wrap(Worker()));};","module.exports = function() {\n  return new Worker(__webpack_public_path__ + \"b68e955709293d7a5d7f.worker.js\");\n};","module.exports = function() {\n  return new Worker(__webpack_public_path__ + \"349ab8d55eec74f1bc76.worker.js\");\n};","import React from 'react';\n\nclass FAIcon extends React.PureComponent {\n  static defaultProps = {\n    icon_style: 'solid'\n  };\n\n  static styles = {\n    regular: \"far\",\n    solid: \"fas\",\n    brand: \"fab\"\n  };\n\n  getClassName = () => {\n    let cls = [\n      FAIcon.styles[this.props.icon_style],\n      `fa-${this.props.icon}`,\n      this.props.className\n    ];\n    if (this.props.size) cls.push(`fa-${this.props.size}`);\n    if (this.props.spin) cls.push(`fa-spin`);\n    return cls.join(\" \")\n  }\n\n  render() {\n    return <React.Fragment><i className={this.getClassName()} ></i> { this.props.nospace ? '' : '\\u00A0' /* nbsp */ } </React.Fragment>\n  }\n}\n\nexport default FAIcon;","import React from 'react';\nimport { Accordion, Card } from 'react-bootstrap';\nimport FAIcon from './FontAwesome';\n\nclass SimpleAccordion extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = { selected: \"1\" };\n  }\n\n  render() {\n    var { title, children, ...props } = this.props;\n    return <Accordion defaultActiveKey=\"1\" onSelect={ e => this.setState({ selected: e }) } {...props}>\n      <Card>\n        <Accordion.Toggle as={Card.Header} eventKey=\"1\">\n          <FAIcon size='lg' icon={ this.state.selected === \"1\" ? \"caret-up\" : \"caret-down\" } />\n          &nbsp;\n          { title }\n        </Accordion.Toggle>\n        <Accordion.Collapse eventKey=\"1\">\n          <Card.Body>\n            { children }\n          </Card.Body>\n        </Accordion.Collapse>\n      </Card>\n    </Accordion>\n  } \n}\n\nexport default SimpleAccordion;","class Motor {\n  constructor(name, v_nom, free_speed, free_current, stall_torque, stall_current) {\n    this.name = name;\n    this.voltage_nom = v_nom;\n    this.free_speed = free_speed;\n    this.free_current = free_current;\n    this.stall_torque = stall_torque;\n    this.stall_current = stall_current;\n  }\n\n  mult(n) {\n    return new Motor(this.name + \" (x\" + n + \")\", \n                this.voltage_nom, this.free_speed, n * this.free_current, \n                n * this.stall_torque, n * this.stall_current);\n  }\n\n  reduce(G) {\n    return new Motor(this.name + \" (G=\" + G + \")\",\n                this.voltage_nom, this.free_speed / G, this.free_current,\n                this.stall_torque * G, this.stall_current);\n  }\n\n  withEfficiency(eff) {\n    return new Motor(this.name + \" (Eff=\" + eff + \")\",\n                this.voltage_nom, this.free_speed, this.free_current,\n                this.stall_torque * eff, this.stall_current);\n  }\n\n  R() {\n    return this.voltage_nom / this.stall_current;\n  }\n  \n  kw() {\n    return (this.voltage_nom - this.free_current * this.R()) / this.free_speed;\n  }\n\n  kt() {\n    return (this.stall_current / this.stall_torque);\n  }\n\n  calculate(voltage, speed) {\n    let current = (voltage - this.kw() * speed) / this.R();\n    return {\n      current: current,\n      torque: current / this.kt()\n    };\n  }\n};\n\nlet rpm_to_rad = (2 * Math.PI) / 60.0;\n\nexport const Motors = {\n  Falcon500:  new Motor(\"Falcon 500\",  12,  6380 * rpm_to_rad,  1.5, 4.69, 257),\n  NEO:        new Motor(\"NEO\",         12,  5880 * rpm_to_rad,  1.3, 3.36, 166),\n  NEO550:     new Motor(\"NEO 550\",     12, 11710 * rpm_to_rad,  1.1, 1.08, 111),\n  CIM:        new Motor(\"CIM\",         12,  5330 * rpm_to_rad,  2.7, 2.41, 131),\n  MiniCIM:    new Motor(\"Mini CIM\",    12,  5840 * rpm_to_rad,  3.0, 1.41,  89),\n  BAG:        new Motor(\"BAG\",         12, 13180 * rpm_to_rad,  1.8, 0.43,  53),\n  pro775:     new Motor(\"775pro\",      12, 14270 * rpm_to_rad,  3.7, 0.36,  71),\n  redline:    new Motor(\"AM Redline\",  12, 19500 * rpm_to_rad,  2.6, 0.64, 122),\n  neverest:   new Motor(\"AM NeveRest\", 12,  5480 * rpm_to_rad, 0.35, 0.17, 9.8)\n};\n\nexport function motorFromConfig(cfg) {\n  return Motors[cfg.key].mult(cfg.num).reduce(cfg.reduction).withEfficiency(cfg.efficiency / 100.0);\n};\n\nexport default Motor;\n","import React from 'react';\nimport { OverlayTrigger, Tooltip } from 'react-bootstrap';\nimport FAIcon from './FontAwesome';\n\nclass HelpIcon extends React.PureComponent {\n  static defaultProps = {\n    placement: 'top'\n  };\n\n  render() {\n    var { tooltip, overlay, placement, ...props } = this.props;\n    return <OverlayTrigger placement={placement} overlay={ overlay || <Tooltip> { tooltip } </Tooltip> } {...props} >\n      <span><FAIcon icon=\"question-circle\" size=\"sm\" /></span>\n    </OverlayTrigger>\n  }\n}\n\nexport default HelpIcon;","class Unit {\n  static map = {};\n\n  constructor(name, factor_to_base=1, base=null) {\n    this.name = name;\n    this.factor_to_base = factor_to_base;\n    this.base = base;\n\n    if (!base && (factor_to_base - 1) > 0.001)\n      throw(`ERROR: Unit ${name} has no base unit!`)\n\n    if (!base) {\n      this.derivatives = []\n      this.base = this;\n    } else {\n      while (this.base.base !== this.base) {\n        this.factor_to_base *= this.base.factor_to_base;\n        this.base = this.base.base;\n      }\n      this.base.derivatives.push(this);\n    }\n    Unit.map[name] = this;\n  }\n\n  toBase(n) {\n    return n * this.factor_to_base;\n  }\n\n  fromBase(n) {\n    return n / this.factor_to_base;\n  }\n\n  to(unit, n) {\n    if (unit.base !== this.base)\n      throw \"Cannot convert between units of different bases!\"\n    return unit.fromBase(this.toBase(n));\n  }\n\n  allVariants() {\n    return [ this.base, ...this.base.derivatives ]\n  }\n\n  static fromObject(unit_obj) {\n    if (typeof unit_obj === 'object' && unit_obj !== null)\n      return Unit.map[unit_obj.name];\n    return unit_obj;\n  }\n};\n\nexport class Measurement {\n  constructor(unit, value) {\n    this.unit = unit;\n    this.value = value;\n    if (this.unit === undefined || this.value === undefined)\n      throw \"Measurement params undefined\";\n  }\n\n  to(unit) {\n    return new Measurement(unit, this.unit.to(unit, this.value));\n  }\n\n  toBase() {\n    return this.unit.toBase(this.value);\n  }\n\n  with(f) {\n    return new Measurement(this.unit, f(this.value));\n  }\n\n  static fromObject(measurement_obj) {\n    if (typeof measurement_obj === 'object' && measurement_obj !== null)\n      return new Measurement(Unit.fromObject(measurement_obj.unit), measurement_obj.value);\n    return measurement_obj;\n  }\n};\n\nUnit.prototype.make = function(n) {\n  return new Measurement(this, n);\n};\n\n// Length\nexport const m    = new Unit('m', 1)\nexport const mm   = new Unit('mm', 1 / 1000, m);\nexport const cm   = new Unit('cm', 10, mm);\nexport const inch = new Unit('in', 25.4, mm);\nexport const ft   = new Unit('ft', 12, inch);\nexport const field = new Unit('FRC Field (54ft)', 54, ft);\n\n// Time\nexport const s  = new Unit('s', 1);\nexport const ms = new Unit('ms', 1 / 1000, s);\n\n// Mass\nexport const kg = new Unit('kg', 1);\nexport const lb = new Unit('lb', 0.453592, kg);\n\n// Voltage\nexport const V = new Unit('V', 1);\n\n// Current\nexport const A = new Unit('A', 1);\nexport const mA = new Unit('mA', 1 / 1000, A);\n\n// Angle\nexport const rad = new Unit('rad', 1);\nexport const deg = new Unit('deg', Math.PI / 180, rad);\n\n// Velocity\nexport const mps = new Unit('m/s', 1);\nexport const mmps = new Unit('mm/s', 1 / 1000, mps);\nexport const inchps = new Unit('in/s', 25.4, mmps)\nexport const ftps = new Unit('ft/s', 12, inchps);\nexport const kph = new Unit('km/hr', 1 / 3.6, mps);\nexport const field_per_s = new Unit('FRC Fields / s', 54, ftps);\n\n// Acceleration\nexport const mpsps = new Unit('m/s/s', 1);\nexport const ftpsps = new Unit('ft/s/s', 12 * 25.4 / 1000, mpsps);\n\n// Angular Velocity\nexport const radps = new Unit('rad/s', 1);\nexport const degps = new Unit('deg/s', Math.PI / 180, radps);\nexport const rpm   = new Unit('rpm', 2 * Math.PI / 60, radps);\n\n// Torque\nexport const Nm = new Unit('Nm', 1);\nexport const ftlb = new Unit('ftlb', 1.35582, Nm);","import React from 'react';\nimport { Form } from 'react-bootstrap';\n\nclass Option extends React.PureComponent {\n  render() {\n    var {children, ...props} = this.props;\n    return <option {...props}> { children } </option>;\n  }\n}\n\nclass Combo extends React.Component {\n  static Option = Option;\n\n  constructor(props) {\n    super(props)\n    this.change = this.change.bind(this);\n    this.findOptionFor = this.findOptionFor.bind(this);\n  }\n\n  change(e) {\n    if (this.props.onChange) {\n      let val = e.target.value;\n      let child = this.props.children.find(c => c.key === val);\n      this.props.onChange(child.props.data);\n    }\n  }\n\n  findOptionFor(v) {\n    return this.props.children.find(c => c.props.data === v)\n  }\n\n  render() {\n    var { children, value, onChange, ...props } = this.props;\n    return <Form.Control size=\"sm\" as=\"select\" value={ this.findOptionFor(value).key } onChange={ this.change } {...props}>\n      {\n        children\n      }\n    </Form.Control>\n  }\n}\n\nexport default Combo;","import React from 'react';\nimport Combo from './Combo';\n\nclass UnitSelector extends React.PureComponent {\n  static defaultProps = {\n    unit: undefined,\n    value: undefined,\n    onChange: undefined\n  };\n\n  render() {\n    let { value, onChange, unit, ...props } = this.props;\n    return <Combo value={ value } onChange={ onChange } {...props}>\n      {\n        (unit || value).base.allVariants().map(u => <Combo.Option key={u.name} data={u}> { u.name } </Combo.Option>)\n      }\n    </Combo>\n  }\n}\n\nexport default UnitSelector;","import React from 'react';\nimport { Form, Col, Row } from 'react-bootstrap';\nimport HelpIcon from './HelpIcon';\nimport * as Units from '../../framework/Units';\nimport UnitSelector from './UnitSelector';\n\nclass UnitInput extends React.PureComponent {\n  static defaultProps = {\n    sm_lab: 5,\n    sm_input: 3,\n    sm_unit: 4,\n    unit: undefined,\n    unitContent: undefined,\n    parse: parseFloat,\n    round: 3\n  };\n\n  constructor(props) {\n    super(props)\n    this.changeValue = this.changeValue.bind(this);\n    this.getValue = this.getValue.bind(this);\n  }\n\n  changeValue(e) {\n    let val = e.target.value;\n    let n = this.props.parse(val);\n\n    if (this.props.unit) {\n      this.props.onChange(new Units.Measurement(this.props.value.unit, n));\n    } else {\n      this.props.onChange(n);\n    }\n  }\n\n  getValue() {\n    let val = this.props.unit ? this.props.value.value : this.props.value;\n    if (this.props.parse === parseFloat)\n      val = parseFloat(val.toFixed(this.props.round))   // Parsing again is a little trick to remove trailing zeros\n    return val\n  }\n\n  render() {\n    var { className, sm_lab, label, sm_input, sm_unit, sm_tooltip, tooltip, unit, unitContent, parse, value, onChange, ...controlProps } = this.props;\n    return <Form.Row className={className}>\n      {\n        label ? \n          <Form.Label column=\"sm\" sm={ sm_lab }>\n            { label }:\n          </Form.Label> : <React.Fragment />\n      }\n      <Col sm={ sm_input }>\n        <Form.Control size=\"sm\" value={ this.getValue() } onChange={ this.changeValue } {...controlProps} />\n      </Col>\n      <Col sm={sm_unit}>\n        {\n          unitContent ? unitContent : \n            <Row>\n              <Col>\n                {\n                  unit ? \n                    <UnitSelector unit={ unit } value={ value.unit } onChange={ u => onChange(value.to(u)) } />\n                    : <React.Fragment />\n                }\n              </Col>\n              <Col className='pl-0' xs='3'>\n                {\n                  tooltip ? \n                    <HelpIcon tooltip={ tooltip } /> : <React.Fragment />\n                }\n              </Col>\n            </Row>\n        }\n      </Col>\n    </Form.Row>\n  }\n}\n\nexport { Units };\nexport default UnitInput;","import React from 'react';\r\nimport { Modal, Button, Form, Col } from 'react-bootstrap';\r\nimport { v4 as uuid } from 'uuid';\r\nimport FAIcon from './jellybean/FontAwesome';\r\n\r\nclass GearboxConfig extends React.Component {\r\n  static defaultProps = {\r\n    round: 3\r\n  };\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      reduction: props.reduction,\r\n      gearbox: props.gearbox\r\n    };\r\n    this.uuid = uuid();\r\n  }\r\n\r\n  updateParent = () => {\r\n    if (this.props.onChange)\r\n      this.props.onChange(this.state);\r\n  }\r\n\r\n  round = (v) => {\r\n    return parseFloat(v.toFixed(this.props.round));\r\n  }\r\n\r\n  partialReduction = (stage) => {\r\n    return stage[stage.length - 1] / stage[0];\r\n  }\r\n\r\n  updateReduction = () => {\r\n    if (this.state.gearbox) {\r\n      let reduction = this.state.gearbox.map(this.partialReduction).reduce((a, b) => a * b);\r\n      this.setState({ reduction: reduction }, this.updateParent);\r\n    } else {\r\n      this.updateParent();\r\n    }\r\n  }\r\n\r\n  setReduction = (reduction) => {\r\n    this.setState({ reduction: reduction }, this.updateParent);\r\n  }\r\n\r\n  toggleCalc = () => {\r\n    this.setState({\r\n      gearbox: (this.state.gearbox === null) ? [[14,50], [16,48]] : null\r\n    }, this.updateReduction);\r\n  }\r\n\r\n  addStage = () => {\r\n    this.setState({\r\n      gearbox: [ ...this.state.gearbox, [16, 50] ]\r\n    }, this.updateReduction);\r\n  }\r\n\r\n  removeStage = (i) => {\r\n    this.setState({\r\n      gearbox: [ ...this.state.gearbox.filter( (x, j) => j !== i ) ]\r\n    }, this.updateReduction);\r\n  }\r\n\r\n  updateStage = (stage, idx, value) => {\r\n    let new_stages = [ ...this.state.gearbox ];\r\n    new_stages[stage][idx] = value;\r\n    this.setState({ gearbox: new_stages }, this.updateReduction);\r\n  }\r\n\r\n  render() {\r\n    let simple = this.state.gearbox === null;\r\n    return <Form className='gearbox-config'>\r\n      <Form.Row>\r\n        <Col>\r\n          <Form.Switch\r\n            id={`${this.uuid}-gearbox-switch`}\r\n            label='Stage Calculator'\r\n            checked={ !simple }\r\n            onChange={ this.toggleCalc } />\r\n        </Col>\r\n        <Col>\r\n          <Form.Control\r\n            size='sm' \r\n            type='number' \r\n            step={0.01}\r\n            disabled={ !simple }\r\n            value={ this.round(this.state.reduction) }\r\n            onChange={ e => this.setReduction(parseFloat(e.target.value)) } />\r\n        </Col>\r\n      </Form.Row>\r\n      <hr />\r\n      {\r\n        simple ? <React.Fragment /> :\r\n          <React.Fragment>\r\n            {this.state.gearbox.map((stage, i) => <Form.Row key={i} className='my-3'>\r\n              <Col>\r\n                <h6 className='align-self-center'>\r\n                  Stage {i + 1}\r\n                  &nbsp; &nbsp;\r\n                  {\r\n                    i === 0 ? <React.Fragment /> : \r\n                      <a className='text-danger' onClick={ () => this.removeStage(i) }>\r\n                        <FAIcon icon='trash-alt' nospace/>\r\n                      </a>                  }\r\n                </h6>\r\n              </Col>\r\n              {\r\n                stage.map((v, j) => (\r\n                  <Col>\r\n                    <Form.Control\r\n                      key={`${i}-${j}`}\r\n                      size='md' type='number'\r\n                      min={1} step={1}\r\n                      value={ v }\r\n                      onChange={ e => this.updateStage(i, j, parseInt(e.target.value)) } />\r\n                  </Col>\r\n                ))\r\n              }\r\n              <Col>\r\n                <Form.Control\r\n                  size='md' type='number'\r\n                  disabled\r\n                  value={ this.round(this.partialReduction(stage)) } />\r\n              </Col>\r\n            </Form.Row>)}\r\n            <Form.Row>\r\n              <Button variant='outline-success' size='sm' onClick={ this.addStage }> \r\n                <FAIcon icon='plus' />\r\n                Add Stage\r\n              </Button>\r\n            </Form.Row>\r\n          </React.Fragment>\r\n      }\r\n    </Form>\r\n  }\r\n};\r\n\r\nclass GearboxConfigModal extends React.Component {\r\n  render() {\r\n    var { show, onClose, onSave, ...props } = this.props;\r\n    return <Modal show={show} onHide={ onClose }>\r\n      <Modal.Header closeButton>\r\n        <Modal.Title> Configure Gearbox </Modal.Title>\r\n      </Modal.Header>\r\n      <Modal.Body>\r\n        <GearboxConfig {...props } onChange={ s => this.setState({ ...s }) } />\r\n      </Modal.Body>\r\n      <Modal.Footer>\r\n        <Button variant=\"secondary\" onClick={ onClose }> Cancel </Button>\r\n        <Button variant=\"success\" onClick={ () => { onClose(); onSave(this.state) } }> Save </Button>\r\n      </Modal.Footer>\r\n    </Modal>\r\n  }\r\n};\r\n\r\nexport default GearboxConfigModal;","import React from 'react';\nimport { Motors, motorFromConfig } from '../framework/Motor';\nimport { ButtonGroup, Button, Form, Col } from 'react-bootstrap';\nimport { MathComponent } from 'mathjax-react';\nimport UnitInput, { Units } from './jellybean/UnitInput';\nimport HelpIcon from './jellybean/HelpIcon';\nimport FAIcon from './jellybean/FontAwesome';\nimport GearboxConfigModal from './GearboxConfig';\n\nclass MotorConfig extends React.Component {\n  constructor(props) {\n    super(props)\n    this.state = {\n      showGearboxConfig: false\n    }\n    this.getMotor = this.getMotor.bind(this);\n    this.saveGearboxConfig = this.saveGearboxConfig.bind(this);\n  }\n\n  getMotor() {\n    return motorFromConfig(this.props.motor);\n  }\n\n  saveGearboxConfig(s) {\n    if (s !== null)\n      this.props.update(s);\n  }\n\n  render() {\n    return <Form>\n      <Form.Row className=\"mb-3\">\n        <Col>\n          <ButtonGroup toggle className=\"flex-wrap\">\n            {\n              Object.keys(Motors).map(key =>\n                <Button \n                  key={key} \n                  variant={ this.props.motor.key === key ? \"primary\" : \"outline-secondary\" }\n                  size=\"sm\"\n                  value={key} \n                  name=\"motor_selection\"\n                  onClick={ (e) => this.props.update({ key: e.currentTarget.value }) }> \n                  { Motors[key].name } \n                </Button>\n              )\n            }\n          </ButtonGroup>\n        </Col>\n      </Form.Row>\n      <hr />\n\n      <UnitInput\n        label=\"Applied Voltage\"\n        className=\"mb-2\"\n        type=\"number\"\n        value={ this.props.motor.voltage }\n        onChange={ v => { this.props.update({ voltage: v }) } }\n        min={0}\n        max={14}\n        step={0.1}\n        unit={Units.V}\n        tooltip='Desired applied voltage to the motor during the simulation.' />\n\n      <UnitInput\n        label=\"Number of Motors\"\n        className=\"mb-2\"\n        type=\"number\"\n        value={ this.props.motor.num }\n        onChange={ v => { this.props.update({ num: v }) } }\n        min={1}\n        step={1}\n        parse={parseInt} />\n\n      <UnitInput\n        label=\"Gearbox Reduction\"\n        className=\"mb-2\"\n        type=\"number\"\n        value={ this.props.motor.reduction }\n        onChange={ v => { this.props.update({ reduction: v }) } }\n        min={0}\n        step={0.1}\n        disabled={ this.props.motor.gearbox !== null }\n        unitContent={ \n          <Button variant='info' size='sm' onClick={ () => this.setState({ showGearboxConfig: true }) }>\n             <FAIcon icon='cog' nospace/> \n          </Button> \n        } />\n\n      <UnitInput\n        label='Efficiency'\n        className='mb-2'\n        type='number'\n        value={ this.props.motor.efficiency }\n        onChange={ v => { this.props.update({ efficiency: v }) } }\n        min={0}\n        max={100}\n        step={0.5} />\n      \n      <GearboxConfigModal\n        show={this.state.showGearboxConfig}\n        onClose={ () => this.setState({ showGearboxConfig: false }) }\n        onSave={ (s) => this.saveGearboxConfig(s) }\n        reduction={ this.props.motor.reduction }\n        gearbox={ this.props.motor.gearbox } />\n\n      <hr />\n      <div className=\"text-dark small\">\n        <center><i> Equivalent Motor Coefficients </i> <HelpIcon tooltip=\"Mathematical coefficients for a single motor model, after merging multiple motors and applying the gearbox reduction.\" /> </center>\n        <Form.Row>\n          <Col>\n            <MathComponent tex={ \"V = IR + k_\\\\omega \\\\omega\" } />\n          </Col>\n          <Col>\n            <MathComponent tex={ \"I = k_\\\\tau \\\\tau\" } />\n          </Col>\n        </Form.Row>\n        <Form.Row>\n          <Col className='align-self-center'>\n            <MathComponent tex={ \"R_{equiv} = \" + this.getMotor().R().toFixed(4) + \" \\\\Omega\"  }/>\n          </Col>\n          <Col className='align-self-center'>\n            <MathComponent tex={ \"k_\\\\omega = \" + this.getMotor().kw().toFixed(5) + \"\\\\ \\\\frac{Vs}{rad}\"  }/>\n          </Col>\n          <Col className='align-self-center'>\n            <MathComponent tex={ \"k_\\\\tau = \" + this.getMotor().kt().toFixed(3) + \"\\\\ \\\\frac{A}{Nm}\"  }/>\n          </Col>\n        </Form.Row>\n      </div>\n    </Form>\n  }\n}\n\nexport default MotorConfig;","import React from 'react';\nimport { Form } from 'react-bootstrap';\nimport UnitInput, { Units } from './jellybean/UnitInput';\n\nclass LoadConfig extends React.PureComponent {\n  render() {\n    return <Form>\n      <UnitInput\n        label='Load Mass'\n        type='number'\n        min={0}\n        value={this.props.load.mass}\n        onChange={ v => { this.props.update({ mass: v }) } }\n        unit={Units.kg}\n      />\n      <UnitInput\n        className='mt-2'\n        label='Diameter'\n        type='number'\n        min={0}\n        value={this.props.load.radius.with(r => r * 2)}\n        onChange={ v => this.props.update({ radius: v.with(d => d / 2) }) }\n        unit={Units.mm}\n        tooltip='Diameter of the wheel, pulley, or moment arm that converts angular motion to linear motion (e.g. drivetrain wheels, elevator pulley).'\n      />\n      <UnitInput\n        className='mt-2'\n        label='Accel Offset'\n        type='number'\n        min={0}\n        value={this.props.load.accel}\n        onChange={ v => this.props.update({ accel: v }) }\n        unit={Units.mpsps}\n        tooltip='Acceleration acting on the load. For a drivetrain, this is likely 0. For an elevator, this is likely -9.81 (gravity, acting down).'\n      />\n    </Form>\n  }\n}\n\nexport default LoadConfig;","import React from 'react';\nimport { Form, Col, Button } from 'react-bootstrap';\nimport SimpleAccordion from './jellybean/SimpleAccordion';\nimport MotorConfig from './MotorConfig';\nimport { Motors } from '../framework/Motor';\nimport FAIcon from './jellybean/FontAwesome';\nimport LoadConfig from './LoadConfig';\n\nclass Configuration extends React.Component {\n  constructor(props) {\n    super(props);\n    this.updateAndMerge = this.updateAndMerge.bind(this);\n  }\n\n  updateAndMerge(key, value) {\n    this.props.update({ [key]: {\n      ...this.props.cfg[key],\n      ...value\n    }});\n  }\n\n  render() {\n    return <div>\n      <Form.Row className=\"my-3\">\n        <Form.Label column=\"sm\" md=\"auto\">\n          Config Name: \n        </Form.Label>\n        <Col>\n          <Form.Control \n            type=\"text\" size=\"sm\" \n            value={ this.props.cfg.name }\n            onChange={ e => { this.props.update({ name: e.target.value }) } } />\n        </Col>\n      </Form.Row>\n      <Form.Row className=\"mb-3\">\n        <Col>\n          <Button \n            variant=\"primary\" size=\"sm\"\n            onClick={ this.props.duplicate } > \n            <FAIcon icon_style='regular' icon='copy' /> Duplicate Configuration\n          </Button>\n          &nbsp;\n          <Button \n            variant=\"danger\" size=\"sm\"\n            onClick={ this.props.delete }> \n            <FAIcon icon_style='regular' icon='trash-alt' /> Delete Configuration </Button>\n        </Col>\n      </Form.Row>\n\n      <SimpleAccordion title=\"Load\">\n        <LoadConfig\n          load={ this.props.cfg.load }\n          update={ r => this.updateAndMerge('load', r) } />\n      </SimpleAccordion>\n      <br />\n      <SimpleAccordion title={\"Motors\"}>\n        <MotorConfig\n          motor={ this.props.cfg.motor }\n          update={ m => this.updateAndMerge('motor', m) } />\n      </SimpleAccordion>\n      \n    </div>\n  }\n}\n\nexport default Configuration;","import React from 'react';\nimport { Form, Col } from 'react-bootstrap';\nimport UnitSelector from './UnitSelector';\nimport HelpIcon from './HelpIcon';\nclass GraphConfig extends React.PureComponent {\n  static defaultProps = {\n    sm_lab: \"5\",\n    sm_unit: \"4\",\n    sm_tooltip: \"1\",\n    cfg: undefined,\n    onChange: undefined,\n    tooltip: undefined\n  }\n\n  render() {\n    var { className, sm_lab, sm_unit, sm_tooltip, cfg, tooltip, onChange, ...props } = this.props;\n    return <Form.Row className={className}>\n      <Col sm={ sm_lab }>\n        <Form.Switch \n          id={ cfg.key + \"_en\" }\n          label={ cfg.title }\n          checked={ cfg.enabled }\n          onChange={ e => onChange({ enabled: !cfg.enabled }) } />\n      </Col>\n      <Col sm={ sm_unit }>\n        <UnitSelector value={ cfg.unit } onChange={ u => onChange({ unit: u }) } />\n      </Col>\n      <Col sm={ sm_tooltip }>\n        {\n          tooltip ? \n            <HelpIcon tooltip={ tooltip } /> : <React.Fragment />\n        }\n      </Col>\n    </Form.Row>\n  }\n}\n\nexport default GraphConfig; ","import React from 'react';\nimport { Form, Col } from 'react-bootstrap';\nimport UnitInput, { Units } from './jellybean/UnitInput';\nimport GraphConfig from './jellybean/GraphConfig';\nimport SimpleAccordion from './jellybean/SimpleAccordion';\nimport _ from 'lodash';\nclass SimConfig extends React.Component {\n  constructor(props) {\n    super(props);\n    this.updateGraph = this.updateGraph.bind(this);\n  }\n\n  updateGraph(key, changes) {\n    let idx = _.findIndex(this.props.cfg.graphs, g => g.key == key);\n    let new_graphs = [...this.props.cfg.graphs];\n    new_graphs[idx] = { ...this.props.cfg.graphs[idx], ...changes };\n    this.props.update({ graphs: new_graphs });\n  }\n\n  render() {\n    return <Form>\n      <SimpleAccordion title=\"Simulation Parameters\" className='my-3'>\n        <UnitInput\n          className='mb-3'\n          label='Simulation Duration'\n          type='number'\n          min={0}\n          value={ this.props.cfg.time }\n          onChange={ v => { this.props.update({ time: v }) } }\n          unit={Units.s}\n        />\n        <UnitInput\n          label='Simulation Timestep'\n          type='number'\n          min={0.001}\n          step={0.001}\n          value={ this.props.cfg.dt }\n          onChange={ v => { this.props.update({ dt: v }) } }\n          tooltip='Simulation time interval (dt). The smaller, the finer the detail of the simulation.'\n          unit={Units.s}\n        />\n      </SimpleAccordion>\n      <SimpleAccordion title=\"Graphing Controls\" className='my-3'>\n        <Form.Row className='mb-3'>\n          <Col>\n            <Form.Switch\n              id='graph-animate-switch'\n              label='Animate?'\n              checked={ this.props.cfg.animate }\n              onChange={ e => { this.props.update({ animate: !this.props.cfg.animate }) } } />\n          </Col>\n        </Form.Row>\n        {\n          this.props.cfg.graphs.map(g => (\n            <GraphConfig key={g.key} className={ 'mt-2' } cfg={g} onChange={ v => this.updateGraph(g.key, v) } />\n          ))\n        }\n      </SimpleAccordion>\n    </Form>\n  }\n}\n\nexport default SimConfig;","import React from 'react';\nimport Configuration from './Configuration';\nimport { Tabs, Tab } from 'react-bootstrap';\nimport FAIcon from './jellybean/FontAwesome';\nimport SimConfig from './SimConfig';\nclass ConfigPanel extends React.Component {\n  constructor(props) {\n    super(props)\n    this.state = { selected: 'sim' }\n    this.setTab = this.setTab.bind(this);\n  }\n\n  setTab(k) {\n    if (k === '_ADD') {\n      this.props.addConfig();\n    } else \n      this.setState({ selected: k });\n  }\n\n  render() {\n    return <div>\n      <Tabs activeKey={ this.state.selected} onSelect={k => this.setTab(k)} >\n        <Tab key='sim' eventKey='sim' title={ <FAIcon icon='cog' nospace /> }>\n          <SimConfig\n            cfg={this.props.sim_config}\n            update={ (newProps) => this.props.update('sim_config', newProps) } />\n        </Tab>\n        { Object.values(this.props.configs).map(c => \n          <Tab key={c.id} eventKey={c.id} title={c.name}>\n            <Configuration\n              cfg={c}\n              delete={ () => this.props.deleteConfig(c.id) }\n              duplicate={ () => this.props.duplicateConfig(c) }\n              update={ (newProps) => this.props.updateConfig(c.id, newProps) } />\n          </Tab>) }\n        <Tab key='_ADD' eventKey='_ADD' title={\n          <FAIcon icon=\"plus\" size=\"sm\" />\n        } />\n      </Tabs>\n    </div>\n  }\n}\n\nexport default ConfigPanel;","import React from 'react';\nimport { Button } from 'react-bootstrap';\nimport FAIcon from './jellybean/FontAwesome';\n\nclass SimControl extends React.PureComponent {\n  render() {\n    return <div>\n      <Button\n        className='m-1'\n        variant={ this.props.auto ? 'outline-secondary' : (this.props.loading ? 'info' : 'success') }\n        onClick={ this.props.onRun }\n        disabled={ this.props.loading || this.props.auto }>\n        <FAIcon\n          icon={ this.props.loading ? 'cog' : 'play' }\n          spin={ this.props.loading } />\n        Run Simulation\n      </Button>\n\n      <Button\n        className='m-1'\n        onClick={ this.props.onAutoToggle }\n        variant={ this.props.auto ? 'warning' : 'primary' }>\n        <FAIcon\n          icon='sync-alt'\n          spin={ this.props.auto } />\n        {\n          this.props.auto ? 'Stop Auto Sim' : 'Start Auto Sim'\n        }\n      </Button>\n\n      <Button\n        className='m-1'\n        onClick={ this.props.onExport }\n        variant='info'\n        disabled={ this.props.exporting }>\n        <FAIcon\n          icon={ this.props.exporting ? 'cog' : 'save' }\n          spin={ this.props.exporting } />\n        Export CSVs\n      </Button>\n    </div>\n  }\n}\n\nexport default SimControl;","import React from 'react';\nimport { Line } from 'react-chartjs-2';\n\nclass SimulationGraph extends React.Component {\n  static defaultProps = {\n    xLabel: \"Time\",\n    animate: true\n  }\n\n  constructor(props) {\n    super(props)\n    this.data = this.data.bind(this);\n  }\n\n  colours = [ '#34225c', '#71286b', '#aa2d6c', '#db425f', '#fc6749', '#ff9729', '#ffcb00', '#e6ff1c' ]\n\n  // Keep arrays short so the graphs don't eat a ton of memory\n  filter(arr, n_max) {\n    if (arr.length < n_max)\n      return arr;\n    \n    let stride = Math.floor(arr.length / n_max);\n    let out = [];\n    let i;\n    for (i = 0; i < arr.length; i += stride) {\n      out.push(arr[i]);\n    }\n\n    return out;\n  }\n\n  maybeScale(arr, unit) {\n    if (unit)\n      return arr.map(v => unit.fromBase(v));\n    return arr;\n  }\n\n  data() {\n    const n = 1000;\n    return {\n      labels: this.maybeScale(this.filter(this.props.x, n), this.props.xUnit),\n      datasets: Object.keys(this.props.y).map(id => {\n        return {\n          label: this.props.configs[id].name,\n          data: this.maybeScale(this.filter(this.props.y[id], n), this.props.yUnit),\n          fill: false,\n          pointRadius: 0,\n          borderColor: this.colours[id % this.colours.length]\n        }\n      })\n    };\n  }\n\n  render() {\n    return <Line key={ this.props.title } data={this.data()} options={{\n      maintainAspectRatio: false,\n      title: {\n        display: true,\n        text: this.props.title,\n        fontSize: 16\n      },\n      legend: {\n        display: this.props.legend ? true : false\n      },\n      animation: {\n        duration: this.props.animate ? 500 : 0\n      },\n      scales: {\n        xAxes: [{\n          display: true,\n          ticks: { \n            callback: (v) => parseFloat(v.toFixed(5)),\n            autoskip: true,\n            maxTicksLimit: 10\n          },\n          scaleLabel: {\n            display: this.props.xLabel !== undefined,\n            labelString: this.props.xUnit !== undefined ? ( this.props.xLabel + \" (\" + this.props.xUnit.name + \")\" ) : this.props.xLabel\n          }\n        }],\n        yAxes: [{\n          display: true,\n          label: { callback: (v) => parseFloat(v.toFixed(3)) },\n          scaleLabel: {\n            display: this.props.yLabel !== undefined,\n            labelString: this.props.yUnit !== undefined ? ( this.props.yLabel + \" (\" + this.props.yUnit.name + \")\" ) : this.props.yLabel\n          }\n        }]\n      },\n      tooltips: {\n        callbacks: { \n          title: (i, v) => this.props.xLabel + \": \" + parseFloat(parseFloat(i[0].xLabel).toFixed(5))\n        }\n      }\n    }} />\n  }\n}\n\nexport default SimulationGraph;","import * as Units from './Units';\n\nexport const KitOfParts = () => {\n  return {\n    motor: {\n      key: 'CIM',\n      voltage: Units.V.make(12),\n      num: 4,\n      reduction: 10.75,\n      gearbox: null,\n      efficiency: 90,\n    },\n    load: {\n      accel: Units.mpsps.make(0),\n      mass: Units.kg.make(70),\n      radius: Units.inch.make(6 / 2)\n    }\n  };\n};\n\nexport const Elevator = () => {\n  return {\n    motor: {\n      key: 'pro775',\n      voltage: Units.V.make(12),\n      num: 2,\n      reduction: 20,\n      gearbox: null,\n      efficiency: 90\n    },\n    load: {\n      accel: Units.mpsps.make(-9.81),\n      mass: Units.kg.make(10),\n      radius: Units.inch.make(4 / 2)\n    }\n  };\n};","import React from 'react';\nimport { Container, Row, Col, Button } from 'react-bootstrap';\nimport ConfigPanel from './components/ConfigPanel';\nimport './app.scss';\nimport _ from 'lodash';\nimport * as Units from './framework/Units';\nimport SimControl from './components/SimControl';\nimport SimulationGraph from './components/SimulationGraph';\nimport { KitOfParts, Elevator } from './framework/DefaultConfigs';\nimport FAIcon from './components/jellybean/FontAwesome';\n/* eslint-disable import/no-webpack-loader-syntax */\nimport SimulationWorker from 'comlink-loader!./framework/SimulationAdapter';\nimport ExportWorker from 'comlink-loader!./framework/ExportAdapter';\n\nclass App extends React.Component {\n  constructor(props) {\n    super(props)\n    this.state = {\n      config_counter: 1,\n      configs: {},\n      sim_config: {\n        time: Units.s.make(3),\n        dt: Units.ms.make(10),\n        animate: true,\n        graphs: [\n          {\n            key: \"displacement\",\n            title: \"Displacement\",\n            unit: Units.m,\n            enabled: true\n          },\n          {\n            key: \"velocity\",\n            title: \"Velocity\",\n            unit: Units.mps,\n            enabled: true\n          },\n          {\n            key: \"acceleration\",\n            title: \"Acceleration\",\n            unit: Units.mpsps,\n            enabled: true\n          },\n          {\n            key: \"current\",\n            title: \"Current Draw\",\n            unit: Units.A,\n            enabled: true\n          },\n          {\n            key: \"speed\",\n            title: \"Angular Velocity\",\n            unit: Units.radps,\n            enabled: false\n          },\n          {\n            key: \"torque\",\n            title: \"Torque\",\n            unit: Units.Nm,\n            enabled: false\n          }\n        ]\n      },\n      simulationResults: undefined,\n      simConfigs: undefined,\n      simLoading: false,\n      simAuto: false,\n      exportRunning: false\n    };\n\n    this.addConfig = this.addConfig.bind(this);\n    this.deleteConfig = this.deleteConfig.bind(this);\n    this.updateConfig = this.updateConfig.bind(this);\n    this.duplicateConfig = this.duplicateConfig.bind(this);\n    this.update = this.update.bind(this);\n    this.runSimulation = this.runSimulation.bind(this);\n    this.triggerAutoSim = this.triggerAutoSim.bind(this);\n    this.toggleAutoSim = this.toggleAutoSim.bind(this);\n    this.exportData = this.exportData.bind(this);\n  }\n\n  componentDidMount() {\n    // Add default config\n    this.addConfig(\"KoP Drivetrain\", KitOfParts(), () => {\n      this.addConfig(\"Elevator\", Elevator(), this.runSimulation);\n    });\n  }\n\n  toggleAutoSim() {\n    if (this.state.simAuto)\n      this.setState({ simAuto: false });\n    else\n      this.setState({ simAuto: true }, this.triggerAutoSim);\n  }\n\n  triggerAutoSim() {\n    if (this.state.simAuto)\n      this.runSimulation();\n  }\n\n  addConfig(name, template, callback) {\n    let id = this.state.config_counter;\n    this.setState({\n      configs: {\n        ...this.state.configs,\n        [id]: {\n          ...template,\n          id: id, \n          name: name\n        }\n      },\n      config_counter: this.state.config_counter + 1\n    }, callback || this.triggerAutoSim);\n  }\n\n  deleteConfig(id) {\n    this.setState({\n      configs: _.omit(this.state.configs, id)\n    }, this.triggerAutoSim);\n  }\n\n  duplicateConfig(cfg, callback) {\n    this.addConfig(cfg.name + \" (Copy)\", cfg, callback);\n  }\n\n  updateConfig(id, newProps) {\n    this.setState({\n      configs: {\n        ...this.state.configs,\n        [id]: {\n          ...this.state.configs[id],\n          ...newProps\n        }\n      }\n    }, this.triggerAutoSim);\n  }\n\n  update(key, newProps) {\n    this.setState({\n      [key]: {\n        ...this.state[key],\n        ...newProps\n      }\n    }, this.triggerAutoSim);\n  }\n\n  runSimulation(callback) {\n    // When triggered directly from a button or other sources, arguments can be objects...\n    let actualCallback = typeof callback === 'function' ? callback : undefined;\n    this.setState({ simLoading: true });\n    const worker = new SimulationWorker();\n    (new worker.SimulationAdapter(this.state.sim_config, this.state.configs))\n      .then(a => a.run())\n      .then(o => this.setState({ simulationResults: o.results, simConfigs: o.configs, simLoading: false }, actualCallback));\n  }\n\n  exportData() {\n    // Run a simulation, then export\n    this.setState({ exportRunning: true })\n    this.runSimulation(() => {\n      const worker = new ExportWorker();\n      (new worker.ExportAdapter(this.state.simulationResults, this.state.sim_config, this.state.simConfigs))\n        .then(a => a.run())\n        .then(results => {\n          Object.keys(results).forEach(name => {\n            let hidden = document.createElement('a');\n            hidden.target = '_blank';\n            hidden.download = `${name}.csv`\n            hidden.href = `data:text/csv;charset=utf-8,` + encodeURI(results[name])\n            hidden.click();\n            hidden.href = ''  // Clean that memory now, before it gets GC'd\n          });\n          this.setState({ exportRunning: false });\n        });\n    });\n  }\n\n  render() {\n    return <div className='mx-5'>\n      <center>\n        <h2>\n          Jaci's FRC Motor Selection Tool\n          &nbsp;\n          <Button href='https://github.com/JaciBrunning/frc-motor-modelling' target='_blank' variant='outline-dark'> \n            <FAIcon icon_style='brand' icon='github'/>\n            View on Github\n          </Button>\n        </h2>\n      </center>\n      <Container fluid={true}>\n        <Row>\n          <Col>\n            <center>\n              <SimControl\n                loading={ this.state.simLoading }\n                onRun={ this.runSimulation }\n                auto={ this.state.simAuto }\n                onAutoToggle={ this.toggleAutoSim }\n                onExport={ this.exportData }\n                exporting={ this.state.exportRunning } />\n            </center>\n          </Col>\n        </Row>\n        <Row>\n          <Col className=\"config-col my-3\">\n            <ConfigPanel \n              configs={this.state.configs}\n              addConfig={ () => { this.addConfig( `KoP ${this.state.config_counter}`, KitOfParts() ) } }\n              deleteConfig={ this.deleteConfig }\n              updateConfig={ this.updateConfig }\n              duplicateConfig={ this.duplicateConfig }\n              sim_config={ this.state.sim_config }\n              update={ this.update } />\n          </Col>\n          <Col className=\"sim-col my-3\">\n            <Row>\n              {\n                this.state.simulationResults ? this.state.sim_config.graphs.filter(g => g.enabled).map((g, i) => (\n                  <div className={ 'sim-graph' }>\n                    <SimulationGraph\n                      key={ g.key }\n                      title={ g.title }\n                      legend={ i === 0 }\n                      animate={ this.state.sim_config.animate }\n                      configs={ this.state.simConfigs }\n                      x={ this.state.simulationResults.time }\n                      y={ this.state.simulationResults[g.key] }\n                      xUnit={ this.state.sim_config.time.unit }\n                      yUnit={ g.unit }\n                      xLabel={ \"Time\" }\n                      yLabel={ g.title } />\n                  </div>\n                )) : <h2> Run a simulation to get started! </h2>\n              }\n            </Row>\n          </Col>\n        </Row>\n      </Container>\n    </div>\n  }\n}\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport App from './App';\n\nReactDOM.render(\n  <App />,\n  document.getElementById('root')\n);"],"sourceRoot":""}